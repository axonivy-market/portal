<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
  <ui:composition template="/layouts/frame-10.xhtml">
    <ui:define name="title">Reset a Task then navigate back in IFrame</ui:define>
    <ui:define name="content">

      <h:outputStylesheet library="css" name="examples.css" />

      <h:form id="form" styleClass="ui-g card" lang="en">
        <h3 class="ui-g-12">An example of navigation in the iframe
          <br />
          <span class="font-size-75"> For more details, refer to
            <a href="https://developer.axonivy.com/documentation/portal-guide/9.3.0-m214/portal-developer-guide/customization/navigate-back.html"
            target="_blank">Portal Doc</a>.
          </span>
        </h3>

        <p:messages styleClass="ui-g-12" />

        <div class="ui-g-12">
          <ul>
            <ui:fragment rendered="#{data.isCreatedAndPersistent}">
            <li>
              <p>
                Click on <a href="#form:cancel-to-home-by-api"><b>Cancel to Home by API</b></a> button to reset this task and navigate to the <b>Homepage</b>.
              </p>
              <blockquote>
                <span class="code-block font-size-75">
                  PortalNavigatorInFrameAPI.resetTaskAndNavigateToUrl(ivy.html.appHomeLink().getAbsoluteEncoded())
                </span>
              </blockquote>
            </li>
            </ui:fragment>
            <ui:fragment rendered="#{not data.isCreatedAndPersistent}">
            <li>
              <p>
                Click on <a href="#form:cancel-to-home"><b>Cancel to Home</b></a> button to reset this task and navigate to the <b>Homepage</b>. This approach works if the task is not in the <b>CREATED</b> state and has not been <b>persisted</b>.
              </p>
              <blockquote>
                <span class="code-block font-size-75">ivy.task.reset();
                  <br />
                  PortalNavigatorInFrameAPI.navigateToUrl(ivy.html.appHomeLink().getAbsoluteEncoded())
                </span>
              </blockquote>
            </li>
            <li>
              <p>
                Click on <a href="#form:cancel-to-endpage"><b>Cancel to Previous</b></a> button to reset this task and navigate
                to the <b>Previous page</b>.
              </p>
              <blockquote>
                <span class="code-block font-size-75">ivy.task.reset();
                  <br />
                  PortalNavigatorInFrameAPI.navigateToPortalEndPage()
                </span>
              </blockquote>
            </li>
            <li>
              <p>
                Click on <a href="#form:cancel-to-specifit"><b>Cancel to a URL</b></a> button to reset this task and navigate
                to <b>Create Investment (IFrame + Task custom fields)</b> example.
              </p>
              <blockquote>
                <span class="code-block font-size-75">ivy.task.reset();
                  <br />
                  PortalNavigatorInFrameAPI.navigateToUrl(String url)
                </span>
              </blockquote>
            </li>
            <li>
              <p>
                Click on <a href="#form:proceed">Proceed</a> button to finish the task.
              </p>
            </li>
            </ui:fragment>
          </ul>
        </div>
        <br />
        <div class="ui-g-12">
          <div class="command-btns">
            <p:commandButton id="cancel-to-home-by-api" value="Cancel to Home by API" actionListener="#{logic.cancelToHomeByAPI}"
              icon="si si-house-1" rendered="#{data.isCreatedAndPersistent}" />
            <p:spacer width="5px" />
            <p:commandButton id="cancel-to-home" value="Cancel to Home" actionListener="#{logic.cancelToHome}"
              icon="si si-house-1" rendered="#{not data.isCreatedAndPersistent}" />
            <p:spacer width="5px" />
            <p:commandButton id="cancel-to-endpage" value="Cancel to Endpage" actionListener="#{logic.cancelToEndpage}"
              icon="si si-arrow-left" rendered="#{not data.isCreatedAndPersistent}" />
            <p:spacer width="5px" />
            <p:commandButton id="cancel-to-specifit" value="Cancel to a URL" actionListener="#{logic.cancelToUrl}"
              icon="si si-hyperlink-3" rendered="#{not data.isCreatedAndPersistent}" />
            <p:spacer width="5px" />
            <p:commandButton id="proceed" actionListener="#{logic.proceed}" value="Proceed" update="form"
              icon="si si-check-double-1" />
          </div>
        </div>
      </h:form>
    </ui:define>
  </ui:composition>
</h:body>

</html>