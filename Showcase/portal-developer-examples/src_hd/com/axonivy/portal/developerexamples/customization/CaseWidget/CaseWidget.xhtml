<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:body>

  <!-- In this HTML dialog, we override task list header, task header, task filter, and task body -->

  <ui:composition template="/layouts/PortalCasesTemplate.xhtml">
    <ui:param name="filterGroupId" value="#{ivy.request.processModel.id}" />

    <ui:param name="useOverrideListHeader" value="true" />
    <ui:param name="useOverrideHeader" value="true" />
    <ui:param name="useOverrideFilter" value="true" />

    <ui:define name="caseListHeader">

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="name-desc-column-header"
        styleClass="case-list-name-desc-header-cell"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/NAME')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="NAME" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="id-column-header" styleClass="TexAlCenter"
        responsiveStyleClass="u-hidden-sm-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/ID')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="ID" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="creator-column-header"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATOR')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="CREATOR" />
        
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="owner-column-header" 
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/OWNER')}" 
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="OWNER" rendered="#{caseBean.isCaseOwnerEnabled()}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="created-date-column-header"
        styleClass="TexAlCenter" responsiveStyleClass="u-hidden-sm-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATION_TIME')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="CREATION_TIME" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="finished-date-column-header"
        styleClass="TexAlCenter" responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/FINISHED_TIME')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="FINISHED_TIME" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="state-column-header"
        styleClass="TexAlCenter" responsiveStyleClass="u-hidden-sm-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/STATE')}"
        dataModel="#{caseView.dataModel}" sortable="true" sortedField="STATE" />

      <!-- New field -->
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="customVarCharField1-column-header"
        styleClass="TexAlCenter customized-case-header-column"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-lg-down"
        value="#{ivy.cms.co('/DefaultColumns/caseList/customVarCharField1')}" sortedField="customVarCharField1"
        sortable="true" dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="customTimestampField1-column-header"
        styleClass="TexAlCenter customized-case-header-column"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-lg-down"
        value="#{ivy.cms.co('/DefaultColumns/caseList/customTimestampField1')}" sortedField="customTimestampField1"
        sortable="true" dataModel="#{caseView.dataModel}" />
    </ui:define>

    <ui:define name="caseHeader">
      <div class="case-header-name-desc-cell u-truncate-text">
        <ic:ch.ivy.addon.portalkit.component.cases.column.CaseName caseNameId="case-header-name-cell"
          caseDescriptionId="description-cell" case="#{case}" dataModel="#{caseView.getDataModel()}" />
      </div>
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseId componentId="case-id-cell" case="#{case}"
        dataModel="#{caseView.getDataModel()}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseCreator componentId="case-creator-cell" case="#{case}"
        dataModel="#{caseView.getDataModel()}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseOwner componentId="case-owner-cell"
        case="#{case}" dataModel="#{caseView.getDataModel()}" rendered="#{caseBean.isCaseOwnerEnabled()}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-creation-date-cell"
        rendered="#{caseView.dataModel.isSelectedColumn('CREATION_TIME')}" value="#{case.startTimestamp}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-expiry-date-cell"
        rendered="#{caseView.dataModel.isSelectedColumn('FINISHED_TIME')}" value="#{case.endTimestamp}"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseState componentId="case-state-cell" case="#{case}"
        dataModel="#{caseView.getDataModel()}" />

      <!-- New field -->
      <h:panelGroup styleClass="customized-case-header-column js-hidden-when-expand-menu u-hidden-lg-down" rendered="#{caseView.dataModel.isSelectedColumn('customVarCharField1')}">
        <h:outputText value="#{case.customFields().stringField('CustomVarCharField1').getOrNull()}"
          styleClass="case-header-default-cell customized-case-header-column" />
      </h:panelGroup>
      <h:panelGroup styleClass="customized-case-header-column js-hidden-when-expand-menu u-hidden-lg-down" rendered="#{caseView.dataModel.isSelectedColumn('customTimestampField1')}">
        <h:outputText value="#{case.customFields().timestampField('CustomTimestampField1').getOrNull()}"
          styleClass="case-header-default-cell">
          <f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" locale="#{localeBean.locale}" />
        </h:outputText>
      </h:panelGroup>
    </ui:define>

    <ui:define name="caseFilter">
      <c:set var="filterContainer" value="#{caseView.dataModel.filterContainer}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseCreationDateFilter
        filter="#{filterContainer.caseCreationDateFilter}" dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseFinishedDateFilter
        filter="#{filterContainer.caseFinishedDateFilter}" dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseDescriptionFilter
        filter="#{filterContainer.caseDescriptionFilter}" dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseStateFilter filter="#{filterContainer.stateFilter}"
        dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseCreatorFilter filter="#{filterContainer.caseCreatorFilter}"
        dataModel="#{caseView.dataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.filter.CaseOwnerFilter filter="#{filterContainer.caseOwnerFilter}"
        dataModel="#{caseView.dataModel}" rendered="#{caseBean.isCaseOwnerEnabled()}" />

      <!-- Add new filter -->
      <ic:ch.ivy.addon.portalkit.component.cases.filter.AdvancedFilter id="customerNameField-case-filter"
        caseFilter="#{filterContainer.customerNameFieldFilter}" dataModel="#{caseView.dataModel}">
        <p:inputText id="customVarCharField1" value="#{filterContainer.customerNameFieldFilter.customerNameField}" />
      </ic:ch.ivy.addon.portalkit.component.cases.filter.AdvancedFilter>
      <ic:ch.ivy.addon.portalkit.component.cases.filter.AdvancedFilter id="shipment-date-case-filter"
        caseFilter="#{filterContainer.shipmentDateFieldFilter}" dismissableOverlayPanel="false"
        dataModel="#{caseView.dataModel}">
        <h:panelGrid columns="3">
          <h:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/filter/from')}"
            for="from-created-calendar" />
          <p:spacer width="5" />
          <p:calendar id="from-created-calendar" value="#{filterContainer.shipmentDateFieldFilter.fromFinishedDate}"
            locale="#{localeBean.locale}" pattern="#{dateTimePatternBean.configuredPattern}" showOn="button"
            converterMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/wrongDateFormat')}" />

          <h:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/filter/to')}"
            for="to-created-calendar" />
          <p:spacer width="5" />
          <p:calendar id="to-created-calendar" value="#{filterContainer.shipmentDateFieldFilter.toFinishedDate}"
            locale="#{localeBean.locale}" pattern="#{dateTimePatternBean.configuredPattern}" showOn="button"
            converterMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/wrongDateFormat')}" />
        </h:panelGrid>
      </ic:ch.ivy.addon.portalkit.component.cases.filter.AdvancedFilter>
    </ui:define>

    <ui:define name="css">
      <h:outputStylesheet library="css" name="examples.css" />
    </ui:define>
  </ui:composition>
</h:body>
</html>