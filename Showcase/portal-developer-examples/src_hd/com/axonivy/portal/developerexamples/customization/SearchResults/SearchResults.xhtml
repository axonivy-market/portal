<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:body>
  <ui:composition template="/layouts/SearchResultsTemplate.xhtml">
    <ui:param name="useTaskOverrideListHeader" value="true" />
    <ui:param name="useTaskOverrideHeader" value="true" />
    <ui:param name="useCaseOverrideListHeader" value="true" />
    <ui:param name="useCaseOverrideHeader" value="true" />
    <c:set var="dataModel" value="#{data.dataModel}" />

    <ui:define name="taskListHeader">
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskListHeader dataModel="#{dataModel.taskDataModel}" />
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
        styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="CustomerName"
        value="#{ivy.cms.co('/DefaultColumns/CustomerName')}" responsiveStyleClass="u-hidden-lg-down" />
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
        styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="ShipmentDate"
        value="#{ivy.cms.co('/DefaultColumns/ShipmentDate')}"
        responsiveStyleClass="u-hidden-lg-down js-hidden-when-expand-menu" />
    </ui:define>

    <ui:define name="taskHeader">
      <!-- Flexbox is applied, so please set your column's width by flex style. The TaskName column takes the remaining width. -->
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskPriority priority="#{task.priority}"
        dataModel="#{dataModel.taskDataModel}" />
      <div class="task-start-info">
        <ic:ch.ivy.addon.portalkit.component.task.column.TaskName task="#{task}" dataModel="#{dataModel.taskDataModel}" />
      </div>
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskResponsible dataModel="#{dataModel.taskDataModel}"
        responsibleName="#{task.getActivatorName()}" responsible="#{task.getActivator()}"/>
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskId value="#{task.getId()}"
        dataModel="#{dataModel.taskDataModel}" />
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="creation-time"
        value="#{task.startTimestamp}" responsiveStyleClass="u-hidden-md-down js-hidden-when-expand-menu"
        rendered="#{dataModel.taskDataModel.isSelectedColumn('CREATION_TIME')}" />
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="expiry-time"
        value="#{task.expiryTimestamp}" rendered="#{dataModel.taskDataModel.isSelectedColumn('EXPIRY_TIME')}" />
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskState state="#{task.state}" />

      <!-- New field -->
      <ic:ch.ivy.addon.portalkit.component.task.column.TaskCustomField id="customer-name-component"
        componentId="customer-name" column="CustomerName" dataModel="#{dataModel.taskDataModel}"
        responsiveStyleClass="u-hidden-lg-down"
        labelValue="#{task.customFields().stringField('CustomerName').getOrNull()}" />
      <h:outputText id="shipment-date"
        styleClass="TexAlCenter custom-datetime u-hidden-lg-down js-hidden-when-expand-menu"
        value="#{task.customFields().timestampField('ShipmentDate').getOrNull()}"
        rendered="#{dataModel.taskDataModel.isSelectedColumn('ShipmentDate')}">
        <f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" locale="#{localeBean.locale}"/>
      </h:outputText>
    </ui:define>

    <ui:define name="caseListHeader">
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="name-desc-column-header"
        styleClass="case-list-name-desc-header-cell" sortedField="NAME" sortable="true"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/NAME')}"
        dataModel="#{dataModel.caseDataModel}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="id-column-header" styleClass="TexAlCenter"
        responsiveStyleClass="u-hidden-sm-down" sortedField="ID" sortable="true"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/ID')}"
        dataModel="#{dataModel.caseDataModel}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="creator-column-header"
        sortedField="CREATOR" sortable="true" responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATOR')}"
        dataModel="#{dataModel.caseDataModel}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="created-date-column-header"
        componentToBeUpdated="" sortedField="CREATION_TIME" styleClass="TexAlCenter"
        responsiveStyleClass="u-hidden-sm-down" sortable="true"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATION_TIME')}"
        dataModel="#{dataModel.caseDataModel}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="mofified-date-column-header"
        componentToBeUpdated="" sortedField="FINISHED_TIME" styleClass="TexAlCenter"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down" sortable="true"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/FINISHED_TIME')}"
        dataModel="#{dataModel.caseDataModel}" />

      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="state-column-header"
        styleClass="TexAlCenter" sortedField="STATE" responsiveStyleClass="u-hidden-sm-down" sortable="true"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/STATE')}"
        dataModel="#{dataModel.caseDataModel}" />

      <!-- New field -->
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader
        id="customVarCharField1-column-case-list-header" styleClass="TexAlCenter customized-case-header-column"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-lg-down" sortedField="customVarCharField1"
        sortable="true" value="#{ivy.cms.co('/DefaultColumns/caseList/customVarCharField1')}"
        dataModel="#{dataModel.caseDataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader
        id="ShipmentDate-column-case-list-header" styleClass="TexAlCenter customized-case-header-column"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-lg-down" sortedField="ShipmentDate"
        sortable="true" value="#{ivy.cms.co('/DefaultColumns/caseList/ShipmentDate')}"
        dataModel="#{dataModel.caseDataModel}" />
    </ui:define>

    <ui:define name="caseHeader">
      <div class="case-header-name-desc-cell u-truncate-text">
        <ic:ch.ivy.addon.portalkit.component.cases.column.CaseName case="#{case}" caseNameId="case-header-name-cell"
          caseDescriptionId="description-cell" dataModel="#{dataModel.caseDataModel}" />
      </div>
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseId componentId="case-id-cell" case="#{case}"
        dataModel="#{dataModel.caseDataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseCreator componentId="case-creator-cell" case="#{case}"
        dataModel="#{dataModel.caseDataModel}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-creation-date-cell"
        rendered="#{dataModel.caseDataModel.isSelectedColumn('CREATION_TIME')}" value="#{case.startTimestamp}" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-expiry-date-cell"
        rendered="#{dataModel.caseDataModel.isSelectedColumn('FINISHED_TIME')}" value="#{case.endTimestamp}"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-md-down" />
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseState componentId="case-state-cell" case="#{case}"
        dataModel="#{dataModel.caseDataModel}" />

      <!-- New field -->
      <ic:ch.ivy.addon.portalkit.component.cases.column.CaseCustomField id="case-customer-name-component"
        panelGroupId="customVarCharField1-column-case-header-panel"
        responsiveStyleClass="js-hidden-when-expand-menu u-hidden-lg-down"
        componentId="customVarCharField1-column-case-header-text" column="customVarCharField1"
        dataModel="#{dataModel.caseDataModel}"
        labelValue="#{case.customFields().stringField('CustomerName').getOrNull()}" />
      <h:outputText value="#{case.customFields().timestampField('ShipmentDate').getOrNull()}"
        styleClass="TexAlCenter case-header-end-time-cell customized-case-header-column  js-hidden-when-expand-menu u-hidden-lg-down"
        rendered="#{dataModel.caseDataModel.isSelectedColumn('ShipmentDate')}">
        <f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" locale="#{localeBean.locale}"/>
      </h:outputText>
    </ui:define>

    <ui:define name="custom-search">
      <p:tab title="Employees">
        <p:dataTable id="employee-table" value="#{data.dataModel.employees}" var="emp" sortBy="#{emp.firstName}" lazy="false">
          <p:column headerText="First Name" sortBy="#{emp.firstName}" filterBy="#{emp.firstName}">
            <h:outputText value="#{emp.firstName}" />
          </p:column>
          <p:column headerText="Last Name" sortBy="#{emp.lastName}" filterBy="#{emp.lastName}">
            <h:outputText value="#{emp.lastName}" />
          </p:column>
          <p:column headerText="Country" sortBy="#{emp.country}" filterBy="#{emp.country}">
            <h:outputText value="#{emp.country}" />
          </p:column>
        </p:dataTable>
      </p:tab>
    </ui:define>

    <ui:define name="css">
      <h:outputStylesheet library="css" name="examples.css" />
    </ui:define>
  </ui:composition>
</h:body>
</html>