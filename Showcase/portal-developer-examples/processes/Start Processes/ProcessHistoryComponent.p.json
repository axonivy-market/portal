{
  "format" : "9.4.14",
  "id" : "1624C1C79661758C",
  "data" : "com.axonivy.portal.developerexamples.component.ProcessHistoryComponentData",
  "elements" : [ {
      "id" : "f0",
      "type" : "RequestStart",
      "name" : "viewProcessHistoryOfAlphaCompany.ivp",
      "config" : {
        "callSignature" : "viewProcessHistoryOfAlphaCompany",
        "case" : {
          "customFields" : [
            { "name" : "embedInFrame", "type" : "String", "value" : "\"false\"" }
          ]
        },
        "outLink" : "viewProcessHistoryOfAlphaCompany.ivp",
        "task" : {
          "customFields" : [
            { "name" : "embedInFrame", "type" : "String", "value" : "\"false\"" }
          ]
        },
        "startName" : "View Process History of Alpha Company in new page"
      },
      "visual" : {
        "at" : { "x" : 232, "y" : 608 }
      },
      "connect" : { "id" : "f10", "to" : "S31" }
    }, {
      "id" : "f1",
      "type" : "TaskEnd",
      "visual" : {
        "at" : { "x" : 704, "y" : 608 }
      }
    }, {
      "id" : "f6",
      "type" : "RequestStart",
      "name" : "createAlphaCompany.ivp",
      "config" : {
        "callSignature" : "createAlphaCompany",
        "case" : {
          "name" : "Start process",
          "description" : "Start create Alpha company",
          "category" : "Open_Alpha_Company"
        },
        "outLink" : "createAlphaCompany.ivp",
        "startName" : "Create Alpha Company"
      },
      "visual" : {
        "at" : { "x" : 232, "y" : 169 }
      },
      "connect" : { "id" : "f35", "to" : "S11" }
    }, {
      "id" : "f8",
      "type" : "TaskEnd",
      "visual" : {
        "at" : { "x" : 704, "y" : 168 }
      }
    }, {
      "id" : "f12",
      "type" : "TaskEnd",
      "visual" : {
        "at" : { "x" : 704, "y" : 464 }
      }
    }, {
      "id" : "f14",
      "type" : "RequestStart",
      "name" : "viewProcessHistoryOfAlphaCompanyInDialog.ivp",
      "config" : {
        "callSignature" : "viewProcessHistoryOfAlphaCompanyInDialog",
        "case" : {
          "customFields" : [
            { "name" : "embedInFrame", "type" : "String", "value" : "\"false\"" }
          ]
        },
        "outLink" : "viewProcessHistoryOfAlphaCompanyInDialog.ivp",
        "task" : {
          "customFields" : [
            { "name" : "embedInFrame", "type" : "String", "value" : "\"false\"" }
          ]
        },
        "startName" : "View Process history of beta company in dialog"
      },
      "visual" : {
        "at" : { "x" : 232, "y" : 464 },
        "labelOffset" : { "x" : -108, "y" : 17 }
      },
      "connect" : { "id" : "f7", "to" : "S21" }
    }, {
      "id" : "f33",
      "type" : "ProcessAnnotation",
      "name" : [
        "In this example, we create case for Alpha Company, then create a new page to view the process history of Alpha Company",
        "",
        "HOW TO RUN THIS EXAMPLE:",
        "1. Run createAlphaCompany.ivp process",
        "2. Enter viewProcessHistoryOfAlphaCompany.ivp process, process history of Alpha Company will be shown",
        "3. Run viewProcessHistoryOfAlphaCompanyInDialog.ivp process, then click \"Open history dialog\" button. Process history of Alpha company will be shown"
      ],
      "visual" : {
        "at" : { "x" : 1248, "y" : 160 },
        "size" : { "width" : 848, "height" : 184 },
        "description" : [
          "In this example, we create case for Alpha Company, then create a new page to view the process history of Alpha Company",
          "",
          "HOW TO RUN THIS EXAMPLE:",
          "1. Run createAlphaCompany.ivp process",
          "2. Enter viewProcessHistoryOfAlphaCompany.ivp process, process history of Alpha Company will be shown",
          "3. Run viewProcessHistoryOfAlphaCompanyInDialog.ivp process, then click \"Open history dialog\" button. Process history of Alpha company will be shown"
        ]
      }
    }, {
      "id" : "S11",
      "type" : "EmbeddedProcess",
      "name" : "Create Alpha company",
      "elements" : [ {
          "id" : "S11-f19",
          "type" : "Script",
          "name" : [
            "Set process",
            "code name"
          ],
          "config" : {
            "security" : "system",
            "output" : {
              "code" : "ivy.case.setCategoryPath(\"Alpha Company\");"
            }
          },
          "visual" : {
            "at" : { "x" : 408, "y" : 224 }
          },
          "connect" : { "id" : "S11-f4", "to" : "S11-f5" }
        }, {
          "id" : "S11-f5",
          "type" : "SubProcessCall",
          "name" : "SetBusinessEntityId",
          "config" : {
            "processCall" : "Functional Processes/SetBusinessEntityId:call(String)",
            "call" : {
              "params" : [
                { "name" : "businessEntityId", "type" : "String" }
              ],
              "map" : {
                "param.businessEntityId" : "\"alpha\""
              }
            }
          },
          "visual" : {
            "at" : { "x" : 576, "y" : 224 },
            "size" : { "width" : 128, "height" : 44 }
          },
          "connect" : { "id" : "S11-f20", "to" : "S11-f7" }
        }, {
          "id" : "S11-g0",
          "type" : "EmbeddedStart",
          "name" : "in 1",
          "visual" : {
            "at" : { "x" : 96, "y" : 224 },
            "labelOffset" : { "x" : -53, "y" : 5 }
          },
          "parentConnector" : "f35",
          "connect" : { "id" : "S11-f11", "to" : "S11-f10" }
        }, {
          "id" : "S11-g1",
          "type" : "EmbeddedEnd",
          "name" : "out 1",
          "visual" : {
            "at" : { "x" : 1344, "y" : 224 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f5"
        }, {
          "id" : "S11-f6",
          "type" : "TriggerCall",
          "config" : {
            "processCall" : "Start Processes/ProcessHistoryComponent:startCreateNewCase(String)",
            "call" : {
              "params" : [
                { "name" : "caseStructureInfo", "type" : "String" }
              ],
              "map" : {
                "param.caseStructureInfo" : "in.caseStructureInfo"
              }
            }
          },
          "visual" : {
            "at" : { "x" : 920, "y" : 224 },
            "size" : { "width" : 56, "height" : 48 }
          },
          "connect" : { "id" : "S11-f9", "to" : "S11-f13" }
        }, {
          "id" : "S11-f10",
          "type" : "Script",
          "name" : "Prepare case name",
          "config" : {
            "output" : {
              "code" : [
                "",
                "List<String> casenameList = ivy.cms.co(\"/Dialogs/com.axonivy.portal.developerexamples/AlphaCompany/CaseName\").split(\";\");",
                "",
                "for (String caseStructureInfo : casenameList) {",
                "  in.caseNames.add(caseStructureInfo);",
                "}",
                "",
                "in.currentIndex = 0;"
              ]
            }
          },
          "visual" : {
            "at" : { "x" : 224, "y" : 224 },
            "size" : { "width" : 128, "height" : 44 }
          },
          "connect" : { "id" : "S11-f12", "to" : "S11-f19" }
        }, {
          "id" : "S11-f7",
          "type" : "Script",
          "name" : "Get next case name",
          "config" : {
            "output" : {
              "code" : [
                "",
                "in.caseStructureInfo = in.caseNames.get(in.currentIndex);",
                "in.currentIndex++;"
              ]
            }
          },
          "visual" : {
            "at" : { "x" : 768, "y" : 224 },
            "size" : { "width" : 128, "height" : 44 }
          },
          "connect" : { "id" : "S11-f16", "to" : "S11-f6" }
        }, {
          "id" : "S11-f13",
          "type" : "Script",
          "name" : "Thread.sleep(10);",
          "config" : {
            "output" : {
              "code" : "Thread.sleep(10);"
            }
          },
          "visual" : {
            "at" : { "x" : 1080, "y" : 224 }
          },
          "connect" : { "id" : "S11-f22", "to" : "S11-f21" }
        }, {
          "id" : "S11-f21",
          "type" : "Alternative",
          "visual" : {
            "at" : { "x" : 1216, "y" : 224 }
          },
          "connect" : [
            { "id" : "S11-f27", "to" : "S11-f7", "via" : [ { "x" : 1216, "y" : 320 }, { "x" : 768, "y" : 320 } ], "label" : {
                "name" : "call trigger",
                "segment" : 1.52,
                "offset" : { "x" : 0, "y" : -14 }
              }, "condition" : "in.currentIndex < in.caseNames.size()" },
            { "id" : "S11-f23", "to" : "S11-g1" }
          ]
        } ],
      "visual" : {
        "at" : { "x" : 480, "y" : 168 },
        "size" : { "width" : 128, "height" : 44 }
      },
      "connect" : { "id" : "f5", "to" : "f8" }
    }, {
      "id" : "S21",
      "type" : "EmbeddedProcess",
      "name" : "View in Dialog",
      "elements" : [ {
          "id" : "S21-f13",
          "type" : "DialogCall",
          "name" : "Alpha Company Process History in Dialog",
          "config" : {
            "dialogId" : "com.axonivy.portal.developerexamples.customization.ProcessHistoryDialogComponent",
            "startMethod" : "start()"
          },
          "visual" : {
            "at" : { "x" : 360, "y" : 160 },
            "size" : { "width" : 240, "height" : 44 }
          },
          "connect" : { "id" : "S21-f1", "to" : "S21-g1" }
        }, {
          "id" : "S21-g0",
          "type" : "EmbeddedStart",
          "name" : "in 1",
          "visual" : {
            "at" : { "x" : 64, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f7",
          "connect" : { "id" : "S21-f0", "to" : "S21-f13" }
        }, {
          "id" : "S21-g1",
          "type" : "EmbeddedEnd",
          "name" : "out 1",
          "visual" : {
            "at" : { "x" : 640, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f9"
        } ],
      "visual" : {
        "at" : { "x" : 472, "y" : 464 }
      },
      "connect" : { "id" : "f9", "to" : "f12" }
    }, {
      "id" : "S31",
      "type" : "EmbeddedProcess",
      "name" : "View in new page",
      "elements" : [ {
          "id" : "S31-f3",
          "type" : "DialogCall",
          "name" : "Alpha Company Process History",
          "config" : {
            "dialogId" : "com.axonivy.portal.developerexamples.customization.ProcessHistoryComponent",
            "startMethod" : "start()"
          },
          "visual" : {
            "at" : { "x" : 320, "y" : 160 },
            "size" : { "width" : 192, "height" : 44 }
          },
          "connect" : { "id" : "S31-f1", "to" : "S31-g1" }
        }, {
          "id" : "S31-g0",
          "type" : "EmbeddedStart",
          "name" : "in 1",
          "visual" : {
            "at" : { "x" : 64, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f10",
          "connect" : { "id" : "S31-f0", "to" : "S31-f3" }
        }, {
          "id" : "S31-g1",
          "type" : "EmbeddedEnd",
          "name" : "out 1",
          "visual" : {
            "at" : { "x" : 560, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f11"
        } ],
      "visual" : {
        "at" : { "x" : 472, "y" : 608 }
      },
      "connect" : { "id" : "f11", "to" : "f1" }
    }, {
      "id" : "f2",
      "type" : "TaskEnd",
      "visual" : {
        "at" : { "x" : 704, "y" : 288 }
      }
    }, {
      "id" : "f3",
      "type" : "RequestStart",
      "name" : "startCreateNewCase.ivp",
      "config" : {
        "callSignature" : "startCreateNewCase",
        "input" : {
          "params" : [
            { "name" : "caseStructureInfo", "type" : "String" }
          ],
          "map" : {
            "out.caseStructureInfo" : "param.caseStructureInfo"
          }
        },
        "case" : {
          "name" : "<%=param.caseStructureInfo.split(\"/\").get(0) %>",
          "description" : "<%=param.caseStructureInfo.split(\"/\").get(1) %>",
          "attachToBusinessCase" : false
        },
        "outLink" : "startCreateNewCase.ivp",
        "task" : {
          "responsible" : {
            "role" : "SYSTEM"
          }
        },
        "triggerEnabled" : true,
        "requestEnabled" : false
      },
      "visual" : {
        "at" : { "x" : 232, "y" : 288 },
        "labelOffset" : { "x" : -21, "y" : 17 }
      },
      "connect" : { "id" : "f16", "to" : "S41" }
    }, {
      "id" : "S41",
      "type" : "EmbeddedProcess",
      "name" : "Set Business Entity",
      "elements" : [ {
          "id" : "S41-f17",
          "type" : "SubProcessCall",
          "name" : "SetBusinessEntityId",
          "config" : {
            "processCall" : "Functional Processes/SetBusinessEntityId:call(String)",
            "call" : {
              "params" : [
                { "name" : "businessEntityId", "type" : "String" }
              ],
              "map" : {
                "param.businessEntityId" : "\"alpha\""
              }
            }
          },
          "visual" : {
            "at" : { "x" : 400, "y" : 160 },
            "size" : { "width" : 128, "height" : 44 }
          },
          "connect" : { "id" : "S41-f1", "to" : "S41-g1" }
        }, {
          "id" : "S41-f15",
          "type" : "Script",
          "name" : [
            "Set process",
            "code name"
          ],
          "config" : {
            "security" : "system",
            "output" : {
              "code" : "ivy.case.setCategoryPath(\"Alpha Company\");"
            }
          },
          "visual" : {
            "at" : { "x" : 192, "y" : 160 }
          },
          "connect" : { "id" : "S41-f18", "to" : "S41-f17" }
        }, {
          "id" : "S41-g0",
          "type" : "EmbeddedStart",
          "name" : "in 1",
          "visual" : {
            "at" : { "x" : 64, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f16",
          "connect" : { "id" : "S41-f0", "to" : "S41-f15" }
        }, {
          "id" : "S41-g1",
          "type" : "EmbeddedEnd",
          "name" : "out 1",
          "visual" : {
            "at" : { "x" : 544, "y" : 160 },
            "labelOffset" : { "x" : 0, "y" : 5 }
          },
          "parentConnector" : "f19"
        } ],
      "visual" : {
        "at" : { "x" : 472, "y" : 288 }
      },
      "connect" : { "id" : "f19", "to" : "f2" }
    } ],
  "layout" : {
    "lanes" : [ {
        "name" : "Create Alpha company",
        "offset" : 32,
        "size" : 336,
        "lanes" : [ ]
      }, {
        "name" : "View Processhistory",
        "size" : 384,
        "lanes" : [ ]
      } ]
  }
}