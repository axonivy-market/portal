<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
		<ui:composition template="/layouts/TaskTemplate.xhtml">
		<ui:define name="title">Request</ui:define>
		<ui:param name="caseId" value="#{data.gdprRequest.caseId}" />
		<ui:param name="task" value="#{ivy.task}" />
		<ui:param name="actualStepIndex"
			value="#{data.gdprRequest.processState.stepForProcessChain}" />
		<ui:param name="steps"
			value="#{data.gdprRequest.processState.listForProcessChain}" />
		<div>
        <div class="Fleft Wid100 Fs14 MarTop10">
          <ui:define name="taskName">
            <span class=" fa fa-check-square-o task-template-title-icon"></span>
            <h:outputText styleClass="task-template-title" id="title" title="#{task.name}" value="#{task.name}" />
          </ui:define>
        </div>
        <div class="Fright Wid70 MarBot20" >
          <ui:define name="process_chain_area">
            <ic:ch.ivy.addon.portalkit.singleapp.process.ProcessChain startMethod="start" componentId="process-chain-component-id" shape="LINE" direction="HORIZONTAL" isShowAllSteps="false"
              actualStepIndex="#{actualStepIndex}" steps="#{steps}" 
              currentIndex="#{taskTemplateBean.getIndexOfCurrentStage(caseId)}" stages="#{taskTemplateBean.getStagesBaseOnCurrentStage(caseId)}" />
          </ui:define>
        </div>
      </div>
		<ui:define name="taskForm">
		

			<h:form id="form">
				<p:growl id="growl">
					<p:autoUpdate />
				</p:growl>
				<div class="ui-fluid">
				<div  class="fitDivToFieldset marginTop10px">
					<div class="ui-g" >
						<div class="ui-g-12 ui-md-6 ui-lg-2" >
							<p:outputLabel id="caseIdLabel" styleClass=""
								value="#{ivy.cms.co('/Labels/caseId')}" />
						</div>

						<div class="ui-g-12 ui-md-6 ui-lg-3" >
							<p:outputLabel id="caseIdValue" value="#{caseId}"  />
						</div>
						<div class="ui-g-12 ui-md-12 ui-lg-1" ></div>
						<div class="ui-g-12 ui-md-6 ui-lg-2" >
							<p:outputLabel id="dateLabel" styleClass="" 
								value="#{ivy.cms.co('/Labels/date')}" />
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-3" >
							<p:outputLabel id="dateValue" value="12.11.2018 15:00" >
								<f:convertDateTime pattern="dd.MM.yyyy HH:mm" />
							</p:outputLabel>
						</div>
						<div class="ui-g-12 ui-md-12 ui-lg-1" ></div>
					</div>
				</div>
				<br/>
				<p:fieldset id="personalDataFieldset" toggleable="true"
					styleClass="fitFieldsetToDiv" 
					legend="#{ivy.cms.co('/Labels/personalData')}">

						<div class="ui-g">
							<div class="ui-g-12 ui-md-6 ui-lg-2" >
								<p:outputLabel id="nameLabel" for="nameValue"
									value="#{ivy.cms.co('/Labels/firstName')}" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3" >
								<p:inputText id="nameValue" required="true"
									value="#{data.gdprRequest.name}" />
							</div>

							<div class="ui-g-12 ui-md-12 ui-lg-1" ></div>
							<div class="ui-g-12 ui-md-6 ui-lg-2" >
								<p:outputLabel id="surnameLabel" for="surnameValue"
									value="#{ivy.cms.co('/Labels/surName')}" />
							</div>

							<div class="ui-g-12 ui-md-6 ui-lg-3" >
								<p:inputText id="surnameValue" required="true"
									value="#{data.gdprRequest.surname}" />
							</div>
							<div class="ui-g-12 ui-md-12 ui-lg-1" ></div>
						</div>

						<div class="ui-g">
							<div class="ui-g-12 ui-md-6 ui-lg-2">
								<p:outputLabel id="addressLabel" for="addressValue"
									value="#{ivy.cms.co('/Labels/address')}" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:inputText id="addressValue" required="true"
									value="#{data.gdprRequest.address}" />
							</div>
							<div class="ui-g-12 ui-md-12 ui-lg-1">
								<p:spacer />
							</div>
						
							<div class="ui-g-12 ui-md-6 ui-lg-2">
								<p:outputLabel id="cityLabel" for="cityValue"
									value=" #{ivy.cms.co('/Labels/zip')}#{ivy.cms.co('/Labels/city')}" />
							</div>
							<div class="ui-g-12 ui-md-2 ui-lg-1">
							<p:inputNumber id="zipValue" required="true" decimalPlaces="0"
									decimalSeparator="" thousandSeparator=""
									value="#{data.gdprRequest.zip}" />
								
							</div>
							<div class="ui-g-12 ui-md-4 ui-lg-2">
								<p:inputText id="cityValue" required="true"
									value="#{data.gdprRequest.city}" />
							</div>
						</div>



						<div class="ui-g">
							<div class="ui-g-12 ui-md-6 ui-lg-2">
								<p:outputLabel id="phoneNumberLabel"
									value="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/phoneNumber')}#{ivy.cms.co('/Labels/phoneNumber')}" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:inputText id="phoneNumberValue"
									value="#{data.gdprRequest.phoneNumber}" />
							</div>
							<div class="ui-g-12 ui-md-12 ui-lg-1">
								<p:spacer />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-2">
								<p:outputLabel id="identification" for="emailValue"
									value="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/identification')}#{ivy.cms.co('/Labels/email')}" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:inputText id="emailValue" required="true"
									value="#{data.gdprRequest.emailAddress}" />
							</div>
							
							<div class="ui-g-12 ui-md-12 ui-lg-1">
								<p:spacer />
							</div>
						</div>

						<div class="ui-g">
							<div class="ui-g-12 ui-md-6 ui-lg-2">
								<p:outputLabel id="identificationNumberLabel"
									for="identificationNumberValue"
									value="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/identificationNumer')}#{ivy.cms.co('/Labels/id')}" />
							</div>
							<div class="ui-g-12 ui-md-6 ui-lg-3">
								<p:inputText id="identificationNumberValue" required="false"
									value="#{data.gdprRequest.identificationNumer}" />
							</div>
						</div>

				</p:fieldset>

				<br/>
				<p:fieldset id="requestFieldset"
					legend="#{ivy.cms.co('/Labels/request')}"
					styleClass="fitFieldsetToDiv" toggleable="true">
					<div class="ui-g">
						<div class="ui-g-12 ui-md-6 ui-lg-2">
							<p:outputLabel id="requestTypeLabel"
								value="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/requestType')}#{ivy.cms.co('/Labels/requestType')}"
								for="requestTypeValue" />
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-3">
							<p:selectOneMenu id="requestTypeValue" required="true">
								<f:selectItem itemLabel="Select One" itemValue="#{null}" />
								<f:selectItem itemLabel="Antrag 1" itemValue="Xbox One" />
								<f:selectItem itemLabel="Antrag 2" itemValue="PS4" />
								<f:selectItem itemLabel="Antrag 3" itemValue="Wii U" />
							</p:selectOneMenu>
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-1">
							<p:spacer />
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-2">
							<p:spacer />
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-3">
							<p:spacer />
						</div>
					</div>
					<div class="ui-g">
						<div class="ui-g-12 ui-md-6 ui-lg-2">
							<p:outputLabel id="reasonLabel"
								value="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/reason')}#{ivy.cms.co('/Labels/reason')}" />
						</div>

						<div class="ui-g-12 ui-md-6 ui-lg-9">
							<p:inputTextarea id="reasonValue"
								value="#{data.gdprRequest.requestReason}" maxlength="2600"
								styleClass="" />
						</div>
						<div class="ui-g-12 ui-md-6 ui-lg-1">
							<p:spacer />
						</div>
					</div>
					<p:outputPanel>
						<p:selectOneRadio id="city2" value="#{radioView.city2}"
							layout="responsive" columns="3">
							<f:selectItems value="#{radioView.cities}" var="c"
								itemLabel="#{city}" itemValue="#{city}" />
						</p:selectOneRadio>
					</p:outputPanel>
					
				</p:fieldset>
				

					<p:panelGrid id="pdfFileGrid"
						styleClass="ui-panelgrid-blank MarTop20">
						<p:row>
							<p:column>
								<p:dataTable id="fileTable" value="#{data.gdprRequest.files}"
									var="file" scrollable="false" selectionMode="single"
									rowKey="#{file.file.name}" selection="#{data.selectedGdprFile}"
									styleClass="pdfFilesTable">
									<p:ajax event="rowSelect" listener="#{logic.selectPeriod}"
										update="#{p:component('pdfFileGrid')}" />
									<p:column
										headerText="#{ivy.cms.co('/Labels/tableName')}"
										sortBy="#{file.file.name}" style="width:80%">
										<h:outputText value="#{file.file.name}"
											title="#{file.file.name}" />
									</p:column>
									<p:column
										headerText="#{ivy.cms.co('/Labels/tableDownload')}"
										style="text-align:center;width:10%px">
										<p:commandButton id="showFileButton" ajax="false"
											actionListener="#{logic.show(file)}"
											onclick="PrimeFaces.monitorDownload(start, stop);"
											icon="fa fa-download"
											title="#{ivy.cms.co('/Dialogs/GdprRequest/Labels/tableDownload')}"
											style="background-color: Transparent; border: none"
											immediate="true">
											<p:fileDownload value="#{data.streamedContent}"
												style="text-align:center;" />
										</p:commandButton>
									</p:column>
									<p:column
										headerText=""
										style="width:10">
										<p:commandButton actionListener="#{logic.delete(file)}"
											title="#{ivy.cms.co('/Labels/delete')}"
											update="#{p:component('fileTable')} #{p:component('pdfFileGrid')} form"
											icon="fa fa-trash" immediate="true"
											disabled="#{!file.isNewAdded}"
											style="background-color: Transparent; border: none" />
									</p:column>
								</p:dataTable>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:fileUpload multiple="true" mode="advanced" 
									fileUploadListener="#{logic.handleFileUploader}"
									update="fileTable" dragDropSupport="true" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<pe:documentViewer id="documentViewer" height="500" width="1000"
									url="#{data.pdfFilenameUrl}"
									rendered="#{data.renderPdfVeiwer and !data.isStrongboxProcess}" />
							</p:column>
						</p:row>
					</p:panelGrid>

					<br />
					<br />
				</div>
				<!-- 	<p:commandButton value="Submit" ajax="false"
						action="#{fileUploadView.upload}" disabled="true" /> -->
 				<p:toolbar >
					<f:facet name="right">
							<p:commandButton
							value="#{ivy.cms.co('/Labels/proceed')}"
							actionListener="#{logic.proceed}" update="form" />
							<p:commandButton
							value="#{ivy.cms.co('/Labels/cancel')}"
							actionListener="#{logic.cancel}" immediate="true" />
							
					
					</f:facet>
				</p:toolbar>
			</h:form>
			
		</ui:define>
	</ui:composition>
</h:body>
</html>