<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions" xmlns:pm="http://primefaces.org/mobile"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:body>
	<ui:composition template="/layouts/SearchResultsTemplate.xhtml">
		<ui:param name="useTaskOverrideListHeader" value="true" />
		<ui:param name="useTaskOverrideHeader" value="true" />
		<c:set var="dataModel" value="#{data.dataModel}" />

		<ui:define name="taskListHeader">
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskListHeader dataModel="#{dataModel.taskDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
				styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="customVarcharField5"
				value="#{ivy.cms.co('/DefaultColumns/customVarcharField5')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
				styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="customTimestampField1"
				value="#{ivy.cms.co('/DefaultColumns/customTimestampField1')}" />
		</ui:define>

		<ui:define name="taskHeader">
			<!-- Flexbox is applied, so please set your column's width by flex style. The TaskName column takes the remaining width. -->
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskPriority priority="#{task.priority}"
				dataModel="#{dataModel.taskDataModel}" />
			<div class="task-start-info">
				<ic:ch.ivy.addon.portalkit.component.task.column.TaskName task="#{task}" dataModel="#{dataModel.taskDataModel}"
					isSelected="#{taskView.remoteTaskId eq task.id and dataModel.serverId eq task.getApplicationRegister().serverId}" />
			</div>
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskResponsible userName="#{task.activatorUserName}"
				fullName="#{task.activatorFullName}" styleClass="hidden-sm" dataModel="#{dataModel.taskDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskId value="#{task.id}" dataModel="#{dataModel.taskDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="creation-time" value="#{task.startTimestamp}"
				styleClass="#{dataModel.taskDataModel.isAutoHideColumns()?'js-create-cell':''}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('CREATION_TIME')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="expiry-time" value="#{task.expiryTimestamp}"
				styleClass="#{dataModel.taskDataModel.isAutoHideColumns()?'js-expiry-cell':''}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('EXPIRY_TIME')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskState state="#{task.state}" />

			<!-- New field -->
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskCustomField id="customer-name-component"
				componentId="customer-name" column="customVarCharField5" dataModel="#{dataModel.taskDataModel}"
				labelValue="#{task.customVarCharField5}" />
			<h:outputText id="shipment-date" styleClass="TexAlCenter custom-datetime" value="#{task.customTimestampField1}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('customTimestampField1')}">
				<f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" />
			</h:outputText>
		</ui:define>

		<ui:define name="custom-search">
			<p:tab title="Employees">
				<p:dataTable id="employee-table" value="#{data.dataModel.employees}" var="emp" sortBy="#{emp.firstName}">
					<p:column headerText="First Name" sortBy="#{emp.firstName}" filterBy="#{emp.firstName}">
						<h:outputText value="#{emp.firstName}" />
					</p:column>
					<p:column headerText="Last Name" sortBy="#{emp.lastName}" filterBy="#{emp.lastName}">
						<h:outputText value="#{emp.lastName}" />
					</p:column>
					<p:column headerText="Country" sortBy="#{emp.country}" filterBy="#{emp.country}">
						<h:outputText value="#{emp.country}" />
					</p:column>
					<p:column headerText="Details" style="text-align: center">
						<p:commandLink id="detail-action" actionListener="#{logic.openDetails(emp)}" process="@this"
							title="#{ivy.cms.co('/Labels/Details')}">
							<i class="fa fa-search fa-lg" />
						</p:commandLink>
					</p:column>
				</p:dataTable>
			</p:tab>
		</ui:define>

		<ui:define name="css">
			<h:outputStylesheet library="css" name="examples.css" />
		</ui:define>
	</ui:composition>
</h:body>
</html>