<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<h:body>
	<ui:composition template="/layouts/SearchResultsTemplate.xhtml">
		<ui:param name="useTaskOverrideListHeader" value="true" />
		<ui:param name="useTaskOverrideHeader" value="true" />
		<ui:param name="useCaseOverrideListHeader" value="true" />
		<ui:param name="useCaseOverrideHeader" value="true" />
		<c:set var="dataModel" value="#{data.dataModel}" />

		<ui:define name="taskListHeader">
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskListHeader dataModel="#{dataModel.taskDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
				styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="customVarcharField5"
				value="#{ivy.cms.co('/DefaultColumns/customVarcharField5')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskColumnHeader dataModel="#{dataModel.taskDataModel}"
				styleClass="state-column-header TexAlCenter" componentId="task-custom" sortField="customTimestampField1"
				value="#{ivy.cms.co('/DefaultColumns/customTimestampField1')}" />
		</ui:define>

		<ui:define name="taskHeader">
			<!-- Flexbox is applied, so please set your column's width by flex style. The TaskName column takes the remaining width. -->
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskPriority priority="#{task.priority}"
				dataModel="#{dataModel.taskDataModel}" />
			<div class="task-start-info">
				<ic:ch.ivy.addon.portalkit.component.task.column.TaskName task="#{task}" dataModel="#{dataModel.taskDataModel}" />
			</div>
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskResponsible dataModel="#{dataModel.taskDataModel}" userName="#{task.getActivatorName()}"
                    fullName="#{task.getActivator().getDisplayName()}"
                    styleClass="activatior-column #{dataModel.taskDataModel.isAutoHideColumns()? 'hidden-sm':''}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskId value="#{task.getId()}" dataModel="#{dataModel.taskDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="creation-time" value="#{task.startTimestamp}"
				styleClass="#{dataModel.taskDataModel.isAutoHideColumns()?'js-create-cell':''}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('CREATION_TIME')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskDate componentId="expiry-time" value="#{task.expiryTimestamp}"
				styleClass="#{dataModel.taskDataModel.isAutoHideColumns()?'js-expiry-cell':''}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('EXPIRY_TIME')}" />
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskState state="#{task.state}" />

			<!-- New field -->
			<ic:ch.ivy.addon.portalkit.component.task.column.TaskCustomField id="customer-name-component"
				componentId="customer-name" column="customVarCharField5" dataModel="#{dataModel.taskDataModel}"
				labelValue="#{task.customFields().stringField('CustomVarCharField5').getOrNull()}" />
			<h:outputText id="shipment-date" styleClass="TexAlCenter custom-datetime" value="#{task.customFields().timestampField('CustomTimestampField1').getOrNull()}"
				rendered="#{dataModel.taskDataModel.isSelectedColumn('customTimestampField1')}">
				<f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" />
			</h:outputText>
		</ui:define>
		
		<ui:define name="caseListHeader">
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="name-desc-column-header" styleClass="case-list-header-cell case-list-name-desc-header-cell" componentToBeUpdated=""
				sortedField="NAME" sortable="true" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/NAME')}" dataModel="#{dataModel.caseDataModel}" />

			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="id-column-header" styleClass="TexAlCenter case-list-header-cell #{dataModel.caseDataModel.isAutoHideColumns()?'js-id-column-header':''}" 
				componentToBeUpdated="" sortedField="ID" sortable="true" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/ID')}" dataModel="#{dataModel.caseDataModel}" />

			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="creator-column-header" componentToBeUpdated="" sortedField="CREATOR" sortable="true"
			    styleClass="case-list-header-cell #{dataModel.caseDataModel.isAutoHideColumns()?'js-creator-column-header':''}"
				value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATOR')}" dataModel="#{dataModel.caseDataModel}" />

			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="created-date-column-header" componentToBeUpdated="" sortedField="CREATION_TIME"
			    styleClass="TexAlCenter case-list-header-cell #{dataModel.caseDataModel.isAutoHideColumns()?'js-create-column-header':''}" 
				sortable="true" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/CREATION_TIME')}" dataModel="#{dataModel.caseDataModel}" />

			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="mofified-date-column-header" componentToBeUpdated="" sortedField="FINISHED_TIME"
				styleClass="TexAlCenter case-list-header-cell #{dataModel.caseDataModel.isAutoHideColumns()?'js-expiry-column-header':''}" 
				sortable="true" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/FINISHED_TIME')}" dataModel="#{dataModel.caseDataModel}" />

			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="state-column-header" styleClass="case-list-header-cell TexAlCenter" componentToBeUpdated="" sortedField="STATE"
				sortable="true" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/caseList/defaultColumns/STATE')}" dataModel="#{dataModel.caseDataModel}" />

			<!-- New field -->
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="customVarCharField1-column-case-list-header" styleClass="case-list-header-cell TexAlCenter customized-case-header-column"
				componentToBeUpdated="" sortedField="customVarCharField1" sortable="true" value="#{ivy.cms.co('/DefaultColumns/caseList/customVarcharField1')}" dataModel="#{dataModel.caseDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseColumnHeader id="customTimestampField1-column-case-list-header" styleClass="case-list-header-cell TexAlCenter customized-case-header-column"
				componentToBeUpdated="" sortedField="customTimestampField1" sortable="true" value="#{ivy.cms.co('/DefaultColumns/caseList/customTimestampField1')}" dataModel="#{dataModel.caseDataModel}" />
		</ui:define>
		
		<ui:define name="caseHeader">
            <div class="case-header-name-desc-cell">
				<ic:ch.ivy.addon.portalkit.component.cases.column.CaseName case="#{case}" caseNameId="case-header-name-cell" caseDescriptionId="description-cell"
				  initialActive="#{case.id eq caseView.getAutoSelectCaseId().id()}" 
				  dataModel="#{dataModel.caseDataModel}" />
			</div>
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseId componentId="case-id-cell" case="#{case}" dataModel="#{dataModel.caseDataModel}" />
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseCreator componentId="case-creator-cell" case="#{case}" dataModel="#{dataModel.caseDataModel}" 
			    styleClass="#{dataModel.caseDataModel.isAutoHideColumns()?'hidden-sm':''}" />
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-creation-date-cell" rendered="#{dataModel.caseDataModel.isSelectedColumn('CREATION_TIME')}" 
				value="#{case.startTimestamp}" styleClass="#{dataModel.caseDataModel.isAutoHideColumns()?'js-create-cell':''}" />
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseDate componentId="case-expiry-date-cell" rendered="#{dataModel.caseDataModel.isSelectedColumn('FINISHED_TIME')}" 
				value="#{case.endTimestamp}" styleClass="#{dataModel.caseDataModel.isAutoHideColumns()?'js-finish-cell':''}" />
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseState componentId="case-state-cell" case="#{case}" dataModel="#{dataModel.caseDataModel}" />

			<!-- New field -->
			<ic:ch.ivy.addon.portalkit.component.cases.column.CaseCustomField id="case-customer-name-component" panelGroupId="customVarCharField1-column-case-header-panel" 
				componentId="customVarCharField1-column-case-header-text" column="customVarCharField1" dataModel="#{dataModel.caseDataModel}" labelValue="#{case.customFields().stringField('CustomVarCharField1').getOrNull()}" />
			<h:outputText value="#{case.customFields().timestampField('CustomTimestampField1').getOrNull()}" styleClass="TexAlCenter case-header-end-time-cell customized-case-header-column"
				rendered="#{dataModel.caseDataModel.isSelectedColumn('customTimestampField1')}" >
				<f:convertDateTime pattern="#{dateTimePatternBean.configuredPattern}" />
			</h:outputText>
		</ui:define>

		<ui:define name="custom-search">
			<p:tab title="Employees">
				<p:dataTable id="employee-table" value="#{data.dataModel.employees}" var="emp" sortBy="#{emp.firstName}">
					<p:column headerText="First Name" sortBy="#{emp.firstName}" filterBy="#{emp.firstName}">
						<h:outputText value="#{emp.firstName}" />
					</p:column>
					<p:column headerText="Last Name" sortBy="#{emp.lastName}" filterBy="#{emp.lastName}">
						<h:outputText value="#{emp.lastName}" />
					</p:column>
					<p:column headerText="Country" sortBy="#{emp.country}" filterBy="#{emp.country}">
						<h:outputText value="#{emp.country}" />
					</p:column>
					<p:column headerText="Details" style="text-align: center">
						<p:commandLink id="detail-action" actionListener="#{logic.openDetails(emp)}" process="@this"
							title="#{ivy.cms.co('/Labels/Details')}">
							<i class="fa fa-search fa-lg" />
						</p:commandLink>
					</p:column>
				</p:dataTable>
			</p:tab>
		</ui:define>

		<ui:define name="css">
			<h:outputStylesheet library="css" name="examples.css" />
		</ui:define>
	</ui:composition>
</h:body>
</html>