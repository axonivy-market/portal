<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<body>
	<ui:composition>

		<!-- Exception Handler for ViewExpiredExceptions -->
		<p:ajaxExceptionHandler type="javax.faces.application.ViewExpiredException" update="viewExpiredExceptionDialog"
			onexception="PF('viewExpiredExceptionDialog').show();" />

		<!-- Error Dialog shown if a view or session has expired -->
		<p:confirmDialog id="viewExpiredExceptionDialog"
			header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/warning')}"
			message="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/sessionExpried')}"
			widgetVar="viewExpiredExceptionDialog" appendTo="@(body)" closable="false">
			<p:commandButton value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/ok')}" onclick="redirectDefaultPage();"
				type="button" styleClass="portal-ok-button" />
		</p:confirmDialog>

		<!--  Exception Handler for any other Exception -->
		<c:set var="defaultNotificationMessage"
			value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/defaultNotificationMessage')}" />
		<p:ajaxExceptionHandler update="exception-dialog:exception-dialog"
			onexception="portal.notifyError('#{defaultNotificationMessage}', '#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/errorPage/moreDetails')}')" />
		<ic:ch.ivy.addon.portalkit.component.ExceptionDialog id="exception-dialog" widgetVar="exception-dialog"
			message="#{pfExceptionHandler.message}" stackTrace="#{pfExceptionHandler.formattedStackTrace}" />
			
		<script type="text/javascript">
			var redirectPage = "#{userMenuBean.homePageURL}";
			function redirectDefaultPage() {
				window.location.href = redirectPage;
			}
		</script>
	</ui:composition>
</body>
</html>