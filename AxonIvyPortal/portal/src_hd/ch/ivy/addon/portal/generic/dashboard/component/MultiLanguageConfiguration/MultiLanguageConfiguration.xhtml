<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<cc:interface componentType="IvyComponent">
  <cc:attribute name="titles" required="true" />
  <cc:attribute name="componentToUpdateOnCreate" />
  <cc:attribute name="componentToUpdateOnModify" />
  <cc:attribute name="updateCurrentLanguage" />
  <cc:attribute name="useInputText" default="true" shortDescription="if true uses render input text, otherwise uses text area"/>
</cc:interface>

<cc:implementation>
  <c:set var="titles" value="#{cc.attrs.titles}" />
  <p:dialog appendTo="@(body)" styleClass="setting-multiple-languages"
    header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/settingMultipleLanguages')}"
    resizable="false" id="multiple-languages-dialog"
    widgetVar="multiple-languages-dialog" dynamic="true" modal="true"
    responsive="true" width="500">
    <h:form id="add-language-detail-form">
      <h:outputLabel
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/emptySupportedLanguages')}"
        rendered="#{titles.isEmpty()}" />
    <div class="scroll-table">
      <h:dataTable value="#{titles}" width="450" 
        rendered="#{titles.isEmpty() eq 'false'}" var="title"
        columnClasses="#{cc.attrs.useInputText ? '' : 'multi-language-textarea-label,w-full'}">
        <h:column>
          <h:outputText styleClass="ui-g-12" 
            value="#{title.locale.getDisplayName(ivy.session.getContentLocale())}" />
        </h:column>
        <h:column>
          <div class="ui-g-12 ui-fluid">
            <p:inputText rendered="#{cc.attrs.useInputText}" value="#{title.value}" styleClass="w-full"/>
            <p:inputTextarea value="#{title.value}" maxlength="200" rows="3" styleClass="w-full" id="title-textarea" rendered="#{!cc.attrs.useInputText}">              
            </p:inputTextarea>
          </div>
        </h:column>
      </h:dataTable>
    </div>
      <div class="u-dialog-footer-actions-group">
        <p:commandLink
          id="multi-language-cancel-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
          onclick="PF('multiple-languages-dialog').hide();" />
        <p:spacer width="15px" rendered="#{!titles.isEmpty()}" />
        <p:commandButton
          id="multi-language-ok-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/ok')}"
          update="#{cc.attrs.componentToUpdateOnCreate},#{cc.attrs.componentToUpdateOnModify}" process="@form"
          oncomplete="PF('multiple-languages-dialog').hide();"
          actionListener="#{cc.attrs.updateCurrentLanguage}"
          rendered="#{!titles.isEmpty()}" />
      </div>
    </h:form>
  </p:dialog>

</cc:implementation>

</html>