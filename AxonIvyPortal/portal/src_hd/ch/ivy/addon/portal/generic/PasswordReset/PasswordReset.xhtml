<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
  <f:facet name="first">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
  </f:facet>

  <title>#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/forgotPassword/setANewPassword')}</title>
  <link rel="shortcut icon" href="#{resource['ivy-branding:favicon']}" />

  <f:attribute name="primefaces.THEME" value="#{themeBean.theme}" />

  <h:outputStylesheet name="#{ivyFreyaTheme.layout}" library="#{ivyFreyaTheme.library}" />
  <h:outputScript name="js/layout.js" library="#{ivyFreyaTheme.library}" />
  <h:outputStylesheet library="css" name="portal-root-variables.css" />
  <h:outputStylesheet library="css" name="portal-variables-#{ivyFreyaTheme.mode}.css" />
  <h:outputStylesheet library="css" name="utility.css" />
  <h:outputStylesheet library="css" name="template.css" />
  <h:outputStylesheet library="css" name="module.css" />
  <h:outputStylesheet library="css" name="portal.css" />
  <h:outputStylesheet name="custom.css" library="ivy-branding" />

  <script src="#{resource['ivy-webcontent:layouts/js/cookie-helper.js']}" />
  <h:outputScript name="responsive-toolkit.js" library="js" />
  <h:outputScript name="main.js" library="js" />
  <h:outputScript name="portal.js" library="js" />

  <ui:insert name="head" />
</h:head>

<h:body>
  <div class="login-body layout-wrapper">
    <div class="login-wrapper">
      <div class="login-panel ui-fluid">
        <div class="login-panel-header">
          <p:graphicImage name="#{themeBean.themeMode eq 'dark' ? 'logo_light': 'logo'}" library="ivy-branding"
            alt="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/loginLogo')}" />
        </div>
        <div class="login-panel-content">
          <c:choose>
            <c:when test="#{ivy.wf.securityContext.currentSession.sessionUserUnknown}">
              <c:choose>
                <c:when test="#{data.isValidResetUrl}">
                  <ui:insert name="password-reset">
                    <ic:ch.ivy.addon.portalkit.singleapp.general.PasswordReset id="password-reset" token="#{data.token}"
                      username="#{data.username}" />
                  </ui:insert>
                </c:when>
                <c:otherwise>
                  <ui:insert name="password-reset-error-page">
                    <ic:ch.ivy.addon.portalkit.PasswordResetErrorPage id="password-reset-error"
                      message="#{data.message}" />
                  </ui:insert>
                </c:otherwise>
              </c:choose>
            </c:when>
          </c:choose>
        </div>
      </div>
      <div class="login-footer">
        <h4>#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/login/AxonIvyPortal')}</h4>
        <h6>#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/login/Copyright')}</h6>
      </div>
    </div>
  </div>
  <ic:ch.ivy.addon.portalkit.component.GlobalAjaxStatus id="ajax-indicator" />
</h:body>
</html>