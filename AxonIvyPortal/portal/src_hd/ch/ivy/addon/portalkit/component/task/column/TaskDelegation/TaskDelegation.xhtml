<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

<cc:interface componentType="IvyComponent">
    <cc:attribute name="task" required="true" type="ch.ivyteam.ivy.workflow.ITask" />
</cc:interface>

<cc:implementation>
    <h:form id="delegation-form">
        <div class="default-task-cell flex align-items-center justify-content-center h-full text-center">
            <p:selectBooleanCheckbox id="delegation-checkbox"
                value="#{taskBean.isDelegatedTask(cc.attrs.task)}"
                ariaLabel="#{taskBean.isDelegatedTask(cc.attrs.task) ? ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/undelegation') : ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/delegation')}"
                onclick="document.getElementById('#{cc.clientId}:delegation-form:delegation-link').click(); return false;">
            </p:selectBooleanCheckbox>

            <p:commandLink id="delegation-link"
                style="display: none;"
                actionListener="#{taskBean.clickOnDelegationTask(cc.attrs.task)}"
                process="@form"
                update="@form"
                partialSubmit="true">
            </p:commandLink>

            <p:tooltip for="delegation-checkbox"
                       value="#{taskBean.isDelegatedTask(cc.attrs.task) ? ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/undelegation') : ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/delegation')}"
                       trackMouse="true"
                       hideEvent="mouseleave click" />
        </div>
    </h:form>
</cc:implementation>

</html>
