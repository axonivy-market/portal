<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:pc="http://xmlns.jcp.org/jsf/composite/components">

<ui:composition>

  <!-- Start Edit Process -->
  <p:dialog id="edit-process-dialog" widgetVar="edit-process-dialog" 
    closeOnEscape="true" modal="true" appendTo="@(body)"
    responsive="true" resizable="false" fitViewport="true" positionType="absolute"
    styleClass="edit-process-dialog" header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/editDialog/dialogHeaderTitle', [processWidgetBean.editedProcess.getName()])}">
    <p:ajax event="close" update="edit-process-dialog" resetValues="true" />
    <h:form id="edit-process-form" styleClass="ui-g edit-process-form">
      <c:set var="process" value="#{processWidgetBean.editedProcess}" />
      <c:set var="processIcon" value="#{process.getIcon()}" />
      <div class="ui-g-12 edit-process-header-group u-no-padding-left u-no-padding-right">
        <div class="ui-g-12 u-padding-0">
          <p class="edit-process-header-sub-title">#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/description')}</p>
          <p class="edit-process-header-description MarTop5">#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/editDialog/dialogHeaderDescription')}</p>
        </div>
      </div>

      <div id="edit-process-icon-group" class="ui-g-12 edit-process-icon-group MarTop20 u-no-padding-left u-no-padding-right">
        <p class="u-mar-right-10 edit-process-header-sub-title">#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/editDialog/dialogCurrentIcon')}</p>
        <div class="ui-g-12 u-no-padding-left">
          <ic:ch.ivy.addon.portalkit.component.IconSelection id="edit-process-icon"
            value="#{processWidgetBean.selectedIconProcess}"
            isReadOnly="#{!processWidgetBean.canChangeProcessIcon()}" />
        </div>
      </div>

      <div class="ui-g-12 u-no-padding-bottom MarTop20 edit-process-info-group u-no-padding-left u-no-padding-right">
        <p class="edit-process-header-sub-title">
          <span class="u-mar-right-5">#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/editDialog/dialogEditInfoTitle', [process.getType().getLabel()])}</span>
          <p:commandLink id="edit-express-workflow" rendered="#{processWidgetBean.isExpressProcess(process)}"
            actionListener="#{processWidgetBean.editExpressWorkflow(process.getProcess())}" target="_self"
            process="@this" immediate="true" partialSubmit="true"
            oncomplete="PF('edit-process-dialog').hide();"
            styleClass="si si-graphic-tablet-drawing-pen"/>
        </p>

        <p:messages styleClass="ui-g-12 u-padding-0">
          <p:autoUpdate />
        </p:messages>

        <!-- Express process -->
        <h:panelGrid styleClass="ui-g-12 u-no-padding-left u-no-padding-right" columns="2" columnClasses="edit-process-detail-1st-cell, u-truncate-text"
          rendered="#{processWidgetBean.isExpressProcess(process)}">
          <h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/WorkflowDefinition/ProcessOwner')}" />
          <p:column>
            <pc:securityMemberNameAndAvatar
              displayName="#{process.getProcessOwnerDisplayName()}"
              securityMember="#{process.getProcess().getProcessOwnerUser()}" />
          </p:column>
          <h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/WorkflowDefinition/AbleToStart')}" />
          <h:outputText value="#{process.ableToStart}" />
        </h:panelGrid>

        <!-- External link -->
        <h:panelGrid styleClass="ui-g-12 u-no-padding-left" columns="2" columnClasses="edit-process-detail-1st-cell, edit-process-detail-2nd-cell"
          rendered="#{!processWidgetBean.isExpressProcess(process)}">
          <!-- Process name -->
          <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/displayName')}" />
          <p:inplace editor="true" styleClass="md-inputfield" effectSpeed="fast"
          saveLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}"
          cancelLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}">
            <f:facet name="output">
              <h:outputText styleClass="u-mar-right-5" value="#{processWidgetBean.editedExternalLink.name}" />
              <a href="#" class="si si-graphic-tablet-drawing-pen" />
            </f:facet>
            <div class="ui-fluid ui-inputgroup">
              <p:inputText id="external-link-name" value="#{processWidgetBean.editedExternalLink.name}" required="true"
                maxlength="85" 
                requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/processName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/isRequiredMessage')}" />
              <p:commandButton id="edit-name-language-button"  icon="si si-chat-translate" 
                actionListener="#{processWidgetBean.updateNameByLocale()}"
                process="#{cc.clientId}:edit-process-form:external-link-name"
                update="#{cc.clientId}:edit-name-language-config:multiple-languages-dialog"
                oncomplete="PF('multiple-languages-dialog').show();" />
            </div>
          </p:inplace>

          <!-- Start link -->
          <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/startLink')}" />
          <p:inplace editor="true" styleClass="md-inputfield" effectSpeed="fast"
            saveLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}"
            cancelLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}">
            <f:facet name="output">
              <h:outputText styleClass="u-mar-right-5" value="#{processWidgetBean.editedExternalLink.link}" />
              <a href="#" class="si si-graphic-tablet-drawing-pen" />
            </f:facet>
            <p:inputText id="external-link" value="#{processWidgetBean.editedExternalLink.link}" required="true"
              requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/startLink')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/isRequiredMessage')}"
              placeholder="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/webLinkExample')}" />
          </p:inplace>

          <!-- Link description -->
          <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/linkDescription')}" />
          <p:inplace editor="true" styleClass="md-inputfield" effectSpeed="fast"
          saveLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}"
          cancelLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}">
            <f:facet name="output">
              <h:outputText styleClass="u-mar-right-5" value="#{processWidgetBean.editedExternalLink.description}" />
              <a href="#" class="si si-graphic-tablet-drawing-pen" />
            </f:facet>
            <div class="ui-fluid ui-inputgroup">
            <p:inputTextarea id="external-description" value="#{processWidgetBean.editedExternalLink.description}"
              maxlength="200" rows="3" />
            <p:commandButton id="edit-description-language-button" icon="si si-chat-translate" 
              process="#{cc.clientId}:edit-process-form:external-description"
              update="#{cc.clientId}:text-area-edit-multiple-languages-dialog"
              oncomplete="PF('text-area-edit-multiple-languages-dialog').show();" />
            </div>
          </p:inplace>
          
          <!-- Role Permissions -->
          <h:outputText value="#{ivy.cms.co('/Labels/Permissions')}" rendered="#{processWidgetBean.editedExternalLink.isPublic}"/>
          <p:inplace editor="true" effectSpeed="fast" rendered="#{processWidgetBean.editedExternalLink.isPublic}" id="role-permissions-editor-for-external-link"
            styleClass="role-permissions-editor-for-external-link"
            saveLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}"
            cancelLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}">
            <p:ajax event="save" listener="#{processWidgetBean.handleSavePermissionSelections()}"
              process="@this" update="permission-for-editing-external-link" />
            <p:ajax event="cancel" listener="#{processWidgetBean.handleCancelPermissionSelections()}"
              process="@this" update="permission-for-editing-external-link" resetValues="true"/>
            <f:facet name="output">
              <h:outputText styleClass="u-mar-right-5" value="#{processWidgetBean.displayNameOfPermissionsWhenEditingExternalLink}" />
              <a href="#" class="si si-graphic-tablet-drawing-pen" />
            </f:facet>
            <f:facet name="input">
              <h:panelGroup id="permission-for-editing-external-link" layout="block"
                styleClass="permissions-for-editing-external-link ui-fluid">
                <p:autoComplete id="role-autocomplete-for-editing-external-link" scrollHeight="210" dropdown="true"
                  required="true" completeMethod="#{processWidgetBean.completePermissionsWhenEditingExternalLink}"
                  value="#{processWidgetBean.selectedSecurityMemberDTOsWhenEditingExternalLink}" var="responsible"
                  itemValue="#{responsible}" itemLabel="#{responsible.briefDisplayNameWithState}"
                  converter="pojoConverter" cache="true" maxResults="100" multiple="true"
                  requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/rolePermissionsRequiredMessage')}"
                  moreText="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/more')}..." dynamic="true"
                  forceSelection="true">
                  <p:ajax event="itemSelect" listener="#{processWidgetBean.onSelectPermissionsWhenEditingExternalLink}"
                    global="false" update="role-autocomplete-for-editing-external-link" process="@this"/>
                  <p:ajax event="itemUnselect" listener="#{processWidgetBean.onUnSelectPermissionsWhenEditingExternalLink}"
                    global="false" update="role-autocomplete-for-editing-external-link" process="@this" immediate="true"/>
                  <p:column>
                    <pc:securityMemberNameAndAvatar displayName="#{processWidgetBean.formatName(responsible)}"
                      securityMember="#{responsible}">
                      <f:facet name="alternativeAvatar">
                        <h:outputText rendered="#{not avatarBean.isShowAvatar()}"
                          styleClass="fa #{responsible.isUser() ? 'fa-user' : 'fa-users'} u-mar-right-5" />
                      </f:facet>
                    </pc:securityMemberNameAndAvatar>
                  </p:column>
                </p:autoComplete>
              </h:panelGroup>
            </f:facet>
          </p:inplace>

          <!-- Image -->
          <h:outputLabel id="editing-external-link-image-label"
            for="editing-external-link-image-upload"
            value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/image')}" />
          <h:panelGroup id="file-upload-panel" layout="block"
            styleClass="#{empty processWidgetBean.editedExternalLink.imageLocation ? 'ui-g-12' : 'ui-g-12 ui-fluid u-padding-0 MarTop10 external-link-preview-image-panel'}">
            <p:fileUpload id="editing-external-link-image-upload"
              rendered="#{empty processWidgetBean.editedExternalLink.imageLocation}"
              listener="#{processWidgetBean.handleExternalLinkImageUpload}"
              chooseIcon="#{visibilityBean.generateButtonIcon('si si-add-small')}"
              dragDropSupport="true" auto="true"
              update="file-upload-panel"
              allowTypes="/(\.|\/)(png|jpg|jpeg|svg)$/i"
              accept=".png,.jpg,.jpeg,.svg"
              label="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/select')}"
              invalidFileMessage="#{ivy.cms.co('/Dialogs/components/CaseDocument/invalidFileMessage')}" />
            <p:graphicImage id="editing-external-link-preview-image"
              rendered="#{not empty processWidgetBean.editedExternalLink.imageLocation}"
              styleClass="external-link-preview-image" library="ivy-cms"
              name="#{processWidgetBean.editedExternalLink.imageLocation}" />
            <h:panelGroup
              class="external-link-preview-image-overlay-panel"
              rendered="#{not empty processWidgetBean.editedExternalLink.imageLocation}">
              <p:commandButton
                id="editing-external-link-delete-image-button"
                actionListener="#{processWidgetBean.removeTempExternalLinkImage}"
                update="file-upload-panel"
                rendered="#{not empty processWidgetBean.editedExternalLink.imageLocation}"
                styleClass="external-link-delete-image-button"
                icon="si si-bin-1" />
            </h:panelGroup>
            <p:defaultCommand target="external-link-name"/>
          </h:panelGroup>
        </h:panelGrid>
      </div>
    </h:form>

    <f:facet name="footer">
      <p:commandLink id="cancel-edit-process-command"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
        actionListener="#{processWidgetBean.removeTempExternalLinkImage}"
        oncomplete="PF('edit-process-dialog').hide()"
        styleClass="u-mar-right-10" />
      <p:commandButton id="save-process-command" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}" icon="#{visibilityBean.generateButtonIcon('si si-check-1')}"
        process="#{cc.clientId}:edit-process-form" actionListener="#{processWidgetBean.updateProcessData()}" update="#{cc.clientId}:edit-process-form"
        oncomplete="if(!args.validationFailed){PF('edit-process-dialog').hide(); updateProcessListOnSaveSuccessful();}" form="#{cc.clientId}:edit-process-form"/>
    </f:facet>
  </p:dialog>
  <!-- End Edit Process -->

  <!-- Start Delete Process -->
  <ui:decorate template="/layouts/decorator/portal-dialog-with-icon.xhtml">
    <ui:param name="id" value="remove-process-workflow-dialog" />
    <ui:param name="widgetVar" value="remove-process-workflow-dialog" />
    <ui:param name="dynamic" value="true"/>
    <ui:param name="appendTo" value="@(body)" />
    <ui:param name="iconClass" value="si si-delete-1" />
    <ui:param name="iconStyleClass" value="portal-dialog-error-icon" />
    <ui:param name="headerText" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/deleteProcessItemHeader')}" />
    
    <ui:define name="dialogContentSection">
      <div class="u-text-align-center portal-dialog-content">
         <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/deleteProcessItemConfirmation')}" />
         <br />
         <h:outputText value="#{processWidgetBean.deletedProcess.getName()}" styleClass="u-font-bold" />
      </div>
    </ui:define>
    
    <ui:define name="dialogFooter">
      <h:form id="delete-process-workflow-form">
        <p:link onclick="PF('remove-process-workflow-dialog').hide()" styleClass="u-mar-right-15"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
          href="#" />
        <p:commandButton id="remove-process-command" global="false" process="@this" update="#{cc.clientId}:process-list"
          icon="#{visibilityBean.generateButtonIcon('si si-check-1')}"
          actionListener="#{processWidgetBean.deleteProcessWorkflow()}" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/ok')}"
          oncomplete="PF('remove-process-workflow-dialog').hide(); updateProcessListOnSaveSuccessful();" />
      </h:form>
    </ui:define>
  </ui:decorate>
  <!-- End Delete Process -->

  <!-- Start External Link Dialogs -->
  <p:dialog id="add-external-link-dialog" widgetVar="add-external-link-dialog"
    header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/addNewExternalLinkHeader')}" closeOnEscape="true" modal="true"
    appendTo="@(body)" resizable="false" responsive="true" positionType="absolute" fitViewport="true" styleClass="add-external-link-dialog">
    <p:ajax event="close" update="add-external-link-dialog" resetValues="true" />
    <h:form id="add-external-link-form" styleClass="add-external-link-form ui-g">
      <p:defaultCommand target="external-link-name"/>
      <p:messages styleClass="ui-g-12"/>

      <!-- Process Name -->
      <div class="ui-g-12">
        <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/processName')}"
          for="external-link-name" />
      </div>
      <div class="ui-g-12 ui-fluid ui-inputgroup">
        <p:inputText id="external-link-name" value="#{externalLinkBean.externalLink.name}" required="true"
          maxlength="85" 
          requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/processName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/isRequiredMessage')}" />
        <p:commandButton id="add-name-language-button"  icon="si si-chat-translate" 
          actionListener="#{externalLinkBean.updateNameByLocale()}"
          process="#{cc.clientId}:add-external-link-form:external-link-name"
          update="#{cc.clientId}:name-language-config:multiple-languages-dialog"
          oncomplete="PF('multiple-languages-dialog').show();" />
      </div>

      <!-- Start link -->
      <div class="ui-g-12">
        <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/startLink')}"
          for="external-link" />
      </div>
      <div class="ui-g-12 ui-fluid">
        <p:inputText id="external-link" value="#{externalLinkBean.externalLink.link}" required="true"
          requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/startLink')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/isRequiredMessage')}. #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/webLinkExample')}" />
      </div>

      <!-- Description -->
      <div class="ui-g-12">
        <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/linkDescription')}"
          for="external-description" />
      </div>
      <div class="ui-g-12 ui-fluid ui-inputgroup">
        <p:inputTextarea id="external-description" value="#{externalLinkBean.externalLink.description}"
          maxlength="200" rows="3" />
        <p:commandButton id="add-description-language-button" icon="si si-chat-translate" 
          actionListener="#{externalLinkBean.updateDescriptionByLocale()}"
          process="#{cc.clientId}:add-external-link-form:external-description"
          update="#{cc.clientId}:text-area-add-multiple-languages-dialog"
          oncomplete="PF('text-area-add-multiple-languages-dialog').show();" />
      </div>

      <!-- Type -->
      <div class="ui-g-12 MarTop10 u-padding-0" jsf:rendered="#{externalLinkBean.hasPublicLinkCreationPermission()}">
        <div class="ui-g-12">
          <p:outputLabel id="external-link-type-label" for="external-link-type-radio"
            value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/externalLinkVisibility')}" />
        </div>
        <div class="ui-g-12 u-no-padding-top">
          <p:selectOneRadio id="external-link-type-radio" value="#{externalLinkBean.externalLink.isPublic}"
            styleClass="external-link-type-radio">
            <f:selectItem id="only-me" itemValue="false" itemLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/private')}" />
            <f:selectItem id="for-role" itemValue="true" itemLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/selectRoles')}" />
            <p:ajax update="permission-for-creating-external-link permission-for-creating-external-link-label" event="valueChange" />
          </p:selectOneRadio>
        </div>
        <h:panelGroup id="permission-for-creating-external-link-label">
          <p:outputLabel for="role-autocomplete-for-creating-external-link" rendered="#{externalLinkBean.externalLink.isPublic}"
            styleClass="ui-g-12"
            value="#{ivy.cms.co('/Labels/Permissions')}" />
        </h:panelGroup>
        <h:panelGroup id="permission-for-creating-external-link" layout="block">
          <h:panelGroup styleClass="ui-g-12 ui-fluid" rendered="#{externalLinkBean.externalLink.isPublic}">
            <p:autoComplete id="role-autocomplete-for-creating-external-link" scrollHeight="210" dropdown="true"
              required="true" completeMethod="#{processWidgetBean.completePermissionsWhenCreatingExternalLink}"
              value="#{processWidgetBean.selectedSecurityMemberDTOsWhenCreatingExternalLink}" var="responsible"
              itemValue="#{responsible}" itemLabel="#{responsible.briefDisplayNameWithState}" converter="pojoConverter"
              cache="true" maxResults="100" multiple="true"
              requiredMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/rolePermissionsRequiredMessage')}"
              moreText="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/more')}..." dynamic="true"
              forceSelection="true">
              <p:ajax event="itemSelect" listener="#{processWidgetBean.onSelectPermissionsWhenCreatingExternalLink}"
                update="role-autocomplete-for-creating-external-link" global="false" process="@this" immediate="true"/>
              <p:ajax event="itemUnselect" listener="#{processWidgetBean.onUnSelectPermissionsWhenCreatingExternalLink}"
                update="role-autocomplete-for-creating-external-link" global="false" process="@this" immediate="true" />
              <p:column>
                <pc:securityMemberNameAndAvatar displayName="#{processWidgetBean.formatName(responsible)}"
                  securityMember="#{responsible}">
                  <f:facet name="alternativeAvatar">
                    <h:outputText rendered="#{not avatarBean.isShowAvatar()}"
                      styleClass="fa #{responsible.isUser() ? 'fa-user' : 'fa-users'} u-mar-right-5" />
                  </f:facet>
                </pc:securityMemberNameAndAvatar>
              </p:column>
            </p:autoComplete>
          </h:panelGroup>
        </h:panelGroup>
      </div>

      <!-- Icon -->
      <div class="ui-g-12 MarTop10">
        <h:outputLabel id="external-link-icon-label" for="external-link-icon" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/icon')}" />
      </div>
      <div class="ui-g-12 u-no-padding-top external-process-icon">
        <ic:ch.ivy.addon.portalkit.component.IconSelection id="external-link-icon" value="#{externalLinkBean.externalLink.icon}" />
      </div>
      <!-- Image -->
      <div class="ui-g-12 MarTop10">
        <h:outputLabel id="external-link-image-label"
          for="external-link-image-upload"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/processwidget/image')}" />
      </div>
      <h:panelGroup id="file-upload-panel" layout="block"
        styleClass="#{empty externalLinkBean.externalLink.imageLocation ? 'ui-g-12 ':'ui-g-12 ui-fluid u-padding-0 MarTop10 external-link-preview-image-panel'}">
        <p:fileUpload id="external-link-image-upload"
          rendered="#{empty externalLinkBean.externalLink.imageLocation}"
          listener="#{externalLinkBean.handleImageUpload}"
          chooseIcon="#{visibilityBean.generateButtonIcon('si si-add-small')}"
          dragDropSupport="true" auto="true" update="file-upload-panel"
          allowTypes="/(\.|\/)(png|jpg|jpeg|svg)$/i"
          accept=".png,.jpg,.jpeg,.svg"
          label="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/select')}"
          invalidFileMessage="#{ivy.cms.co('/Dialogs/components/CaseDocument/invalidFileMessage')}" />
        <p:graphicImage id="external-link-preview-image"
          rendered="#{not empty externalLinkBean.externalLink.imageLocation}"
          styleClass="external-link-preview-image" library="ivy-cms"
          name="#{externalLinkBean.externalLink.imageLocation}" />
        <h:panelGroup class="external-link-preview-image-overlay-panel"
          rendered="#{not empty externalLinkBean.externalLink.imageLocation}">
          <p:commandButton id="external-link-delete-image-button"
            actionListener="#{externalLinkBean.removeImage()}"
            process="external-link-delete-image-button"
            partialSubmit="true" update="file-upload-panel"
            rendered="#{not empty externalLinkBean.externalLink.imageLocation}"
            styleClass="external-link-delete-image-button"
            icon="si si-bin-1" />
        </h:panelGroup>
      </h:panelGroup>
    </h:form>

    <f:facet name="footer">
      <p:commandLink id="cancel-adding-external-link-command"
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
        actionListener="#{externalLinkBean.removeImage()}"
        oncomplete="PF('add-external-link-dialog').hide()"
        styleClass="u-mar-right-15" />
      <p:commandButton id="adding-new-external-link-command" value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/add')}"
        icon="#{visibilityBean.generateButtonIcon('si si-add-small')}" process="#{cc.clientId}:add-external-link-form"
        form="#{cc.clientId}:add-external-link-form" actionListener="#{processWidgetBean.createNewExternalLink()}"
        update="#{cc.clientId}:add-external-link-form"
        oncomplete="if(!args.validationFailed){PF('add-external-link-dialog').hide(); updateProcessListOnSaveSuccessful();}" />
    </f:facet>
  </p:dialog>
  <!-- End External Link Dialogs -->
  <!-- Multi language dialog-->
  <ic:ch.ivy.addon.portal.generic.dashboard.component.MultiLanguageConfiguration
    id="name-language-config" titles="#{externalLinkBean.externalLink.names}"
    componentToUpdateOnCreate="#{cc.clientId}:add-external-link-form:external-link-name" 
    componentToUpdateOnModify="#{cc.clientId}:add-external-link-form:external-link-name"/>
    
  <ic:ch.ivy.addon.portal.generic.dashboard.component.MultiLanguageConfiguration
    id="edit-name-language-config" titles="#{processWidgetBean.editedExternalLink.names}"
    componentToUpdateOnCreate="#{cc.clientId}:edit-process-form:external-link-name"
    componentToUpdateOnModify="#{cc.clientId}:edit-process-form:external-link-name"/>
    
  <p:dialog appendTo="@(body)" width="500"
    header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/settingMultipleLanguages')}"
    resizable="false" id="text-area-add-multiple-languages-dialog" 
    widgetVar="text-area-add-multiple-languages-dialog" dynamic="true" modal="true"
    responsive="true">
    <h:form id="text-area-add-language-detail-form">
      <h:outputLabel
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/emptySupportedLanguages')}"
        rendered="#{externalLinkBean.externalLink.descriptions.isEmpty()}" />
    <div class="scroll-table">
      <h:dataTable value="#{externalLinkBean.externalLink.descriptions}" columnClasses="exter-link-description-label,w-full external-link-input" styleClass="external-link-description"
        rendered="#{externalLinkBean.externalLink.descriptions.isEmpty() eq 'false'}" var="description">
        <h:column >
          <h:outputText
            value="#{description.locale.getDisplayName(ivy.session.getContentLocale())}" />
        </h:column>
        <h:column>
          <p:inputTextarea value="#{description.value}" maxlength="200" rows="3" styleClass="w-full" />
        </h:column>
      </h:dataTable>
    </div>
      <div class="u-dialog-footer-actions-group">
        <p:commandLink
          id="description-multi-language-cancel-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
          onclick="PF('text-area-add-multiple-languages-dialog').hide();" />
        <p:spacer width="15px" rendered="#{!descriptions.isEmpty()}" />
        <p:commandButton
          id="description-multi-language-ok-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/ok')}"
          update="#{cc.clientId}:add-external-link-form:external-description" process="@form"
          oncomplete="PF('text-area-add-multiple-languages-dialog').hide();"
          rendered="#{!descriptions.isEmpty()}" />
      </div>
    </h:form>
  </p:dialog>
  
  <p:dialog appendTo="@(body)" width="500"
    header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/settingMultipleLanguages')}"
    resizable="false" id="text-area-edit-multiple-languages-dialog" 
    widgetVar="text-area-edit-multiple-languages-dialog" dynamic="true" modal="true"
    responsive="true">
    <h:form id="text-area-edit-language-detail-form">
      <h:outputLabel
        value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/adminSettings/emptySupportedLanguages')}"
        rendered="#{processWidgetBean.editedExternalLink.descriptions.isEmpty()}" />
      <h:dataTable value="#{processWidgetBean.editedExternalLink.descriptions}" columnClasses="exter-link-description-label,w-full external-link-input" styleClass="external-link-description"
        rendered="#{processWidgetBean.editedExternalLink.descriptions.isEmpty() eq 'false'}" var="description">
        <h:column >
          <h:outputText
            value="#{description.locale.getDisplayName(ivy.session.getContentLocale())}" />
        </h:column>
        <h:column>
          <p:inputTextarea value="#{description.value}" maxlength="200" rows="3" styleClass="w-full" />
        </h:column>
      </h:dataTable>
      <div class="u-dialog-footer-actions-group">
        <p:commandLink
          id="description-edit-multi-language-cancel-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
          onclick="PF('text-area-edit-multiple-languages-dialog').hide();" />
        <p:spacer width="15px" rendered="#{!descriptions.isEmpty()}" />
        <p:commandButton
          id="description-edit-multi-language-ok-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/ok')}"
          update="#{cc.clientId}:edit-process-form:external-description" process="@form"
          oncomplete="PF('text-area-edit-multiple-languages-dialog').hide();"
          rendered="#{!descriptions.isEmpty()}" />
      </div>
    </h:form>
  </p:dialog>
  
 
</ui:composition>
</html>