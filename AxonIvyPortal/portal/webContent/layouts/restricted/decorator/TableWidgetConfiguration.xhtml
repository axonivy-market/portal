<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

<!-- DASHBOARD ADD NEW WIDGET DECORATOR: uses for displaying the widget in Dashboard configuration pop up.
    DEFINED 2 SECTIONS: widget configuration and widget preview.
    - WIDGET CONFIGURATION: shows widget filters by defined widgetFilterContent tag.
    - WIDGET PREVIEW: shows widget content by define widgetPreviewContent tag.

    *** REQUIRED PARAMS:
    * widget: widget model.
    * componentToUpdateOnPreviewAction: component id which will be updated when the preview button is clicked.
    * componentToProcessOnPreviewAction: component id which will be updated when the preview button is clicked.
    * onCompletePreviewAction: AJAX method which will be call when the preview button is clicked.
-->

<!-- Configuration -->
<h:panelGroup id="filter-container" layout="block" styleClass="card dashboard-card widget-configuration">
  <div class="filter-container ui-g dashboard-configuration-filter-container">
    <div class="ui-g-12 filter-container__header">
      <h4>#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/configuration/configuration')}</h4>
      <p>
        #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/configuration/configurationDescription')}
      </p>
    </div>

    <h:panelGroup id="widget-title-group"
      styleClass="ui-g-12 u-padding-0 ui-fluid">
      <div class="ui-g-4">
        <p:outputLabel for="widget-title"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/widgetTitle')}" />
      </div>
      <div class="ui-g-8 ui-inputgroup">
        <p:inputText id="widget-title"
          styleClass="widget-configuration__input-text"
          value="#{widget.name}" />
        <!-- Add language button -->
        <p:commandButton styleClass="app-setting-button"
          icon="si si-chat-translate" id="add-language-button">
          <p:ajax event="click"
            listener="#{managedBean.updateWidgetNameByLocale()}"
            process="widget-title"
            update="#{cc.clientId}:title-language-config:multiple-languages-dialog"
            oncomplete="PF('multiple-languages-dialog').show();" />
        </p:commandButton>
      </div>
    </h:panelGroup>

    <h:panelGroup id="quick-search-group"
      rendered="#{managedBean.canEnableQuickSearch()}"
      styleClass="ui-g-12 u-padding-0 ui-fluid">
      <div class="ui-g-6">
        <p:outputLabel for="quick-search" styleClass="u-mar-right-5"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/QuickSearch')}" />
        <h:outputText id="quick-search-info"
          styleClass="si si-information-circle" />
        <p:tooltip for="quick-search-info"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/QuickSearchInfo')}" />
      </div>
      <div class="ui-g-6 ui-inputgroup">
        <p:selectBooleanCheckbox id="quick-search"
          value="#{widget.enableQuickSearch}">
          <p:ajax process="quick-search-group"
            update="quick-search-group" partialSubmit="true"/>
        </p:selectBooleanCheckbox>
      </div>
    </h:panelGroup>

    <h:panelGroup id="widget-info-icon-group" rendered="#{managedBean.displayWidgetInfoOption()}"
      styleClass="ui-g-12 u-padding-0 ui-fluid">
      <div class="ui-g-6">
        <p:outputLabel for="widget-info"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/widgetInfoIcon')}"
          styleClass="u-mar-right-5" />
      </div>
      <div class="ui-g-6 ui-inputgroup">
        <p:selectBooleanCheckbox id="widget-info"
          value="#{widget.showWidgetInfo}">
          <p:ajax process="widget-info-icon-group"
            update="widget-info-icon-group" partialSubmit="true"/>
        </p:selectBooleanCheckbox>
      </div>
    </h:panelGroup>

    <h:panelGroup id="expand-mode-group" rendered="#{managedBean.displayExtendOption()}"
      styleClass="ui-g-12 u-padding-0 ui-fluid">
      <div class="ui-g-6">
        <p:outputLabel for="expand-option"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/fullscreenMode')}"
          styleClass="u-mar-right-5" />
      </div>
      <div class="ui-g-6 ui-inputgroup">
        <p:selectBooleanCheckbox id="expand-option"
          value="#{widget.showExpandMode}">
          <p:ajax process="expand-mode-group"
            update="expand-mode-group" partialSubmit="true"/>
        </p:selectBooleanCheckbox>
      </div>
    </h:panelGroup>

    <div class="ui-g-12 MarTop20 u-padding-0">
      <div class="ui-g-4 ui-md-5">
        <strong>#{ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/dashboard/availableFilters")}</strong>
      </div>
      <div class="ui-g-8 ui-md-7">
        <p:commandButton id="preview-button"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/preview')}"
          styleClass="Fright preview-button u-hidden-sm-down" icon="si si-search"
          update="#{componentToUpdateOnPreviewAction}"
          process="#{componentToProcessOnPreviewAction} widget-title-group"
          oncomplete="#{onCompletePreviewAction}" />
      </div>
    </div>

    <!-- Multi language dialog-->
    <ui:insert name="multiLanguageDialog" />

    <!-- Widget Filters -->
    <ui:insert name="widgetFilterContent" />
  </div>
</h:panelGroup>

<!-- Table configuration -->
<h:panelGroup id="widget-preview" styleClass="card widget-preview u-hidden-sm-down" layout="block">
  <div class="ui-g">
    <div class="ui-g-12 widget-preview__header">
      <h4>#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/configuration/tableConfiguration')}</h4>
      <p class="widget-preview__header--description">#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/dashboard/configuration/tableConfigurationDesc')}</p>
    </div>

    <!-- Widget data -->
    <div class="ui-g-12">
      <ui:insert name="widgetPreviewContent" />
    </div>
  </div>
</h:panelGroup>

</html>