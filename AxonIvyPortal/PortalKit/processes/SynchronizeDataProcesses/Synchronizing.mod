[Ivy]
1504020B50E9697E 3.20 #module
>Proto >Proto Collection #zClass
Se0 Synchronizing Big #zClass
Se0 B #cInfo
Se0 #process
Se0 @TextInP .resExport .resExport #zField
Se0 @TextInP .type .type #zField
Se0 @TextInP .processKind .processKind #zField
Se0 @AnnotationInP-0n ai ai #zField
Se0 @MessageFlowInP-0n messageIn messageIn #zField
Se0 @MessageFlowOutP-0n messageOut messageOut #zField
Se0 @TextInP .xml .xml #zField
Se0 @TextInP .responsibility .responsibility #zField
Se0 @StartSub f0 '' #zField
Se0 @EndSub f1 '' #zField
Se0 @Trigger f3 '' #zField
Se0 @GridStep f12 '' #zField
Se0 @GridStep f14 '' #zField
Se0 @GridStep f5 '' #zField
Se0 @Alternative f7 '' #zField
Se0 @Alternative f9 '' #zField
Se0 @PushWFArc f13 '' #zField
Se0 @PushWFArc f8 '' #zField
Se0 @PushWFArc f15 '' #zField
Se0 @PushWFArc f16 '' #zField
Se0 @PushWFArc f4 '' #zField
Se0 @PushWFArc f6 '' #zField
Se0 @PushWFArc f2 '' #zField
Se0 @PushWFArc f10 '' #zField
Se0 @StartSub f11 '' #zField
Se0 @Alternative f17 '' #zField
Se0 @GridStep f18 '' #zField
Se0 @EndSub f19 '' #zField
Se0 @Trigger f20 '' #zField
Se0 @GridStep f21 '' #zField
Se0 @Alternative f22 '' #zField
Se0 @GridStep f23 '' #zField
Se0 @PushWFArc f24 '' #zField
Se0 @PushWFArc f25 '' #zField
Se0 @PushWFArc f26 '' #zField
Se0 @PushWFArc f27 '' #zField
Se0 @PushWFArc f28 '' #zField
Se0 @PushWFArc f29 '' #zField
Se0 @PushWFArc f30 '' #zField
Se0 @PushWFArc f31 '' #zField
Se0 @StartSub f32 '' #zField
Se0 @GridStep f33 '' #zField
Se0 @GridStep f34 '' #zField
Se0 @Alternative f35 '' #zField
Se0 @EndSub f36 '' #zField
Se0 @Trigger f37 '' #zField
Se0 @Alternative f38 '' #zField
Se0 @GridStep f39 '' #zField
Se0 @PushWFArc f40 '' #zField
Se0 @PushWFArc f41 '' #zField
Se0 @PushWFArc f42 '' #zField
Se0 @PushWFArc f43 '' #zField
Se0 @PushWFArc f44 '' #zField
Se0 @PushWFArc f45 '' #zField
Se0 @PushWFArc f46 '' #zField
Se0 @PushWFArc f47 '' #zField
Se0 @EndSub f48 '' #zField
Se0 @StartSub f49 '' #zField
Se0 @Alternative f50 '' #zField
Se0 @GridStep f51 '' #zField
Se0 @Trigger f52 '' #zField
Se0 @GridStep f53 '' #zField
Se0 @GridStep f54 '' #zField
Se0 @Alternative f55 '' #zField
Se0 @PushWFArc f56 '' #zField
Se0 @PushWFArc f57 '' #zField
Se0 @PushWFArc f58 '' #zField
Se0 @PushWFArc f59 '' #zField
Se0 @PushWFArc f60 '' #zField
Se0 @PushWFArc f61 '' #zField
Se0 @PushWFArc f62 '' #zField
Se0 @PushWFArc f63 '' #zField
Se0 @Trigger f64 '' #zField
Se0 @StartSub f65 '' #zField
Se0 @GridStep f66 '' #zField
Se0 @Alternative f67 '' #zField
Se0 @GridStep f68 '' #zField
Se0 @GridStep f69 '' #zField
Se0 @Alternative f70 '' #zField
Se0 @EndSub f71 '' #zField
Se0 @PushWFArc f72 '' #zField
Se0 @PushWFArc f73 '' #zField
Se0 @PushWFArc f74 '' #zField
Se0 @PushWFArc f75 '' #zField
Se0 @PushWFArc f76 '' #zField
Se0 @PushWFArc f77 '' #zField
Se0 @PushWFArc f78 '' #zField
Se0 @PushWFArc f79 '' #zField
>Proto Se0 Se0 Synchronizing #zField
Se0 f0 inParamDecl '<List<ch.ivy.ws.addon.CustomPropertyPair> customPropertyPairs> param;' #txt
Se0 f0 inParamTable 'out.customPropertyPairs=param.customPropertyPairs;
' #txt
Se0 f0 outParamDecl '<> result;
' #txt
Se0 f0 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f0 callSignature addOrUpdateToAllPortalServer(List<ch.ivy.ws.addon.CustomPropertyPair>) #txt
Se0 f0 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addOrUpdateToAllPortalServer
(List&lt;CustomPropertyPair&gt;)</name>
        <nameStyle>55,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f0 139 43 26 26 14 0 #rect
Se0 f0 @|StartSubIcon #fIcon
Se0 f1 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f1 139 523 26 26 14 0 #rect
Se0 f1 @|EndSubIcon #fIcon
Se0 f3 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f3 processCall SynchronizeDataProcesses/SynchronizingTriggerProcess:addOrUpdate(ch.ivy.addon.portalkit.persistence.domain.Server,List<ch.ivy.ws.addon.CustomPropertyPair>) #txt
Se0 f3 doCall true #txt
Se0 f3 requestActionDecl '<ch.ivy.addon.portalkit.persistence.domain.Server server,List<ch.ivy.ws.addon.CustomPropertyPair> customPropertiesPair> param;
' #txt
Se0 f3 requestMappingAction 'param.server=in.servers.get(in.counter);
param.customPropertiesPair=in.customPropertyPairs;
' #txt
Se0 f3 responseActionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f3 responseMappingAction 'out=in;
' #txt
Se0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>trigger add or 
update portal configuration</name>
        <nameStyle>43,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f3 262 380 36 24 20 -2 #rect
Se0 f3 @|TriggerIcon #fIcon
Se0 f12 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f12 actionTable 'out=in;
' #txt
Se0 f12 actionCode 'in.counter = 0;' #txt
Se0 f12 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init counter</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f12 134 172 36 24 20 -2 #rect
Se0 f12 @|StepIcon #fIcon
Se0 f14 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f14 actionTable 'out=in;
' #txt
Se0 f14 actionCode in.counter++; #txt
Se0 f14 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>increase counter</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f14 262 284 36 24 20 -2 #rect
Se0 f14 @|StepIcon #fIcon
Se0 f5 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f5 actionTable 'out=in;
' #txt
Se0 f5 actionCode 'import ch.ivy.addon.portalkit.service.ServerService;

ServerService service = new ServerService();
in.servers = new java.util.ArrayList();
in.servers.addAll(service.findAll());' #txt
Se0 f5 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get portal server list</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f5 134 108 36 24 20 -2 #rect
Se0 f5 @|StepIcon #fIcon
Se0 f7 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f7 138 234 28 28 14 0 #rect
Se0 f7 @|AlternativeIcon #fIcon
Se0 f9 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f9 138 442 28 28 14 0 #rect
Se0 f9 @|AlternativeIcon #fIcon
Se0 f13 expr out #txt
Se0 f13 152 132 152 172 #arcP
Se0 f8 expr out #txt
Se0 f8 152 196 152 234 #arcP
Se0 f15 expr out #txt
Se0 f15 280 380 280 308 #arcP
Se0 f16 expr in #txt
Se0 f16 152 262 152 442 #arcP
Se0 f4 expr out #txt
Se0 f4 280 284 166 248 #arcP
Se0 f4 1 280 248 #addKink
Se0 f4 1 0.27652299868977787 0 0 #arcLabel
Se0 f6 expr out #txt
Se0 f6 152 69 152 108 #arcP
Se0 f2 expr in #txt
Se0 f2 outCond 'in.servers.size() - in.counter < 1' #txt
Se0 f2 152 470 152 523 #arcP
Se0 f10 expr in #txt
Se0 f10 166 456 280 404 #arcP
Se0 f10 1 280 456 #addKink
Se0 f10 0 0.7790944249033374 0 0 #arcLabel
Se0 f11 inParamDecl '<java.lang.String keyToBeDeleted> param;' #txt
Se0 f11 inParamTable 'out.keyToBeDeleted=param.keyToBeDeleted;
' #txt
Se0 f11 outParamDecl '<> result;
' #txt
Se0 f11 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f11 callSignature delete(String) #txt
Se0 f11 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete(String)</name>
    </language>
</elementInfo>
' #txt
Se0 f11 491 43 26 26 14 0 #rect
Se0 f11 @|StartSubIcon #fIcon
Se0 f17 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f17 490 234 28 28 14 0 #rect
Se0 f17 @|AlternativeIcon #fIcon
Se0 f18 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f18 actionTable 'out=in;
' #txt
Se0 f18 actionCode 'in.counter = 0;' #txt
Se0 f18 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init counter</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f18 486 172 36 24 20 -2 #rect
Se0 f18 @|StepIcon #fIcon
Se0 f19 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f19 491 523 26 26 14 0 #rect
Se0 f19 @|EndSubIcon #fIcon
Se0 f20 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f20 processCall SynchronizeDataProcesses/SynchronizingTriggerProcess:delete(String,ch.ivy.addon.portalkit.persistence.domain.Server) #txt
Se0 f20 doCall true #txt
Se0 f20 requestActionDecl '<java.lang.String key,ch.ivy.addon.portalkit.persistence.domain.Server server> param;
' #txt
Se0 f20 requestMappingAction 'param.key=in.keyToBeDeleted;
param.server=in.servers.get(in.counter);
' #txt
Se0 f20 responseActionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f20 responseMappingAction 'out=in;
' #txt
Se0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete property</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f20 614 380 36 24 19 -2 #rect
Se0 f20 @|TriggerIcon #fIcon
Se0 f21 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f21 actionTable 'out=in;
' #txt
Se0 f21 actionCode in.counter++; #txt
Se0 f21 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>increase counter</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f21 614 284 36 24 20 -2 #rect
Se0 f21 @|StepIcon #fIcon
Se0 f22 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f22 490 442 28 28 14 0 #rect
Se0 f22 @|AlternativeIcon #fIcon
Se0 f23 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f23 actionTable 'out=in;
' #txt
Se0 f23 actionCode 'import ch.ivy.addon.portalkit.service.ServerService;

ServerService service = new ServerService();
in.servers = new java.util.ArrayList();
in.servers.addAll(service.findAll());' #txt
Se0 f23 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f23 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get portal server list</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f23 486 108 36 24 20 -2 #rect
Se0 f23 @|StepIcon #fIcon
Se0 f24 expr out #txt
Se0 f24 504 132 504 172 #arcP
Se0 f25 expr out #txt
Se0 f25 504 196 504 234 #arcP
Se0 f26 expr out #txt
Se0 f26 632 380 632 308 #arcP
Se0 f27 expr in #txt
Se0 f27 504 262 504 442 #arcP
Se0 f28 expr out #txt
Se0 f28 632 284 518 248 #arcP
Se0 f28 1 632 248 #addKink
Se0 f28 0 0.9847272945456741 0 0 #arcLabel
Se0 f29 expr out #txt
Se0 f29 504 69 504 108 #arcP
Se0 f30 expr in #txt
Se0 f30 outCond 'in.servers.size() - in.counter < 1' #txt
Se0 f30 504 470 504 523 #arcP
Se0 f31 expr in #txt
Se0 f31 518 456 632 404 #arcP
Se0 f31 1 632 456 #addKink
Se0 f31 1 0.28541036719852647 0 0 #arcLabel
Se0 f32 inParamDecl '<java.lang.String keyPrefixToBeDeleted> param;' #txt
Se0 f32 inParamTable 'out.keyPrefixToBeDeleted=param.keyPrefixToBeDeleted;
' #txt
Se0 f32 outParamDecl '<> result;
' #txt
Se0 f32 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f32 callSignature deleteByPrefix(String) #txt
Se0 f32 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteByPrefix(String)</name>
    </language>
</elementInfo>
' #txt
Se0 f32 1115 43 26 26 14 0 #rect
Se0 f32 @|StartSubIcon #fIcon
Se0 f33 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f33 actionTable 'out=in;
' #txt
Se0 f33 actionCode in.counter++; #txt
Se0 f33 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>increase counter</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f33 1238 284 36 24 20 -2 #rect
Se0 f33 @|StepIcon #fIcon
Se0 f34 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f34 actionTable 'out=in;
' #txt
Se0 f34 actionCode 'in.counter = 0;' #txt
Se0 f34 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init counter</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f34 1110 172 36 24 20 -2 #rect
Se0 f34 @|StepIcon #fIcon
Se0 f35 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f35 1114 442 28 28 14 0 #rect
Se0 f35 @|AlternativeIcon #fIcon
Se0 f36 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f36 1115 523 26 26 14 0 #rect
Se0 f36 @|EndSubIcon #fIcon
Se0 f37 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f37 processCall SynchronizeDataProcesses/SynchronizingTriggerProcess:deleteByPrefix(ch.ivy.addon.portalkit.persistence.domain.Server,String) #txt
Se0 f37 doCall true #txt
Se0 f37 requestActionDecl '<ch.ivy.addon.portalkit.persistence.domain.Server server,java.lang.String keyPrefix> param;
' #txt
Se0 f37 requestMappingAction 'param.server=in.servers.get(in.counter);
param.keyPrefix=in.keyPrefixToBeDeleted;
' #txt
Se0 f37 responseActionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f37 responseMappingAction 'out=in;
' #txt
Se0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete property by prefix</name>
        <nameStyle>25,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f37 1238 380 36 24 20 -2 #rect
Se0 f37 @|TriggerIcon #fIcon
Se0 f38 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f38 1114 234 28 28 14 0 #rect
Se0 f38 @|AlternativeIcon #fIcon
Se0 f39 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f39 actionTable 'out=in;
' #txt
Se0 f39 actionCode 'import ch.ivy.addon.portalkit.service.ServerService;

ServerService service = new ServerService();
in.servers = new java.util.ArrayList();
in.servers.addAll(service.findAll());' #txt
Se0 f39 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get portal server list</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f39 1110 108 36 24 20 -2 #rect
Se0 f39 @|StepIcon #fIcon
Se0 f40 expr out #txt
Se0 f40 1128 132 1128 172 #arcP
Se0 f41 expr out #txt
Se0 f41 1128 196 1128 234 #arcP
Se0 f42 expr out #txt
Se0 f42 1256 380 1256 308 #arcP
Se0 f43 expr in #txt
Se0 f43 1128 262 1128 442 #arcP
Se0 f44 expr out #txt
Se0 f44 1256 284 1142 248 #arcP
Se0 f44 1 1256 248 #addKink
Se0 f44 0 0.9847272945456741 0 0 #arcLabel
Se0 f45 expr out #txt
Se0 f45 1128 69 1128 108 #arcP
Se0 f46 expr in #txt
Se0 f46 outCond 'in.servers.size() - in.counter < 1' #txt
Se0 f46 1128 470 1128 523 #arcP
Se0 f47 expr in #txt
Se0 f47 1142 456 1256 404 #arcP
Se0 f47 1 1256 456 #addKink
Se0 f47 1 0.28541036719852647 0 0 #arcLabel
Se0 f48 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f48 787 523 26 26 14 0 #rect
Se0 f48 @|EndSubIcon #fIcon
Se0 f49 inParamDecl '<List<java.lang.String> keysToBeDeleted> param;' #txt
Se0 f49 inParamTable 'out.keysToBeDeleted=param.keysToBeDeleted;
' #txt
Se0 f49 outParamDecl '<> result;
' #txt
Se0 f49 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f49 callSignature deleteManyProperties(List<String>) #txt
Se0 f49 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteManyProperties(List&lt;String&gt;)</name>
        <nameStyle>34,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f49 787 43 26 26 14 0 #rect
Se0 f49 @|StartSubIcon #fIcon
Se0 f50 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f50 786 234 28 28 14 0 #rect
Se0 f50 @|AlternativeIcon #fIcon
Se0 f51 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f51 actionTable 'out=in;
' #txt
Se0 f51 actionCode 'import ch.ivy.addon.portalkit.service.ServerService;

ServerService service = new ServerService();
in.servers = new java.util.ArrayList();
in.servers.addAll(service.findAll());' #txt
Se0 f51 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get portal server list</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f51 782 108 36 24 20 -2 #rect
Se0 f51 @|StepIcon #fIcon
Se0 f52 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f52 processCall SynchronizeDataProcesses/SynchronizingTriggerProcess:deleteManyProperties(ch.ivy.addon.portalkit.persistence.domain.Server,List<String>) #txt
Se0 f52 doCall true #txt
Se0 f52 requestActionDecl '<ch.ivy.addon.portalkit.persistence.domain.Server server,List<java.lang.String> keys> param;
' #txt
Se0 f52 requestMappingAction 'param.server=in.servers.get(in.counter);
param.keys=in.keysToBeDeleted;
' #txt
Se0 f52 responseActionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f52 responseMappingAction 'out=in;
' #txt
Se0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete properties</name>
        <nameStyle>17,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f52 910 380 36 24 19 -2 #rect
Se0 f52 @|TriggerIcon #fIcon
Se0 f53 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f53 actionTable 'out=in;
' #txt
Se0 f53 actionCode in.counter++; #txt
Se0 f53 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>increase counter</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f53 910 284 36 24 20 -2 #rect
Se0 f53 @|StepIcon #fIcon
Se0 f54 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f54 actionTable 'out=in;
' #txt
Se0 f54 actionCode 'in.counter = 0;' #txt
Se0 f54 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init counter</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f54 782 172 36 24 20 -2 #rect
Se0 f54 @|StepIcon #fIcon
Se0 f55 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f55 786 442 28 28 14 0 #rect
Se0 f55 @|AlternativeIcon #fIcon
Se0 f56 expr out #txt
Se0 f56 800 132 800 172 #arcP
Se0 f57 expr out #txt
Se0 f57 800 196 800 234 #arcP
Se0 f58 expr out #txt
Se0 f58 928 380 928 308 #arcP
Se0 f59 expr in #txt
Se0 f59 800 262 800 442 #arcP
Se0 f60 expr out #txt
Se0 f60 928 284 814 248 #arcP
Se0 f60 1 928 248 #addKink
Se0 f60 0 0.9847272945456741 0 0 #arcLabel
Se0 f61 expr out #txt
Se0 f61 800 69 800 108 #arcP
Se0 f62 expr in #txt
Se0 f62 outCond 'in.servers.size() - in.counter < 1' #txt
Se0 f62 800 470 800 523 #arcP
Se0 f63 expr in #txt
Se0 f63 814 456 928 404 #arcP
Se0 f63 1 928 456 #addKink
Se0 f63 1 0.37512823390828437 0 0 #arcLabel
Se0 f64 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f64 processCall SynchronizeDataProcesses/SynchronizingTriggerProcess:deleteByPrefixThenUpdate(ch.ivy.addon.portalkit.persistence.domain.Server,List<ch.ivy.ws.addon.CustomPropertyPair>,String) #txt
Se0 f64 doCall true #txt
Se0 f64 requestActionDecl '<ch.ivy.addon.portalkit.persistence.domain.Server server,List<ch.ivy.ws.addon.CustomPropertyPair> customPropertyPairs,java.lang.String keyPrefix> param;
' #txt
Se0 f64 requestMappingAction 'param.server=in.servers.get(in.counter);
param.customPropertyPairs=in.customPropertyPairs;
param.keyPrefix=in.keyPrefixToBeDeleted;
' #txt
Se0 f64 responseActionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f64 responseMappingAction 'out=in;
' #txt
Se0 f64 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete by prefix
then update property</name>
        <nameStyle>37,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f64 1621 378 36 24 20 -2 #rect
Se0 f64 @|TriggerIcon #fIcon
Se0 f65 inParamDecl '<List<ch.ivy.ws.addon.CustomPropertyPair> customPropertyPairs,java.lang.String keyPrefixToBeDeleted> param;' #txt
Se0 f65 inParamTable 'out.customPropertyPairs=param.customPropertyPairs;
out.keyPrefixToBeDeleted=param.keyPrefixToBeDeleted;
' #txt
Se0 f65 outParamDecl '<> result;
' #txt
Se0 f65 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f65 callSignature deleteThenUpdateToAllServer(List<ch.ivy.ws.addon.CustomPropertyPair>,String) #txt
Se0 f65 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteByPrefixThenUpdateToAllServer(String, List&lt;CustomPropertyPair&gt;)</name>
        <nameStyle>69,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f65 1498 41 26 26 14 0 #rect
Se0 f65 @|StartSubIcon #fIcon
Se0 f66 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f66 actionTable 'out=in;
' #txt
Se0 f66 actionCode 'in.counter = 0;' #txt
Se0 f66 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f66 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init counter</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f66 1493 170 36 24 20 -2 #rect
Se0 f66 @|StepIcon #fIcon
Se0 f67 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f67 1497 440 28 28 14 0 #rect
Se0 f67 @|AlternativeIcon #fIcon
Se0 f68 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f68 actionTable 'out=in;
' #txt
Se0 f68 actionCode in.counter++; #txt
Se0 f68 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>increase counter</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f68 1621 282 36 24 20 -2 #rect
Se0 f68 @|StepIcon #fIcon
Se0 f69 actionDecl 'ch.ivy.add.portalkit.synchronization.SynchronizingData out;
' #txt
Se0 f69 actionTable 'out=in;
' #txt
Se0 f69 actionCode 'import ch.ivy.addon.portalkit.service.ServerWorkingOnDetector;
import ch.ivy.addon.portalkit.persistence.domain.Server;
import ch.ivy.addon.portalkit.service.ServerService;

ServerService service = new ServerService();
in.servers = new java.util.ArrayList();
List<Server> allServers = service.findAll();
ServerWorkingOnDetector serverWorkingOnDetector = new ServerWorkingOnDetector();
Server serverWorkingOn = serverWorkingOnDetector.getServerWorkingOn();
for (Server server : allServers) {
	if (!server.getId().equals(serverWorkingOn.getId())) {
		in.servers.add(server);
	}
}' #txt
Se0 f69 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get portal server list</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Se0 f69 1493 106 36 24 20 -2 #rect
Se0 f69 @|StepIcon #fIcon
Se0 f70 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f70 1497 232 28 28 14 0 #rect
Se0 f70 @|AlternativeIcon #fIcon
Se0 f71 type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
Se0 f71 1498 521 26 26 14 0 #rect
Se0 f71 @|EndSubIcon #fIcon
Se0 f72 expr in #txt
Se0 f72 1511 260 1511 440 #arcP
Se0 f73 expr in #txt
Se0 f73 outCond 'in.servers.size() - in.counter < 1' #txt
Se0 f73 1511 468 1511 521 #arcP
Se0 f74 expr out #txt
Se0 f74 1511 67 1511 106 #arcP
Se0 f75 expr out #txt
Se0 f75 1511 130 1511 170 #arcP
Se0 f76 expr out #txt
Se0 f76 1639 282 1525 246 #arcP
Se0 f76 1 1639 246 #addKink
Se0 f76 0 0.9847272945456741 0 0 #arcLabel
Se0 f77 expr out #txt
Se0 f77 1639 378 1639 306 #arcP
Se0 f78 expr out #txt
Se0 f78 1511 194 1511 232 #arcP
Se0 f79 expr in #txt
Se0 f79 1525 454 1639 402 #arcP
Se0 f79 1 1639 454 #addKink
Se0 f79 1 0.28541036719852647 0 0 #arcLabel
>Proto Se0 .type ch.ivy.add.portalkit.synchronization.SynchronizingData #txt
>Proto Se0 .processKind CALLABLE_SUB #txt
>Proto Se0 0 0 32 24 18 0 #rect
>Proto Se0 @|BIcon #fIcon
Se0 f5 mainOut f13 tail #connect
Se0 f13 head f12 mainIn #connect
Se0 f12 mainOut f8 tail #connect
Se0 f8 head f7 in #connect
Se0 f3 mainOut f15 tail #connect
Se0 f15 head f14 mainIn #connect
Se0 f7 out f16 tail #connect
Se0 f16 head f9 in #connect
Se0 f14 mainOut f4 tail #connect
Se0 f4 head f7 in #connect
Se0 f0 mainOut f6 tail #connect
Se0 f6 head f5 mainIn #connect
Se0 f9 out f2 tail #connect
Se0 f2 head f1 mainIn #connect
Se0 f9 out f10 tail #connect
Se0 f10 head f3 mainIn #connect
Se0 f23 mainOut f24 tail #connect
Se0 f24 head f18 mainIn #connect
Se0 f18 mainOut f25 tail #connect
Se0 f25 head f17 in #connect
Se0 f20 mainOut f26 tail #connect
Se0 f26 head f21 mainIn #connect
Se0 f17 out f27 tail #connect
Se0 f27 head f22 in #connect
Se0 f21 mainOut f28 tail #connect
Se0 f28 head f17 in #connect
Se0 f11 mainOut f29 tail #connect
Se0 f29 head f23 mainIn #connect
Se0 f22 out f30 tail #connect
Se0 f30 head f19 mainIn #connect
Se0 f22 out f31 tail #connect
Se0 f31 head f20 mainIn #connect
Se0 f39 mainOut f40 tail #connect
Se0 f40 head f34 mainIn #connect
Se0 f34 mainOut f41 tail #connect
Se0 f41 head f38 in #connect
Se0 f37 mainOut f42 tail #connect
Se0 f42 head f33 mainIn #connect
Se0 f38 out f43 tail #connect
Se0 f43 head f35 in #connect
Se0 f33 mainOut f44 tail #connect
Se0 f44 head f38 in #connect
Se0 f32 mainOut f45 tail #connect
Se0 f45 head f39 mainIn #connect
Se0 f35 out f46 tail #connect
Se0 f46 head f36 mainIn #connect
Se0 f35 out f47 tail #connect
Se0 f47 head f37 mainIn #connect
Se0 f51 mainOut f56 tail #connect
Se0 f56 head f54 mainIn #connect
Se0 f54 mainOut f57 tail #connect
Se0 f57 head f50 in #connect
Se0 f52 mainOut f58 tail #connect
Se0 f58 head f53 mainIn #connect
Se0 f50 out f59 tail #connect
Se0 f59 head f55 in #connect
Se0 f53 mainOut f60 tail #connect
Se0 f60 head f50 in #connect
Se0 f49 mainOut f61 tail #connect
Se0 f61 head f51 mainIn #connect
Se0 f55 out f62 tail #connect
Se0 f62 head f48 mainIn #connect
Se0 f55 out f63 tail #connect
Se0 f63 head f52 mainIn #connect
Se0 f69 mainOut f75 tail #connect
Se0 f75 head f66 mainIn #connect
Se0 f66 mainOut f78 tail #connect
Se0 f78 head f70 in #connect
Se0 f64 mainOut f77 tail #connect
Se0 f77 head f68 mainIn #connect
Se0 f70 out f72 tail #connect
Se0 f72 head f67 in #connect
Se0 f68 mainOut f76 tail #connect
Se0 f76 head f70 in #connect
Se0 f65 mainOut f74 tail #connect
Se0 f74 head f69 mainIn #connect
Se0 f67 out f73 tail #connect
Se0 f73 head f71 mainIn #connect
Se0 f67 out f79 tail #connect
Se0 f79 head f64 mainIn #connect
