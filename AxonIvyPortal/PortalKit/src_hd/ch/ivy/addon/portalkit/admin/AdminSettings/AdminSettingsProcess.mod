[Ivy]
150F0B4F8F3CB2CB 7.5.0 #module
>Proto >Proto Collection #zClass
As0 AdminUIProcess Big #zClass
As0 RD #cInfo
As0 #process
Ct0 Component Big #zClass
Ct0 B #cInfo
As0 Ct0 S10 'Sub 1' #zField
As0 @TextInP .type .type #zField
As0 @TextInP .processKind .processKind #zField
As0 @AnnotationInP-0n ai ai #zField
As0 @TextInP .xml .xml #zField
As0 @TextInP .responsibility .responsibility #zField
As0 @UdInit f0 '' #zField
As0 @UdProcessEnd f1 '' #zField
As0 @UdEvent f32 '' #zField
As0 @UdProcessEnd f33 '' #zField
As0 @GridStep f35 '' #zField
As0 @PushWFArc f36 '' #zField
As0 @PushWFArc f34 '' #zField
As0 @UdEvent f37 '' #zField
As0 @UdProcessEnd f38 '' #zField
As0 @UdMethod f44 '' #zField
As0 @UdProcessEnd f45 '' #zField
As0 @GridStep f52 '' #zField
As0 @GridStep f54 '' #zField
As0 @UdMethod f47 '' #zField
As0 @UdProcessEnd f58 '' #zField
As0 @PushWFArc f59 '' #zField
As0 @UdMethod f69 '' #zField
As0 @GridStep f72 '' #zField
As0 @PushWFArc f73 '' #zField
As0 @UdEvent f80 '' #zField
As0 @GridStep f93 '' #zField
As0 @GridStep f113 '' #zField
As0 @Alternative f115 '' #zField
As0 @PushWFArc f116 '' #zField
As0 @GridStep f117 '' #zField
As0 @PushWFArc f118 '' #zField
As0 @UdProcessEnd f119 '' #zField
As0 @PushWFArc f120 '' #zField
As0 @GridStep f156 '' #zField
As0 @UdProcessEnd f157 '' #zField
As0 @UdMethod f158 '' #zField
As0 @PushWFArc f160 '' #zField
As0 @UdEvent f161 '' #zField
As0 @UdProcessEnd f162 '' #zField
As0 @PushWFArc f163 '' #zField
As0 @UdEvent f165 '' #zField
As0 @UdEvent f11 '' #zField
As0 @UdProcessEnd f17 '' #zField
As0 @GridStep f88 '' #zField
As0 @Alternative f170 '' #zField
As0 @UdMethod f176 '' #zField
As0 @UdProcessEnd f177 '' #zField
As0 @GridStep f179 '' #zField
As0 @Alternative f178 '' #zField
As0 @UdEvent f185 '' #zField
As0 @GridStep f202 '' #zField
As0 @GridStep f190 '' #zField
As0 @UdProcessEnd f194 '' #zField
As0 @UdProcessEnd f188 '' #zField
As0 @UdEvent f192 '' #zField
As0 @GridStep f193 '' #zField
As0 @PushWFArc f195 '' #zField
As0 @PushWFArc f197 '' #zField
As0 @PushWFArc f199 '' #zField
As0 @PushWFArc f207 '' #zField
As0 @PushWFArc f208 '' #zField
As0 @Alternative f103 '' #zField
As0 @PushWFArc f206 '' #zField
As0 @GridStep f173 '' #zField
As0 @PushWFArc f171 '' #zField
As0 @GridStep f217 '' #zField
As0 @CallSub f222 '' #zField
As0 @PushWFArc f223 '' #zField
As0 @UdEvent f141 '' #zField
As0 @UdProcessEnd f142 '' #zField
As0 @PushWFArc f189 '' #zField
As0 @PushWFArc f159 '' #zField
As0 @Alternative f196 '' #zField
As0 @PushWFArc f198 '' #zField
As0 @GridStep f205 '' #zField
As0 @PushWFArc f220 '' #zField
As0 @PushWFArc f204 '' #zField
As0 @PushWFArc f211 '' #zField
As0 @Alternative f209 '' #zField
As0 @PushWFArc f213 '' #zField
As0 @PushWFArc f214 '' #zField
As0 @GridStep f212 '' #zField
As0 @UdEvent f200 '' #zField
As0 @UdProcessEnd f216 '' #zField
As0 @GridStep f92 '' #zField
As0 @PushWFArc f53 '' #zField
As0 @GridStep f40 '' #zField
As0 @GridStep f225 '' #zField
As0 @PushWFArc f226 '' #zField
As0 @PushWFArc f227 '' #zField
As0 @GridStep f231 '' #zField
As0 @PushWFArc f180 '' #zField
As0 @PushWFArc f181 '' #zField
As0 @GridStep f15 '' #zField
As0 @PushWFArc f124 '' #zField
As0 @PushWFArc f133 '' #zField
As0 @UdProcessEnd f144 '' #zField
As0 @UdMethod f143 '' #zField
As0 @PushWFArc f145 '' #zField
As0 @UdProcessEnd f48 '' #zField
As0 @PushWFArc f263 '' #zField
As0 @PushWFArc f41 '' #zField
As0 @PushWFArc f265 '' #zField
As0 @UdProcessEnd f286 '' #zField
As0 @UdMethod f74 '' #zField
As0 @UdMethod f285 '' #zField
As0 @UdProcessEnd f75 '' #zField
As0 @PushWFArc f76 '' #zField
As0 @PushWFArc f287 '' #zField
As0 @GridStep f63 '' #zField
As0 @UdProcessEnd f277 '' #zField
As0 @GridStep f276 '' #zField
As0 @UdEvent f67 '' #zField
As0 @UdEvent f278 '' #zField
As0 @PushWFArc f279 '' #zField
As0 @PushWFArc f281 '' #zField
As0 @PushWFArc f29 '' #zField
As0 @UdEvent f9 '' #zField
As0 @GridStep f10 '' #zField
As0 @PushWFArc f66 '' #zField
As0 @UdProcessEnd f91 '' #zField
As0 @PushWFArc f97 '' #zField
As0 @GridStep f55 '' #zField
As0 @UdEvent f18 '' #zField
As0 @PushWFArc f100 '' #zField
As0 @UdProcessEnd f98 '' #zField
As0 @PushWFArc f102 '' #zField
As0 @PushWFArc f5 '' #zField
As0 @GridStep f3 '' #zField
As0 @PushWFArc f27 '' #zField
As0 @PushWFArc f39 '' #zField
As0 @PushWFArc f28 '' #zField
As0 @PushWFArc f19 '' #zField
As0 @PushWFArc f22 '' #zField
As0 @PushWFArc f30 '' #zField
As0 @GridStep f26 '' #zField
As0 @PushWFArc f31 '' #zField
As0 @PushWFArc f6 '' #zField
As0 @GridStep f42 '' #zField
As0 @PushWFArc f43 '' #zField
As0 @PushWFArc f4 '' #zField
As0 @GridStep f46 '' #zField
As0 @PushWFArc f49 '' #zField
As0 @PushWFArc f83 '' #zField
As0 @PushWFArc f84 '' #zField
As0 @PushWFArc f51 '' #zField
As0 @PushWFArc f56 '' #zField
As0 @PushWFArc f57 '' #zField
As0 @CallSub f21 '' #zField
As0 @PushWFArc f60 '' #zField
As0 @PushWFArc f70 '' #zField
As0 @PushWFArc f71 '' #zField
As0 @UdMethod f64 '' #zField
As0 @UdMethod f65 '' #zField
As0 @UdProcessEnd f68 '' #zField
As0 @UdProcessEnd f77 '' #zField
As0 @GridStep f81 '' #zField
As0 @PushWFArc f82 '' #zField
As0 @PushWFArc f78 '' #zField
As0 @GridStep f85 '' #zField
As0 @PushWFArc f86 '' #zField
As0 @PushWFArc f79 '' #zField
As0 @UdMethod f87 '' #zField
As0 @UdProcessEnd f89 '' #zField
As0 @PushWFArc f90 '' #zField
As0 @UdMethod f2 '' #zField
As0 @UdProcessEnd f8 '' #zField
As0 @PushWFArc f61 '' #zField
As0 @UdMethod f7 '' #zField
As0 @UdProcessEnd f12 '' #zField
As0 @GridStep f14 '' #zField
As0 @PushWFArc f16 '' #zField
As0 @PushWFArc f13 '' #zField
As0 @GridStep f20 '' #zField
As0 @Alternative f62 '' #zField
As0 @UdProcessEnd f94 '' #zField
As0 @PushWFArc f95 '' #zField
As0 @PushWFArc f96 '' #zField
As0 @PushWFArc f99 '' #zField
As0 @PushWFArc f101 '' #zField
As0 @GridStep f23 '' #zField
As0 @PushWFArc f24 '' #zField
As0 @PushWFArc f25 '' #zField
>Proto As0 As0 AdminUIProcess #zField
Ct0 @TextInP .type .type #zField
Ct0 @TextInP .processKind .processKind #zField
Ct0 @AnnotationInP-0n ai ai #zField
Ct0 @MessageFlowInP-0n messageIn messageIn #zField
Ct0 @MessageFlowOutP-0n messageOut messageOut #zField
Ct0 @TextInP .xml .xml #zField
Ct0 @TextInP .responsibility .responsibility #zField
Ct0 @GridStep f51 '' #zField
Ct0 @PushTrueWFInG-01 g0 '' #zField
Ct0 @PushWFArc f0 '' #zField
Ct0 @PushTrueWFOutG-01 g1 '' #zField
Ct0 @PushWFArc f1 '' #zField
Ct0 @PushTrueWFInG-01 g2 '' #zField
Ct0 @PushTrueWFInG-01 g3 '' #zField
Ct0 @PushWFArc f2 '' #zField
Ct0 @PushWFArc f3 '' #zField
Ct0 @PushTrueWFInG-01 g4 '' #zField
Ct0 @PushWFArc f4 '' #zField
>Proto Ct0 Ct0 Component #zField
As0 S10 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>invalidate global setting cache</name>
    </language>
</elementInfo>
' #txt
As0 S10 448 1658 176 44 -82 -8 #rect
As0 S10 @|BIcon #fIcon
As0 f0 guid 14B6C3C6330883A7 #txt
As0 f0 method start() #txt
As0 f0 inParameterDecl '<> param;' #txt
As0 f0 inParameterMapAction 'out.resetAllSettings=false;
' #txt
As0 f0 inActionCode '
' #txt
As0 f0 outParameterDecl '<> result;' #txt
As0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f0 190 38 20 20 13 0 #rect
As0 f0 @|UdInitIcon #fIcon
As0 f1 438 38 20 20 13 0 #rect
As0 f1 @|UdProcessEndIcon #fIcon
As0 f32 guid 14B719AF780C56D8 #txt
As0 f32 actionTable 'out=in;
' #txt
As0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addNewApp</name>
        <nameStyle>9,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f32 438 158 20 20 13 0 #rect
As0 f32 @|UdEventIcon #fIcon
As0 f33 438 302 20 20 13 0 #rect
As0 f33 @|UdProcessEndIcon #fIcon
As0 f35 actionTable 'out=in;
' #txt
As0 f35 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;
import ch.ivy.addon.portalkit.enums.ApplicationType;
import ch.ivy.addon.portalkit.ivydata.service.impl.ApplicationService;

in.selectedApp = new Application();
if (in.applicationList.size() > 0) {
	in.selectedApp.menuOrdinal = in.applicationList.get(in.applicationList.size() - 1).menuOrdinal + 1;
} else {
	in.selectedApp.menuOrdinal = 0;
}
in.isAddMode = true;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/addNewApplication");

in.type = ApplicationType.IVY_APPLICATION;
in.displayNameInCurrentLanguage = null;
in.supportedLanguages = new List();
in.ivyApplications = ApplicationService.newInstance().findAll();' #txt
As0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init value</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f35 430 228 36 24 20 -2 #rect
As0 f35 @|StepIcon #fIcon
As0 f36 expr out #txt
As0 f36 448 178 448 228 #arcP
As0 f34 expr out #txt
As0 f34 448 252 448 302 #arcP
As0 f37 guid 14B71AFE89C4BE23 #txt
As0 f37 actionTable 'out=in;
' #txt
As0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>saveApplication</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f37 534 390 20 20 18 -3 #rect
As0 f37 @|UdEventIcon #fIcon
As0 f38 534 1286 20 20 13 0 #rect
As0 f38 @|UdProcessEndIcon #fIcon
As0 f44 guid 14B71B8355747299 #txt
As0 f44 method editApplication(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f44 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.Application application> param;' #txt
As0 f44 inParameterMapAction 'out.selectedApp=param.application;
' #txt
As0 f44 outParameterDecl '<> result;' #txt
As0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editApplication(Application)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f44 886 142 20 20 13 0 #rect
As0 f44 @|UdMethodIcon #fIcon
As0 f45 886 478 20 20 13 0 #rect
As0 f45 @|UdProcessEndIcon #fIcon
As0 f52 actionTable 'out=in;
' #txt
As0 f52 actionCode in.applicationList.remove(in.selectedApp); #txt
As0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove from list</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f52 182 260 36 24 20 -2 #rect
As0 f52 @|StepIcon #fIcon
As0 f54 actionTable 'out=in;
' #txt
As0 f54 actionCode 'import ch.ivy.addon.portalkit.ivydata.service.impl.ApplicationService;
import ch.ivy.addon.portalkit.enums.ApplicationType;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;

in.isAddMode = false;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/editApplication");
if(in.selectedApp.#serverId is initialized){	
	in.type = ApplicationType.IVY_APPLICATION;
}else{	
	in.type = ApplicationType.THIRD_PARTY_APPLICATION;	
}

Locale currentLocale = new Locales().getCurrentLocale();
DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName, currentLocale);
in.displayNameInCurrentLanguage = displayNameAdaptor.getDisplayNameAsString();
in.supportedLanguages = new List();
in.ivyApplications = ApplicationService.newInstance().findAll();' #txt
As0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f54 878 212 36 24 20 -2 #rect
As0 f54 @|StepIcon #fIcon
As0 f47 guid 14B7254A2BFCA52B #txt
As0 f47 method submitDeleteApp(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f47 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.Application application> param;' #txt
As0 f47 inActionCode 'out.selectedApp = param.application;
out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/deleteAppConfirmation");
//out.objToDelete = 2;' #txt
As0 f47 outParameterDecl '<> result;' #txt
As0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitDeleteApp(Application)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f47 2006 150 20 20 13 0 #rect
As0 f47 @|UdMethodIcon #fIcon
As0 f58 2006 246 20 20 13 0 #rect
As0 f58 @|UdProcessEndIcon #fIcon
As0 f59 expr out #txt
As0 f59 2016 170 2016 246 #arcP
As0 f59 0 0.5000000000000001 0 0 #arcLabel
As0 f69 guid 14B77FA478FB87A1 #txt
As0 f69 method editSetting(ch.ivy.addon.portalkit.persistence.domain.GlobalSetting) #txt
As0 f69 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.GlobalSetting setting> param;' #txt
As0 f69 inParameterMapAction 'out.selectedSetting=param.setting;
' #txt
As0 f69 outParameterDecl '<> result;' #txt
As0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editSetting(GlobalSetting)</name>
        <nameStyle>26,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f69 766 1478 20 20 13 0 #rect
As0 f69 @|UdMethodIcon #fIcon
As0 f72 actionTable 'out=in;
' #txt
As0 f72 actionCode 'import ch.ivy.addon.portalkit.statistics.StatisticChartConstants;
import java.util.Arrays;
import ch.ivy.addon.portalkit.enums.GlobalVariable;

in.isAddMode = false;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/editSetting");
GlobalVariable globalVariable = GlobalVariable.valueOf(in.selectedSetting.key);
in.settingInputType = globalVariable.getType();
in.dropDownValues = globalVariable.getOptions();' #txt
As0 f72 security system #txt
As0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f72 716 1556 120 40 -25 -6 #rect
As0 f72 @|StepIcon #fIcon
As0 f73 expr out #txt
As0 f73 776 1498 776 1556 #arcP
As0 f80 guid 14B784950D872997 #txt
As0 f80 actionTable 'out=in;
' #txt
As0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>saveSetting</name>
        <nameStyle>11,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f80 1062 1478 20 20 13 0 #rect
As0 f80 @|UdEventIcon #fIcon
As0 f93 actionTable 'out=in;
' #txt
As0 f93 actionCode 'if (in.isAddMode) {
	in.applicationList.add(in.selectedApp);	
}' #txt
As0 f93 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>add to list (if in addMode)</name>
        <nameStyle>27,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f93 526 1140 36 24 21 -10 #rect
As0 f93 @|StepIcon #fIcon
As0 f113 actionTable 'out=in;
' #txt
As0 f113 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

in.selectedApp.link = in.selectedApp.link.trim();

in.duplicateApp = false;
for (Application app : in.applicationList) {
	if (app.name.equals(in.selectedApp.name)&& app.link.equals(in.selectedApp.link)){
		if (in.isAddMode) {
			in.duplicateApp = true;
			break;
		} else {
				if(!in.selectedApp.id.equals(app.id)){
					in.duplicateApp = true;
					break;
				}
		}
	}
}' #txt
As0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check duplication</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f113 526 500 36 24 20 -2 #rect
As0 f113 @|StepIcon #fIcon
As0 f115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>app exist ?</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f115 530 554 28 28 14 0 #rect
As0 f115 @|AlternativeIcon #fIcon
As0 f116 expr out #txt
As0 f116 544 524 544 554 #arcP
As0 f117 actionTable 'out=in;
' #txt
As0 f117 actionCode 'import ch.ivy.addon.portalkit.enums.ApplicationType;
import javax.faces.application.FacesMessage;
import org.primefaces.component.inputtext.InputText;
import javax.faces.context.FacesContext;

if(in.type == ApplicationType.IVY_APPLICATION) {
	InputText ui = FacesContext.getCurrentInstance().getViewRoot().findComponent(":appDialogForm:portalLink") as InputText;
	ui.valid = false;
} else {
	InputText ui = FacesContext.getCurrentInstance().getViewRoot().findComponent(":appDialogForm:portalLink3rd") as InputText;
	ui.valid = false;
}

FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/duplicatePortalLinkMsg"), null));
FacesContext.getCurrentInstance().validationFailed();' #txt
As0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show message</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f117 678 556 36 24 20 -2 #rect
As0 f117 @|StepIcon #fIcon
As0 f118 expr in #txt
As0 f118 outCond in.duplicateApp #txt
As0 f118 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f118 558 568 678 568 #arcP
As0 f118 0 0.67536365735396 4 -6 #arcLabel
As0 f119 686 606 20 20 13 0 #rect
As0 f119 @|UdProcessEndIcon #fIcon
As0 f120 expr out #txt
As0 f120 696 580 696 606 #arcP
As0 f156 actionTable 'out=in;
' #txt
As0 f156 security system #txt
As0 f156 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set email. absence &#xD;
for selected app</name>
    </language>
</elementInfo>
' #txt
As0 f156 830 980 36 24 20 -2 #rect
As0 f156 @|StepIcon #fIcon
As0 f157 838 1142 20 20 13 0 #rect
As0 f157 @|UdProcessEndIcon #fIcon
As0 f158 guid 14CC66EBC28A586A #txt
As0 f158 method selectApplication() #txt
As0 f158 inParameterDecl '<> param;' #txt
As0 f158 outParameterDecl '<> result;' #txt
As0 f158 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectApplication()</name>
    </language>
</elementInfo>
' #txt
As0 f158 838 903 20 18 13 0 #rect
As0 f158 @|UdMethodIcon #fIcon
As0 f160 expr out #txt
As0 f160 848 921 848 980 #arcP
As0 f161 guid 14CD511E6C573620 #txt
As0 f161 actionTable 'out=in;
' #txt
As0 f161 actionCode '
//reset application name
out.selectedApp.name = "";
' #txt
As0 f161 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetApplicationName</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f161 1086 150 20 20 13 0 #rect
As0 f161 @|UdEventIcon #fIcon
As0 f162 1086 246 20 20 13 0 #rect
As0 f162 @|UdProcessEndIcon #fIcon
As0 f163 expr out #txt
As0 f163 1096 170 1096 246 #arcP
As0 f165 guid 14CD62A3566672A1 #txt
As0 f165 actionTable 'out=in;
' #txt
As0 f165 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f165 190 126 20 20 13 0 #rect
As0 f165 @|UdEventIcon #fIcon
As0 f11 guid 14DE0D8C8D0542F8 #txt
As0 f11 actionTable 'out=in;
' #txt
As0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>appTypeChange</name>
        <nameStyle>13,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f11 190 550 20 20 13 0 #rect
As0 f11 @|UdEventIcon #fIcon
As0 f17 190 782 20 20 13 0 #rect
As0 f17 @|UdProcessEndIcon #fIcon
As0 f88 actionTable 'out=in;
' #txt
As0 f88 actionCode 'in.selectedApp.name = in.selectedApp.displayName;


' #txt
As0 f88 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f88 374 884 36 24 -74 -6 #rect
As0 f88 @|StepIcon #fIcon
As0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>IvyApplication?</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f170 530 746 28 28 14 0 #rect
As0 f170 @|AlternativeIcon #fIcon
As0 f176 guid 14E951D887B4F17A #txt
As0 f176 method onApplicationReorder(org.primefaces.event.ReorderEvent) #txt
As0 f176 inParameterDecl '<org.primefaces.event.ReorderEvent reorderEvent> param;' #txt
As0 f176 inParameterMapAction 'out.reorderEvent=param.reorderEvent;
' #txt
As0 f176 outParameterDecl '<> result;' #txt
As0 f176 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onApplicationReorder(ReorderEvent)</name>
    </language>
</elementInfo>
' #txt
As0 f176 1438 390 20 20 13 0 #rect
As0 f176 @|UdMethodIcon #fIcon
As0 f177 1438 718 20 20 13 0 #rect
As0 f177 @|UdProcessEndIcon #fIcon
As0 f179 actionTable 'out=in;
' #txt
As0 f179 actionCode 'int fromIndex = in.reorderEvent.getFromIndex();
int toIndex = in.reorderEvent.getToIndex();

in.selectedApp = in.applicationList.removeGet(fromIndex);
in.applicationList.add(toIndex, in.selectedApp);

for (int i = 0; i < in.applicationList.size(); i++) {
	in.applicationList.get(i).setMenuOrdinal(i);
}' #txt
As0 f179 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>calculate applications'' order</name>
        <nameStyle>29,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f179 1430 444 36 24 20 -2 #rect
As0 f179 @|StepIcon #fIcon
As0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>an application
is selected</name>
        <nameStyle>26,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f178 2338 882 28 28 -92 -11 #rect
As0 f178 @|AlternativeIcon #fIcon
As0 f185 guid 14E9B7FC56E87E52 #txt
As0 f185 actionTable 'out=in;
' #txt
As0 f185 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>processLanguage</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f185 1326 1094 20 20 13 0 #rect
As0 f185 @|UdEventIcon #fIcon
As0 f202 actionTable 'out=in;
' #txt
As0 f202 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;
import ch.ivy.addon.portalkit.util.Locales;

if (!in.languages.isEmpty()){
	DisplayNameConvertor displayNameConvertor = new DisplayNameConvertor();
	
	for (DisplayName displayName : in.supportedLanguages) {
		displayNameConvertor.add(displayName.locale, displayName.value);
	}
	in.selectedApp.displayName = displayNameConvertor.toJson();
	in.displayNameInCurrentLanguage = displayNameConvertor.toString(new Locales().getCurrentLocale());
}
' #txt
As0 f202 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>process data from GUI</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f202 1318 1149 36 22 20 -2 #rect
As0 f202 @|StepIcon #fIcon
As0 f190 actionTable 'out=in;
' #txt
As0 f190 actionCode 'import ch.ivy.addon.portalkit.loader.ApplicationMultiLanguageNameLoader;
import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;

if(in.isAddMode){
	in.supportedLanguages = new ApplicationMultiLanguageNameLoader().currentDisplayName(in.displayNameInCurrentLanguage)
																									 .currentDisplayNames(in.supportedLanguages)
																									 .supportedLanguages(in.languages)
																									 .load();
} else {
	java.util.Locale currentLocale = new Locales().getCurrentLocale();
	DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName, currentLocale);
	java.util.Map displayNames = displayNameAdaptor.getDisplayNameAsMap();
	in.supportedLanguages = new ApplicationMultiLanguageNameLoader().currentDisplayName(in.displayNameInCurrentLanguage)
																									 .currentDisplayNames(displayNames)
																									 .supportedLanguages(in.languages)
																									 .load();
}
' #txt
As0 f190 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get supported languages </name>
        <nameStyle>24,5
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f190 2334 1068 36 24 -168 -6 #rect
As0 f190 @|StepIcon #fIcon
As0 f194 1326 1214 20 20 13 0 #rect
As0 f194 @|UdProcessEndIcon #fIcon
As0 f188 2342 1262 20 20 13 0 #rect
As0 f188 @|UdProcessEndIcon #fIcon
As0 f192 guid 14E9B7FC57888C9E #txt
As0 f192 actionTable 'out=in;
' #txt
As0 f192 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getLanguageList</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f192 2342 814 20 20 13 0 #rect
As0 f192 @|UdEventIcon #fIcon
As0 f193 actionTable 'out=in;
' #txt
As0 f193 actionCode 'ivy.log.error("selected application is null");' #txt
As0 f193 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>write error log</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f193 2494 884 36 24 -38 14 #rect
As0 f193 @|StepIcon #fIcon
As0 f195 expr out #txt
As0 f195 2352 834 2352 882 #arcP
As0 f197 expr in #txt
As0 f197 outCond 'in.#selectedApp == null' #txt
As0 f197 2366 896 2494 896 #arcP
As0 f199 expr out #txt
As0 f199 2512 908 2362 1272 #arcP
As0 f199 1 2512 1272 #addKink
As0 f199 1 0.43856392005896616 0 0 #arcLabel
As0 f207 expr out #txt
As0 f207 1336 1114 1336 1149 #arcP
As0 f208 expr out #txt
As0 f208 1336 1171 1336 1214 #arcP
As0 f103 530 1010 28 28 14 0 #rect
As0 f103 @|AlternativeIcon #fIcon
As0 f206 expr out #txt
As0 f206 392 908 530 1024 #arcP
As0 f206 1 392 1024 #addKink
As0 f206 1 0.09861351404025685 0 0 #arcLabel
As0 f173 actionTable 'out=in;
' #txt
As0 f173 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import java.util.Map;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;

DisplayNameConvertor convertor = new DisplayNameConvertor();

if (in.supportedLanguages.isEmpty()) {
	if (!in.languages.isEmpty()) {
		for (String language : in.languages) {
			convertor.add(new Locale(language),in.displayNameInCurrentLanguage);
		}
	}else {
		convertor.add(new Locales().getCurrentLocale(),in.displayNameInCurrentLanguage);
	}
	
}else {
	for (DisplayName displayName: in.supportedLanguages){
		if(displayName.value.isEmpty()){
			displayName.value = in.displayNameInCurrentLanguage;
		}
		convertor.add(displayName.locale,displayName.value);
	}
}

in.selectedApp.displayName = convertor.toJson();' #txt
As0 f173 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>prepair displayname</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f173 526 684 36 24 -63 11 #rect
As0 f173 @|StepIcon #fIcon
As0 f171 expr out #txt
As0 f171 544 708 544 746 #arcP
As0 f217 actionTable 'out=in;
' #txt
As0 f217 actionCode 'import ch.ivy.addon.portalkit.enums.ApplicationType;
import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;

if (in.type == ApplicationType.IVY_APPLICATION){
	in.languages = ApplicationMultiLanguage.getThirdPartySupportedLanguage();
}


' #txt
As0 f217 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load supported languages
for 3rd party application</name>
        <nameStyle>50,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f217 182 668 36 24 -37 18 #rect
As0 f217 @|StepIcon #fIcon
As0 f222 processCall 'Ivy Data Processes/LanguageService:loadSupportedLanguages(String)' #txt
As0 f222 requestActionDecl '<String appName> param;' #txt
As0 f222 requestMappingAction 'param.appName=in.selectedApp.name;
' #txt
As0 f222 responseActionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f222 responseMappingAction 'out=in;
out.errors=result.errors;
out.languages=result.supportedLanguge.supportedLanguages;
' #txt
As0 f222 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LanguageService</name>
    </language>
</elementInfo>
' #txt
As0 f222 830 1052 36 24 25 -10 #rect
As0 f222 @|CallSubIcon #fIcon
As0 f223 expr out #txt
As0 f223 848 1004 848 1052 #arcP
As0 f141 guid 14CC18BB4746B6E3 #txt
As0 f141 actionTable 'out=in;
' #txt
As0 f141 actionCode 'import ch.ivy.addon.portalkit.ivydata.bo.IvyApplication;
IvyApplication ivyApplication = event.getSource() as IvyApplication;
in.selectedApp.name = ivyApplication.name;' #txt
As0 f141 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectApplication</name>
    </language>
</elementInfo>
' #txt
As0 f141 1854 646 20 20 13 0 #rect
As0 f141 @|UdEventIcon #fIcon
As0 f142 1854 734 20 20 13 0 #rect
As0 f142 @|UdProcessEndIcon #fIcon
As0 f189 expr out #txt
As0 f189 200 692 200 782 #arcP
As0 f189 0 0.5311048610309348 0 0 #arcLabel
As0 f159 expr out #txt
As0 f159 848 1076 848 1142 #arcP
As0 f196 882 282 28 28 14 0 #rect
As0 f196 @|AlternativeIcon #fIcon
As0 f198 expr out #txt
As0 f198 896 236 896 282 #arcP
As0 f205 actionTable 'out=in;
' #txt
As0 f205 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;


in.languages = ApplicationMultiLanguage.getThirdPartySupportedLanguage();


' #txt
As0 f205 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load supported languages
for 3rd party application</name>
        <nameStyle>50,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f205 798 388 36 24 -92 15 #rect
As0 f205 @|StepIcon #fIcon
As0 f220 expr in #txt
As0 f220 882 296 816 388 #arcP
As0 f220 1 816 296 #addKink
As0 f220 0 0.9318339403871162 0 0 #arcLabel
As0 f204 expr out #txt
As0 f204 816 412 886 488 #arcP
As0 f204 1 816 488 #addKink
As0 f204 0 0.7997648611494669 0 0 #arcLabel
As0 f211 expr in #txt
As0 f211 outCond in.isAddMode #txt
As0 f211 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f211 544 646 544 684 #arcP
As0 f211 0 0.21052631578947367 -12 0 #arcLabel
As0 f209 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is add mode?</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f209 530 618 28 28 -91 -6 #rect
As0 f209 @|AlternativeIcon #fIcon
As0 f213 expr in #txt
As0 f213 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f213 558 632 623 684 #arcP
As0 f213 1 623 632 #addKink
As0 f213 0 0.12121212121212122 0 -10 #arcLabel
As0 f214 expr out #txt
As0 f214 623 708 558 760 #arcP
As0 f214 1 623 760 #addKink
As0 f214 0 0.8041048185752951 0 0 #arcLabel
As0 f212 actionTable 'out=in;
' #txt
As0 f212 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;
import java.util.Map;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;

Locale currentLocale = new Locales().getCurrentLocale();
DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName,currentLocale);
Map displayNameMap = displayNameAdaptor.getDisplayNameAsMap();

if (in.supportedLanguages.isEmpty()) {
	if (!in.languages.isEmpty()) {
		for (String language : in.languages) {
			if(displayNameMap.get(language).toString().isEmpty()){
				displayNameAdaptor.add(new Locale(language),in.displayNameInCurrentLanguage);
			}
		}
	}else {
		displayNameAdaptor.add(currentLocale,in.displayNameInCurrentLanguage);
	}
}else {
	for (DisplayName displayName: in.supportedLanguages){
		if(displayName.value.isEmpty()){
			displayName.value = in.displayNameInCurrentLanguage;
		}
		displayNameAdaptor.add(displayName.locale,displayName.value);
	}
}

displayNameAdaptor.add(currentLocale,in.displayNameInCurrentLanguage);
in.selectedApp.displayName = displayNameAdaptor.toJson();' #txt
As0 f212 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update current language</name>
        <nameStyle>23,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f212 607 684 35 24 -17 12 #rect
As0 f212 @|StepIcon #fIcon
As0 f200 guid 14ED7B5BE39B1F96 #txt
As0 f200 actionTable 'out=in;
' #txt
As0 f200 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancelApplicationDialog</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f200 1894 846 20 20 14 -1 #rect
As0 f200 @|UdEventIcon #fIcon
As0 f216 1894 950 20 20 13 0 #rect
As0 f216 @|UdProcessEndIcon #fIcon
As0 f92 actionTable 'out=in;
' #txt
As0 f92 actionCode 'import ch.ivy.addon.portalkit.service.RegisteredApplicationService;

RegisteredApplicationService applicationService = new RegisteredApplicationService();
applicationService.delete(in.selectedApp);' #txt
As0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete application</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f92 182 196 36 24 20 -2 #rect
As0 f92 @|StepIcon #fIcon
As0 f53 expr out #txt
As0 f53 200 220 200 260 #arcP
As0 f40 actionTable 'out=in;
' #txt
As0 f40 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

import ch.ivy.addon.portalkit.service.RegisteredApplicationService;

RegisteredApplicationService applicationService = new RegisteredApplicationService();
in.selectedApp = applicationService.save(in.selectedApp) as Application;' #txt
As0 f40 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save application</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f40 526 1084 36 24 20 -2 #rect
As0 f40 @|StepIcon #fIcon
As0 f225 actionTable 'out=in;
' #txt
As0 f225 actionCode 'import ch.ivy.addon.portalkit.service.RegisteredApplicationService;

RegisteredApplicationService applicationService = new RegisteredApplicationService();
in.applicationList = applicationService.findAll();' #txt
As0 f225 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get all applications</name>
        <nameStyle>20,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f225 1886 900 36 24 20 -2 #rect
As0 f225 @|StepIcon #fIcon
As0 f226 expr out #txt
As0 f226 1904 866 1904 900 #arcP
As0 f227 expr out #txt
As0 f227 1904 924 1904 950 #arcP
As0 f231 actionTable 'out=in;
' #txt
As0 f231 actionCode 'import ch.ivy.addon.portalkit.service.RegisteredApplicationService;

RegisteredApplicationService applicationService = new RegisteredApplicationService();
in.applicationList = applicationService.saveAll(in.applicationList);' #txt
As0 f231 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save all applications</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f231 1430 508 36 24 20 -2 #rect
As0 f231 @|StepIcon #fIcon
As0 f180 expr out #txt
As0 f180 1448 410 1448 444 #arcP
As0 f181 expr out #txt
As0 f181 1448 468 1448 508 #arcP
As0 f15 actionTable 'out=in;
' #txt
As0 f15 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.GlobalSetting;

import ch.ivy.addon.portalkit.service.GlobalSettingService;

GlobalSettingService globalSettingService= new GlobalSettingService();
in.selectedSetting = globalSettingService.save(in.selectedSetting) as GlobalSetting;' #txt
As0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save global setting</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f15 1008 1556 128 40 -53 -4 #rect
As0 f15 @|StepIcon #fIcon
As0 f124 expr out #txt
As0 f124 1864 666 1864 734 #arcP
As0 f133 expr in #txt
As0 f133 530 760 392 884 #arcP
As0 f133 1 392 760 #addKink
As0 f133 0 0.8007004654459767 0 0 #arcLabel
As0 f144 1237 245 22 22 14 0 #rect
As0 f144 @|UdProcessEndIcon #fIcon
As0 f143 guid 1503CBAF85EC7EE8 #txt
As0 f143 method getAppNameInCurrentLocale(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f143 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.Application application> param;' #txt
As0 f143 inActionCode 'out.application = param.application;' #txt
As0 f143 outParameterDecl '<String name> result;' #txt
As0 f143 outActionCode 'import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;
result.name = ApplicationMultiLanguage.getDisplayNameInCurrentLocale(in.application);' #txt
As0 f143 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAppNameInCurrentLocale(Application)</name>
        <nameStyle>38,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f143 1237 149 22 22 14 0 #rect
As0 f143 @|UdMethodIcon #fIcon
As0 f145 expr out #txt
As0 f145 1248 171 1248 245 #arcP
As0 f48 190 454 20 20 13 0 #rect
As0 f48 @|UdProcessEndIcon #fIcon
As0 f263 expr out #txt
As0 f263 896 162 896 212 #arcP
As0 f41 expr out #txt
As0 f41 544 1108 544 1140 #arcP
As0 f265 expr out #txt
As0 f265 210 48 438 48 #arcP
As0 f265 0 0.4862440103228913 0 0 #arcLabel
As0 f286 1782 246 20 20 13 0 #rect
As0 f286 @|UdProcessEndIcon #fIcon
As0 f74 guid 163DD18A566F4B85 #txt
As0 f74 method submitResetSetting(ch.ivy.addon.portalkit.persistence.domain.GlobalSetting) #txt
As0 f74 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.GlobalSetting setting> param;' #txt
As0 f74 inActionCode 'out.selectedSetting = param.setting;
out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/resetSettingConfirmation");
out.resetAllSettings = false;' #txt
As0 f74 outParameterDecl '<> result;' #txt
As0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitResetSetting(GlobalSetting)</name>
    </language>
</elementInfo>
' #txt
As0 f74 1510 150 20 20 13 0 #rect
As0 f74 @|UdMethodIcon #fIcon
As0 f285 guid 163DD18A56815DFE #txt
As0 f285 method submitResetAllSettings() #txt
As0 f285 inParameterDecl '<> param;' #txt
As0 f285 inActionCode 'out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/resetAllSettingsConfirmation");
out.resetAllSettings = true;' #txt
As0 f285 outParameterDecl '<> result;' #txt
As0 f285 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitResetAllSettings()</name>
    </language>
</elementInfo>
' #txt
As0 f285 1782 150 20 20 13 0 #rect
As0 f285 @|UdMethodIcon #fIcon
As0 f75 1510 246 20 20 13 0 #rect
As0 f75 @|UdProcessEndIcon #fIcon
As0 f76 expr out #txt
As0 f76 1520 170 1520 246 #arcP
As0 f287 expr out #txt
As0 f287 1792 170 1792 246 #arcP
As0 f63 actionTable 'out=in;
' #txt
As0 f63 actionCode 'import ch.ivy.addon.portalkit.service.GlobalSettingService;
GlobalSettingService globalSettingService = new GlobalSettingService();
globalSettingService.resetGlobalSetting(in.selectedSetting.getKey());
in.selectedSetting.setValueToDefault();' #txt
As0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reset selected setting</name>
    </language>
</elementInfo>
' #txt
As0 f63 232 1554 128 44 -59 -8 #rect
As0 f63 @|StepIcon #fIcon
As0 f277 523 1763 26 26 0 12 #rect
As0 f277 @|UdProcessEndIcon #fIcon
As0 f276 actionTable 'out=in;
' #txt
As0 f276 actionCode 'import ch.ivy.addon.portalkit.enums.GlobalVariable;
import ch.ivy.addon.portalkit.service.GlobalSettingService;
GlobalSettingService globalSettingService = new GlobalSettingService();
int i = 0;
for (GlobalVariable globalVariable : GlobalVariable.values()) {
	globalSettingService.resetGlobalSetting(globalVariable.toString());
	in.settingList.get(i).setValueToDefault();
	i++;
}' #txt
As0 f276 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reset all settings</name>
    </language>
</elementInfo>
' #txt
As0 f276 480 1554 112 44 -45 -8 #rect
As0 f276 @|StepIcon #fIcon
As0 f67 guid 163DD1F145199579 #txt
As0 f67 actionTable 'out=in;
' #txt
As0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetValue</name>
        <nameStyle>10,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f67 283 1475 26 26 -30 -33 #rect
As0 f67 @|UdEventIcon #fIcon
As0 f278 guid 163DD1F1451A5EB6 #txt
As0 f278 actionTable 'out=in;
' #txt
As0 f278 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetValues</name>
        <nameStyle>11,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f278 523 1475 26 26 -37 -32 #rect
As0 f278 @|UdEventIcon #fIcon
As0 f279 expr out #txt
As0 f279 536 1501 536 1554 #arcP
As0 f281 expr out #txt
As0 f281 296 1501 296 1554 #arcP
As0 f29 expr out #txt
As0 f29 1072 1498 1072 1556 #arcP
As0 f9 guid 1640186953392B88 #txt
As0 f9 actionTable 'out=in;
' #txt
As0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initAdminSettingsData</name>
        <nameStyle>21,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f9 1387 1483 26 26 -59 15 #rect
As0 f9 @|UdEventIcon #fIcon
As0 f10 actionTable 'out=in;
' #txt
As0 f10 actionCode 'import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.service.AnnouncementService;
import org.apache.commons.collections.CollectionUtils;
import ch.ivy.addon.portalkit.service.GlobalSettingService;
import ch.ivy.addon.portalkit.comparator.ApplicationIndexAscendingComparator;
import java.util.Collections;
import ch.ivy.addon.portalkit.service.RegisteredApplicationService;

// Application tab
RegisteredApplicationService applicationService = new RegisteredApplicationService();
in.applicationList  = applicationService.findAll();
Collections.sort(in.applicationList, new ApplicationIndexAscendingComparator());	

// Setting tab
in.settingTabOpened = false;
GlobalSettingService globalSettingService = new GlobalSettingService();
in.settingList = globalSettingService.findAllGlobalSetting();
in.filteredSettingList = in.settingList;

// Announcement tab
in.announcements = AnnouncementService.getInstance().getAnnouncements();
in.isAnnouncementActivated = AnnouncementService.getInstance().isAnnouncementActivated();
FacesContext.getCurrentInstance().addMessage("adminui:adminTabView:announcement-table", new FacesMessage(FacesMessage.SEVERITY_INFO, 
	ivy.cms.co(in.isAnnouncementActivated ? "/ch.ivy.addon.portalkit.ui.jsf/adminSettings/announcement/announcementsEnabled"
	: "/ch.ivy.addon.portalkit.ui.jsf/adminSettings/announcement/announcementsDisabled"), null));
' #txt
As0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init data</name>
    </language>
</elementInfo>
' #txt
As0 f10 1344 1594 112 44 -21 -8 #rect
As0 f10 @|StepIcon #fIcon
As0 f66 expr out #txt
As0 f66 1400 1509 1400 1594 #arcP
As0 f91 1387 1691 26 26 0 12 #rect
As0 f91 @|UdProcessEndIcon #fIcon
As0 f97 expr out #txt
As0 f97 1400 1638 1400 1691 #arcP
As0 f55 actionTable 'out=in;
' #txt
As0 f55 actionCode 'import org.primefaces.PrimeFaces;

if (in.settingTabOpened) {
	PrimeFaces.current().executeScript("PF(''settingTable'').clearFilters()");
}' #txt
As0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>clear filter</name>
    </language>
</elementInfo>
' #txt
As0 f55 1520 1594 112 44 -26 -8 #rect
As0 f55 @|StepIcon #fIcon
As0 f18 guid 164024E1B1165F19 #txt
As0 f18 actionTable 'out=in;
' #txt
As0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>clearSettingTableFilter</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f18 1563 1483 26 26 -61 15 #rect
As0 f18 @|UdEventIcon #fIcon
As0 f100 expr out #txt
As0 f100 1576 1509 1576 1594 #arcP
As0 f98 1563 1691 26 26 0 12 #rect
As0 f98 @|UdProcessEndIcon #fIcon
As0 f102 expr out #txt
As0 f102 1576 1638 1576 1691 #arcP
As0 f5 expr in #txt
As0 f5 544 1038 544 1084 #arcP
As0 f3 actionTable 'out=in;
' #txt
As0 f3 actionCode in.selectedApp.setServerId(Long.valueOf(1)); #txt
As0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set local host server id</name>
    </language>
</elementInfo>
' #txt
As0 f3 480 882 128 44 -61 -8 #rect
As0 f3 @|StepIcon #fIcon
As0 f27 expr out #txt
As0 f27 544 926 544 1010 #arcP
As0 f39 expr out #txt
As0 f39 200 570 200 668 #arcP
As0 f28 expr in #txt
As0 f28 outCond 'in.type == ch.ivy.addon.portalkit.enums.ApplicationType.IVY_APPLICATION' #txt
As0 f28 896 310 896 478 #arcP
As0 f28 0 0.5226032559978508 0 0 #arcLabel
As0 f19 expr in #txt
As0 f19 outCond '!in.duplicateApp	' #txt
As0 f19 544 582 544 618 #arcP
As0 f22 expr out #txt
As0 f22 200 146 200 196 #arcP
As0 f30 expr in #txt
As0 f30 outCond 'in.type == ch.ivy.addon.portalkit.enums.ApplicationType.IVY_APPLICATION' #txt
As0 f30 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f30 544 774 544 882 #arcP
As0 f30 0 0.2857142857142857 -22 0 #arcLabel
As0 f26 actionTable 'out=in;
' #txt
As0 f26 actionCode 'import ch.ivy.addon.portalkit.constant.IvyCacheIdentifier;
import ch.ivy.addon.portalkit.service.IvyCacheService;

IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_BASED_ON_CONFIGURATION);
IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_USER_CAN_WORK_ON);' #txt
As0 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Invalidate cache</name>
    </language>
</elementInfo>
' #txt
As0 f26 144 346 112 44 -44 -8 #rect
As0 f26 @|StepIcon #fIcon
As0 f31 expr out #txt
As0 f31 200 284 200 346 #arcP
As0 f6 expr out #txt
As0 f6 200 390 200 454 #arcP
As0 f42 actionTable 'out=in;
' #txt
As0 f42 actionCode 'import ch.ivy.addon.portalkit.constant.IvyCacheIdentifier;
import ch.ivy.addon.portalkit.service.IvyCacheService;

IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_BASED_ON_CONFIGURATION);
IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_USER_CAN_WORK_ON);
' #txt
As0 f42 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Invalidate cache</name>
    </language>
</elementInfo>
' #txt
As0 f42 488 1194 112 44 -44 -8 #rect
As0 f42 @|StepIcon #fIcon
As0 f43 expr out #txt
As0 f43 544 1164 544 1194 #arcP
As0 f4 expr out #txt
As0 f4 544 1238 544 1286 #arcP
As0 f46 actionTable 'out=in;
' #txt
As0 f46 actionCode 'import ch.ivy.addon.portalkit.constant.IvyCacheIdentifier;
import ch.ivy.addon.portalkit.service.IvyCacheService;

IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_BASED_ON_CONFIGURATION);
IvyCacheService.newInstance().invalidateSessionGroup(IvyCacheIdentifier.ONLINE_APPLICATIONS_USER_CAN_WORK_ON);' #txt
As0 f46 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Invalidate cache</name>
    </language>
</elementInfo>
' #txt
As0 f46 1392 578 112 44 -44 -8 #rect
As0 f46 @|StepIcon #fIcon
As0 f49 expr out #txt
As0 f49 1448 532 1448 578 #arcP
As0 f83 expr out #txt
As0 f83 536 1598 536 1658 #arcP
As0 f84 536 1702 536 1763 #arcP
As0 f51 expr out #txt
As0 f51 347 1598 536 1658 #arcP
As0 f51 0 0.5450787410391172 0 0 #arcLabel
As0 f56 expr out #txt
As0 f56 730 1596 536 1658 #arcP
As0 f56 0 0.5719563097660192 0 0 #arcLabel
As0 f57 expr out #txt
As0 f57 1072 1596 624 1680 #arcP
As0 f57 1 1072 1680 #addKink
As0 f57 1 0.40112042914479545 0 0 #arcLabel
As0 f21 processCall 'Ivy Data Processes/LanguageService:loadSupportedLanguages(String)' #txt
As0 f21 requestActionDecl '<String appName> param;' #txt
As0 f21 requestMappingAction 'param.appName=in.type == ch.ivy.addon.portalkit.enums.ApplicationType.THIRD_PARTY_APPLICATION ? ivy.wf.getApplication().getName() : in.selectedApp.name;
' #txt
As0 f21 responseActionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f21 responseMappingAction 'out=in;
out.errors=result.errors;
out.languages=result.supportedLanguge.supportedLanguages;
' #txt
As0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LanguageService</name>
    </language>
</elementInfo>
' #txt
As0 f21 2296 970 112 44 -48 -8 #rect
As0 f21 @|CallSubIcon #fIcon
As0 f60 expr in #txt
As0 f60 2352 910 2352 970 #arcP
As0 f60 0 0.5000000000000001 0 0 #arcLabel
As0 f70 expr out #txt
As0 f70 2352 1014 2352 1068 #arcP
As0 f70 0 0.5000000000000001 0 0 #arcLabel
As0 f71 expr out #txt
As0 f71 2352 1092 2352 1262 #arcP
As0 f64 guid 16A29A0E1F97DE40 #txt
As0 f64 method publishAnnouncement() #txt
As0 f64 inParameterDecl '<> param;' #txt
As0 f64 outParameterDecl '<> result;' #txt
As0 f64 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>publishAnnouncement()</name>
    </language>
</elementInfo>
' #txt
As0 f64 83 1931 26 26 -59 -35 #rect
As0 f64 @|UdMethodIcon #fIcon
As0 f65 guid 16A29A0F2F82745C #txt
As0 f65 method depublishAnnouncement() #txt
As0 f65 inParameterDecl '<> param;' #txt
As0 f65 outParameterDecl '<> result;' #txt
As0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>depublishAnnouncement()</name>
    </language>
</elementInfo>
' #txt
As0 f65 371 1931 26 26 -66 -35 #rect
As0 f65 @|UdMethodIcon #fIcon
As0 f68 83 2099 26 26 0 12 #rect
As0 f68 @|UdProcessEndIcon #fIcon
As0 f77 371 2099 26 26 0 12 #rect
As0 f77 @|UdProcessEndIcon #fIcon
As0 f81 actionTable 'out=in;
' #txt
As0 f81 actionCode 'import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.service.AnnouncementService;
AnnouncementService service = AnnouncementService.getInstance();
service.saveAll(in.announcements);
service.activateAnnouncement();
out.isAnnouncementActivated = true;
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, 
	ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/announcement/announcementsEnabled"), null));
' #txt
As0 f81 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>publish</name>
    </language>
</elementInfo>
' #txt
As0 f81 40 2018 112 44 -20 -8 #rect
As0 f81 @|StepIcon #fIcon
As0 f82 expr out #txt
As0 f82 96 1957 96 2018 #arcP
As0 f78 expr out #txt
As0 f78 96 2062 96 2099 #arcP
As0 f85 actionTable 'out=in;
' #txt
As0 f85 actionCode 'import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.service.AnnouncementService;
AnnouncementService service = AnnouncementService.getInstance();
service.deactivateAnnouncement();
out.isAnnouncementActivated = false;
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, 
	ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/announcement/announcementsDisabled"), null));
' #txt
As0 f85 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>depublish</name>
    </language>
</elementInfo>
' #txt
As0 f85 328 2018 112 44 -27 -8 #rect
As0 f85 @|StepIcon #fIcon
As0 f86 expr out #txt
As0 f86 384 1957 384 2018 #arcP
As0 f79 expr out #txt
As0 f79 384 2062 384 2099 #arcP
As0 f87 guid 16A33CB19C2E90CF #txt
As0 f87 method isApplicationDefaultEmailLanguage(String) #txt
As0 f87 inParameterDecl '<String language> param;' #txt
As0 f87 inActionCode 'import ch.ivy.addon.portalkit.service.AnnouncementService;
out.isDefaultApplicationLanguage = AnnouncementService.getInstance().isDefaultApplicationLanguage(param.language);' #txt
As0 f87 outParameterDecl '<Boolean result> result;' #txt
As0 f87 outParameterMapAction 'result.result=in.isDefaultApplicationLanguage;
' #txt
As0 f87 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isApplicationDefaultEmailLanguage(String)</name>
    </language>
</elementInfo>
' #txt
As0 f87 587 1931 26 26 -113 -36 #rect
As0 f87 @|UdMethodIcon #fIcon
As0 f89 587 2099 26 26 0 12 #rect
As0 f89 @|UdProcessEndIcon #fIcon
As0 f90 expr out #txt
As0 f90 600 1957 600 2099 #arcP
As0 f2 guid 16F55D573C483035 #txt
As0 f2 method onTabChange(org.primefaces.event.TabChangeEvent) #txt
As0 f2 inParameterDecl '<org.primefaces.event.TabChangeEvent tabEvent> param;' #txt
As0 f2 inActionCode 'import org.primefaces.PrimeFaces;
import ch.ivy.addon.portalkit.service.AnnouncementService;
import org.primefaces.component.tabview.TabView;
import org.primefaces.event.TabChangeEvent;

TabChangeEvent tabChangeEvent = param.tabEvent;
TabView tabView = tabChangeEvent.getComponent() as TabView;
out.tabIndexActive = tabView.getChildren().indexOf(tabChangeEvent.getTab());
if (out.tabIndexActive == 1) {
	out.settingTabOpened = true;
	PrimeFaces.current().executeScript("PF(''settingTable'').filter()");
}

' #txt
As0 f2 outParameterDecl '<> result;' #txt
As0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onTabChange(TabChangeEvent)</name>
    </language>
</elementInfo>
' #txt
As0 f2 883 627 26 26 -27 -39 #rect
As0 f2 @|UdMethodIcon #fIcon
As0 f8 883 755 26 26 0 12 #rect
As0 f8 @|UdProcessEndIcon #fIcon
As0 f61 896 653 896 755 #arcP
As0 f7 guid 1705C5F107D1D280 #txt
As0 f7 method usersInApp(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f7 inParameterDecl '<ch.ivy.addon.portalkit.persistence.domain.Application application> param;' #txt
As0 f7 inParameterMapAction 'out.tempApplicationName=param.application.name;
' #txt
As0 f7 outParameterDecl '<> result;' #txt
As0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>usersInApp(Application)</name>
    </language>
</elementInfo>
' #txt
As0 f7 179 851 26 26 -47 -33 #rect
As0 f7 @|UdMethodIcon #fIcon
As0 f12 179 1043 26 26 0 12 #rect
As0 f12 @|UdProcessEndIcon #fIcon
As0 f14 actionTable 'out=in;
' #txt
As0 f14 actionCode 'import ch.ivy.addon.portalkit.ivydata.utils.ServiceUtilities;
in.userLazyDataModel.setApplication(ServiceUtilities.findApp(in.tempApplicationName));' #txt
As0 f14 security system #txt
As0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set application for lazy data model</name>
    </language>
</elementInfo>
' #txt
As0 f14 96 938 192 44 -92 -8 #rect
As0 f14 @|StepIcon #fIcon
As0 f16 192 877 192 938 #arcP
As0 f13 192 982 192 1043 #arcP
As0 f20 actionTable 'out=in;
' #txt
As0 f20 actionCode 'import ch.ivyteam.ivy.environment.Ivy;
import ch.ivy.addon.portalkit.enums.ApplicationType;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivyteam.ivy.checking.CommonFormats;

if (in.type == ApplicationType.IVY_APPLICATION) {
	try {
	  CommonFormats.APPLICATION_PROCESS_MODEL_NAME.checkAndThrow(in.selectedApp.name);
	} catch (RuntimeException ex) {
	  FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, ex.getMessage(), null));
	  FacesContext.getCurrentInstance().validationFailed();
	}
}
' #txt
As0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Validate app name</name>
    </language>
</elementInfo>
' #txt
As0 f20 524 444 40 24 24 -6 #rect
As0 f20 @|StepIcon #fIcon
As0 f62 448 496 32 32 0 16 #rect
As0 f62 @|AlternativeIcon #fIcon
As0 f94 454 542 20 20 13 0 #rect
As0 f94 @|UdProcessEndIcon #fIcon
As0 f95 expr in #txt
As0 f95 outCond javax.faces.context.FacesContext.getCurrentInstance().isValidationFailed() #txt
As0 f95 464 528 464 542 #arcP
As0 f96 524 456 464 496 #arcP
As0 f96 1 464 456 #addKink
As0 f96 0 0.6816042505180657 0 0 #arcLabel
As0 f99 expr in #txt
As0 f99 480 512 526 512 #arcP
As0 f101 expr out #txt
As0 f101 544 410 544 444 #arcP
As0 f23 actionTable 'out=in;
' #txt
As0 f23 actionCode '// Do not store JSF Event in a Html Dialog data field
out.reorderEvent = null;' #txt
As0 f23 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Release JSF Event</name>
    </language>
</elementInfo>
' #txt
As0 f23 1392 650 112 44 -52 -8 #rect
As0 f23 @|StepIcon #fIcon
As0 f24 expr out #txt
As0 f24 1448 622 1448 650 #arcP
As0 f25 1448 694 1448 718 #arcP
>Proto As0 .type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
>Proto As0 .processKind HTML_DIALOG #txt
>Proto As0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
        <swimlaneLabel>Start Method</swimlaneLabel>
        <swimlaneLabel>Application</swimlaneLabel>
        <swimlaneLabel>Global settings</swimlaneLabel>
        <swimlaneLabel>Announcements</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneOrientation>false</swimlaneOrientation>
    <swimlaneSize>112</swimlaneSize>
    <swimlaneSize>1312</swimlaneSize>
    <swimlaneSize>456</swimlaneSize>
    <swimlaneSize>272</swimlaneSize>
    <swimlaneColor gradient="true">-3342337</swimlaneColor>
    <swimlaneColor gradient="true">-10027009</swimlaneColor>
    <swimlaneColor gradient="true">-52429</swimlaneColor>
    <swimlaneColor gradient="true">-3342388</swimlaneColor>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
</elementInfo>
' #txt
>Proto As0 -8 -8 16 16 16 26 #rect
>Proto As0 '' #fIcon
Ct0 f51 actionTable 'out=in;
' #txt
Ct0 f51 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;
import ch.ivy.addon.portalkit.service.RegisteredApplicationService;
import ch.ivy.addon.portalkit.service.IvyCacheService;

IvyCacheService.newInstance().invalidateGlobalSettingCache();

java.util.List<Application> apps = new RegisteredApplicationService().findAllIvyApplications();

for (Application app: apps){
	IvyCacheService.newInstance().invalidateGlobalSettingOnApp(app.getName());
}' #txt
Ct0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Invalidate cache</name>
    </language>
</elementInfo>
' #txt
Ct0 f51 168 218 112 44 -44 -8 #rect
Ct0 f51 @|StepIcon #fIcon
Ct0 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct0 g0 211 51 26 26 0 5 #rect
Ct0 g0 @|MIGIcon #fIcon
Ct0 f0 224 77 224 218 #arcP
Ct0 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct0 g1 211 339 26 26 0 5 #rect
Ct0 g1 @|MOGIcon #fIcon
Ct0 f1 expr out #txt
Ct0 f1 224 262 224 339 #arcP
Ct0 g2 51 51 26 26 0 5 #rect
Ct0 g2 @|MIGIcon #fIcon
Ct0 g3 531 51 26 26 0 5 #rect
Ct0 g3 @|MIGIcon #fIcon
Ct0 f2 64 77 168 240 #arcP
Ct0 f2 1 64 240 #addKink
Ct0 f2 0 0.8908480277094337 0 0 #arcLabel
Ct0 f3 544 77 280 240 #arcP
Ct0 f3 1 544 240 #addKink
Ct0 f3 1 0.3875741260492252 0 0 #arcLabel
Ct0 g4 371 51 26 26 0 5 #rect
Ct0 g4 @|MIGIcon #fIcon
Ct0 f4 384 77 268 218 #arcP
Ct0 f4 1 384 160 #addKink
Ct0 f4 1 0.32247361517546047 0 0 #arcLabel
>Proto Ct0 0 0 32 24 18 0 #rect
>Proto Ct0 @|BIcon #fIcon
As0 f32 mainOut f36 tail #connect
As0 f36 head f35 mainIn #connect
As0 f35 mainOut f34 tail #connect
As0 f34 head f33 mainIn #connect
As0 f47 mainOut f59 tail #connect
As0 f59 head f58 mainIn #connect
As0 f69 mainOut f73 tail #connect
As0 f73 head f72 mainIn #connect
As0 f113 mainOut f116 tail #connect
As0 f116 head f115 in #connect
As0 f118 head f117 mainIn #connect
As0 f117 mainOut f120 tail #connect
As0 f120 head f119 mainIn #connect
As0 f158 mainOut f160 tail #connect
As0 f160 head f156 mainIn #connect
As0 f161 mainOut f163 tail #connect
As0 f163 head f162 mainIn #connect
As0 f176 mainOut f180 tail #connect
As0 f180 head f179 mainIn #connect
As0 f192 mainOut f195 tail #connect
As0 f195 head f178 in #connect
As0 f178 out f197 tail #connect
As0 f197 head f193 mainIn #connect
As0 f193 mainOut f199 tail #connect
As0 f199 head f188 mainIn #connect
As0 f185 mainOut f207 tail #connect
As0 f207 head f202 mainIn #connect
As0 f202 mainOut f208 tail #connect
As0 f208 head f194 mainIn #connect
As0 f88 mainOut f206 tail #connect
As0 f206 head f103 in #connect
As0 f173 mainOut f171 tail #connect
As0 f171 head f170 in #connect
As0 f156 mainOut f223 tail #connect
As0 f223 head f222 mainIn #connect
As0 f217 mainOut f189 tail #connect
As0 f189 head f17 mainIn #connect
As0 f222 mainOut f159 tail #connect
As0 f159 head f157 mainIn #connect
As0 f54 mainOut f198 tail #connect
As0 f198 head f196 in #connect
As0 f220 head f205 mainIn #connect
As0 f205 mainOut f204 tail #connect
As0 f204 head f45 mainIn #connect
As0 f209 out f211 tail #connect
As0 f211 head f173 mainIn #connect
As0 f209 out f213 tail #connect
As0 f213 head f212 mainIn #connect
As0 f212 mainOut f214 tail #connect
As0 f214 head f170 in #connect
As0 f92 mainOut f53 tail #connect
As0 f53 head f52 mainIn #connect
As0 f200 mainOut f226 tail #connect
As0 f226 head f225 mainIn #connect
As0 f225 mainOut f227 tail #connect
As0 f227 head f216 mainIn #connect
As0 f179 mainOut f181 tail #connect
As0 f181 head f231 mainIn #connect
As0 f141 mainOut f124 tail #connect
As0 f124 head f142 mainIn #connect
As0 f133 head f88 mainIn #connect
As0 f143 mainOut f145 tail #connect
As0 f145 head f144 mainIn #connect
As0 f44 mainOut f263 tail #connect
As0 f263 head f54 mainIn #connect
As0 f40 mainOut f41 tail #connect
As0 f41 head f93 mainIn #connect
As0 f0 mainOut f265 tail #connect
As0 f265 head f1 mainIn #connect
As0 f74 mainOut f76 tail #connect
As0 f76 head f75 mainIn #connect
As0 f285 mainOut f287 tail #connect
As0 f287 head f286 mainIn #connect
As0 f67 mainOut f281 tail #connect
As0 f281 head f63 mainIn #connect
As0 f278 mainOut f279 tail #connect
As0 f279 head f276 mainIn #connect
As0 f80 mainOut f29 tail #connect
As0 f29 head f15 mainIn #connect
As0 f9 mainOut f66 tail #connect
As0 f66 head f10 mainIn #connect
As0 f10 mainOut f97 tail #connect
As0 f97 head f91 mainIn #connect
As0 f18 mainOut f100 tail #connect
As0 f100 head f55 mainIn #connect
As0 f55 mainOut f102 tail #connect
As0 f102 head f98 mainIn #connect
As0 f103 out f5 tail #connect
As0 f5 head f40 mainIn #connect
As0 f3 mainOut f27 tail #connect
As0 f27 head f103 in #connect
As0 f11 mainOut f39 tail #connect
As0 f39 head f217 mainIn #connect
As0 f196 out f28 tail #connect
As0 f28 head f45 mainIn #connect
As0 f196 out f220 tail #connect
As0 f115 out f19 tail #connect
As0 f19 head f209 in #connect
As0 f115 out f118 tail #connect
As0 f165 mainOut f22 tail #connect
As0 f22 head f92 mainIn #connect
As0 f170 out f30 tail #connect
As0 f30 head f3 mainIn #connect
As0 f170 out f133 tail #connect
As0 f52 mainOut f31 tail #connect
As0 f31 head f26 mainIn #connect
As0 f26 mainOut f6 tail #connect
As0 f6 head f48 mainIn #connect
As0 f93 mainOut f43 tail #connect
As0 f43 head f42 mainIn #connect
As0 f42 mainOut f4 tail #connect
As0 f4 head f38 mainIn #connect
As0 f231 mainOut f49 tail #connect
As0 f49 head f46 mainIn #connect
As0 f83 head S10 g0 #connect
As0 S10 g1 f84 tail #connect
As0 f84 head f277 mainIn #connect
As0 f276 mainOut f83 tail #connect
As0 f63 mainOut f51 tail #connect
As0 f51 head S10 g2 #connect
As0 f72 mainOut f56 tail #connect
As0 f56 head S10 g3 #connect
As0 f15 mainOut f57 tail #connect
As0 f57 head S10 g4 #connect
As0 f178 out f60 tail #connect
As0 f60 head f21 mainIn #connect
As0 f21 mainOut f70 tail #connect
As0 f70 head f190 mainIn #connect
As0 f190 mainOut f71 tail #connect
As0 f71 head f188 mainIn #connect
As0 f64 mainOut f82 tail #connect
As0 f82 head f81 mainIn #connect
As0 f81 mainOut f78 tail #connect
As0 f78 head f68 mainIn #connect
As0 f65 mainOut f86 tail #connect
As0 f86 head f85 mainIn #connect
As0 f85 mainOut f79 tail #connect
As0 f79 head f77 mainIn #connect
As0 f87 mainOut f90 tail #connect
As0 f90 head f89 mainIn #connect
As0 f2 mainOut f61 tail #connect
As0 f61 head f8 mainIn #connect
As0 f7 mainOut f16 tail #connect
As0 f16 head f14 mainIn #connect
As0 f14 mainOut f13 tail #connect
As0 f13 head f12 mainIn #connect
As0 f62 out f95 tail #connect
As0 f95 head f94 mainIn #connect
As0 f20 mainOut f96 tail #connect
As0 f96 head f62 in #connect
As0 f62 out f99 tail #connect
As0 f99 head f113 mainIn #connect
As0 f37 mainOut f101 tail #connect
As0 f101 head f20 mainIn #connect
As0 f46 mainOut f24 tail #connect
As0 f24 head f23 mainIn #connect
As0 f23 mainOut f25 tail #connect
As0 f25 head f177 mainIn #connect
Ct0 g0 m f0 tail #connect
Ct0 f0 head f51 mainIn #connect
Ct0 f1 head g1 m #connect
Ct0 f51 mainOut f1 tail #connect
Ct0 g2 m f2 tail #connect
Ct0 f2 head f51 mainIn #connect
Ct0 g3 m f3 tail #connect
Ct0 f3 head f51 mainIn #connect
Ct0 g4 m f4 tail #connect
Ct0 f4 head f51 mainIn #connect
Ct0 0 0 1088 408 0 #ivRect
