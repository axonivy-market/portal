[Ivy]
150F0B4F8F3CB2CB 3.23 #module
>Proto >Proto Collection #zClass
As0 AdminUIProcess Big #zClass
As0 RD #cInfo
As0 #process
As0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
As0 @TextInP .rdData2UIAction .rdData2UIAction #zField
As0 @TextInP .resExport .resExport #zField
As0 @TextInP .type .type #zField
As0 @TextInP .processKind .processKind #zField
As0 @AnnotationInP-0n ai ai #zField
As0 @TextInP .xml .xml #zField
As0 @TextInP .responsibility .responsibility #zField
As0 @RichDialogInitStart f0 '' #zField
As0 @RichDialogProcessEnd f1 '' #zField
As0 @RichDialogProcessStart f32 '' #zField
As0 @RichDialogProcessEnd f33 '' #zField
As0 @GridStep f35 '' #zField
As0 @PushWFArc f36 '' #zField
As0 @PushWFArc f34 '' #zField
As0 @RichDialogProcessStart f37 '' #zField
As0 @RichDialogProcessEnd f38 '' #zField
As0 @RichDialogMethodStart f44 '' #zField
As0 @RichDialogProcessEnd f45 '' #zField
As0 @GridStep f52 '' #zField
As0 @GridStep f54 '' #zField
As0 @RichDialogMethodStart f47 '' #zField
As0 @RichDialogProcessEnd f58 '' #zField
As0 @PushWFArc f59 '' #zField
As0 @RichDialogMethodStart f61 '' #zField
As0 @RichDialogProcessEnd f62 '' #zField
As0 @RichDialogMethodStart f69 '' #zField
As0 @RichDialogProcessEnd f70 '' #zField
As0 @GridStep f72 '' #zField
As0 @PushWFArc f73 '' #zField
As0 @PushWFArc f71 '' #zField
As0 @RichDialogProcessStart f80 '' #zField
As0 @RichDialogProcessEnd f81 '' #zField
As0 @GridStep f93 '' #zField
As0 @GridStep f113 '' #zField
As0 @Alternative f115 '' #zField
As0 @PushWFArc f116 '' #zField
As0 @GridStep f117 '' #zField
As0 @PushWFArc f118 '' #zField
As0 @RichDialogProcessEnd f119 '' #zField
As0 @PushWFArc f120 '' #zField
As0 @RichDialogMethodStart f20 '' #zField
As0 @RichDialogProcessEnd f121 '' #zField
As0 @RichDialogProcessEnd f127 '' #zField
As0 @RichDialogProcessStart f138 '' #zField
As0 @GridStep f156 '' #zField
As0 @RichDialogProcessEnd f157 '' #zField
As0 @RichDialogMethodStart f158 '' #zField
As0 @PushWFArc f160 '' #zField
As0 @RichDialogProcessStart f161 '' #zField
As0 @RichDialogProcessEnd f162 '' #zField
As0 @PushWFArc f163 '' #zField
As0 @RichDialogProcessStart f165 '' #zField
As0 @RichDialogProcessStart f11 '' #zField
As0 @RichDialogProcessEnd f17 '' #zField
As0 @GridStep f88 '' #zField
As0 @Alternative f170 '' #zField
As0 @RichDialogMethodStart f176 '' #zField
As0 @RichDialogProcessEnd f177 '' #zField
As0 @GridStep f179 '' #zField
As0 @Alternative f178 '' #zField
As0 @RichDialogProcessStart f185 '' #zField
As0 @GridStep f202 '' #zField
As0 @GridStep f190 '' #zField
As0 @RichDialogProcessEnd f194 '' #zField
As0 @RichDialogProcessEnd f188 '' #zField
As0 @RichDialogProcessStart f192 '' #zField
As0 @GridStep f193 '' #zField
As0 @PushWFArc f195 '' #zField
As0 @PushWFArc f197 '' #zField
As0 @PushWFArc f199 '' #zField
As0 @PushWFArc f207 '' #zField
As0 @PushWFArc f208 '' #zField
As0 @PushWFArc f191 '' #zField
As0 @Alternative f103 '' #zField
As0 @PushWFArc f206 '' #zField
As0 @GridStep f173 '' #zField
As0 @PushWFArc f171 '' #zField
As0 @GridStep f217 '' #zField
As0 @CallSub f222 '' #zField
As0 @PushWFArc f223 '' #zField
As0 @PushWFArc f186 '' #zField
As0 @RichDialogProcessStart f141 '' #zField
As0 @RichDialogProcessEnd f142 '' #zField
As0 @PushWFArc f189 '' #zField
As0 @PushWFArc f159 '' #zField
As0 @Alternative f196 '' #zField
As0 @PushWFArc f198 '' #zField
As0 @GridStep f205 '' #zField
As0 @PushWFArc f220 '' #zField
As0 @PushWFArc f204 '' #zField
As0 @PushWFArc f114 '' #zField
As0 @PushWFArc f211 '' #zField
As0 @Alternative f209 '' #zField
As0 @PushWFArc f213 '' #zField
As0 @PushWFArc f214 '' #zField
As0 @GridStep f212 '' #zField
As0 @RichDialogProcessStart f200 '' #zField
As0 @RichDialogProcessEnd f216 '' #zField
As0 @GridStep f229 '' #zField
As0 @GridStep f92 '' #zField
As0 @PushWFArc f53 '' #zField
As0 @GridStep f155 '' #zField
As0 @PushWFArc f168 '' #zField
As0 @PushWFArc f184 '' #zField
As0 @GridStep f228 '' #zField
As0 @PushWFArc f230 '' #zField
As0 @GridStep f40 '' #zField
As0 @GridStep f225 '' #zField
As0 @PushWFArc f226 '' #zField
As0 @PushWFArc f227 '' #zField
As0 @GridStep f231 '' #zField
As0 @PushWFArc f187 '' #zField
As0 @PushWFArc f180 '' #zField
As0 @PushWFArc f181 '' #zField
As0 @GridStep f15 '' #zField
As0 @GridStep f169 '' #zField
As0 @PushWFArc f122 '' #zField
As0 @PushWFArc f124 '' #zField
As0 @PushWFArc f133 '' #zField
As0 @RichDialogProcessEnd f144 '' #zField
As0 @RichDialogMethodStart f143 '' #zField
As0 @PushWFArc f145 '' #zField
As0 @RichDialogProcessEnd f48 '' #zField
As0 @RichDialogMethodStart f2 '' #zField
As0 @RichDialogProcessEnd f99 '' #zField
As0 @PushWFArc f153 '' #zField
As0 @PushWFArc f263 '' #zField
As0 @PushWFArc f41 '' #zField
As0 @PushWFArc f265 '' #zField
As0 @RichDialogProcessEnd f286 '' #zField
As0 @RichDialogMethodStart f74 '' #zField
As0 @RichDialogMethodStart f285 '' #zField
As0 @RichDialogProcessEnd f75 '' #zField
As0 @PushWFArc f76 '' #zField
As0 @PushWFArc f287 '' #zField
As0 @GridStep f63 '' #zField
As0 @RichDialogProcessEnd f277 '' #zField
As0 @GridStep f276 '' #zField
As0 @RichDialogProcessStart f67 '' #zField
As0 @RichDialogProcessEnd f68 '' #zField
As0 @RichDialogProcessStart f278 '' #zField
As0 @PushWFArc f279 '' #zField
As0 @PushWFArc f281 '' #zField
As0 @PushWFArc f29 '' #zField
As0 @PushWFArc f8 '' #zField
As0 @RichDialogProcessStart f9 '' #zField
As0 @GridStep f10 '' #zField
As0 @PushWFArc f66 '' #zField
As0 @RichDialogProcessEnd f91 '' #zField
As0 @PushWFArc f97 '' #zField
As0 @GridStep f55 '' #zField
As0 @RichDialogProcessStart f18 '' #zField
As0 @PushWFArc f100 '' #zField
As0 @RichDialogProcessEnd f98 '' #zField
As0 @PushWFArc f102 '' #zField
As0 @PushWFArc f64 '' #zField
As0 @PushWFArc f65 '' #zField
As0 @PushWFArc f4 '' #zField
As0 @PushWFArc f5 '' #zField
As0 @PushWFArc f6 '' #zField
As0 @GridStep f23 '' #zField
As0 @PushWFArc f24 '' #zField
As0 @PushWFArc f25 '' #zField
As0 @GridStep f3 '' #zField
As0 @PushWFArc f26 '' #zField
As0 @PushWFArc f27 '' #zField
As0 @PushWFArc f39 '' #zField
As0 @PushWFArc f28 '' #zField
As0 @PushWFArc f21 '' #zField
As0 @CallSub f7 '' #zField
As0 @PushWFArc f12 '' #zField
As0 @GridStep f14 '' #zField
As0 @PushWFArc f16 '' #zField
As0 @PushWFArc f13 '' #zField
As0 @PushWFArc f19 '' #zField
As0 @PushWFArc f22 '' #zField
>Proto As0 As0 AdminUIProcess #zField
As0 f0 guid 14B6C3C6330883A7 #txt
As0 f0 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f0 method start() #txt
As0 f0 disableUIEvents true #txt
As0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
As0 f0 inParameterMapAction 'out.resetAllSettings=false;
' #txt
As0 f0 outParameterDecl '<> result;
' #txt
As0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f0 190 38 20 20 13 0 #rect
As0 f0 @|RichDialogInitStartIcon #fIcon
As0 f1 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f1 190 182 20 20 13 0 #rect
As0 f1 @|RichDialogProcessEndIcon #fIcon
As0 f32 guid 14B719AF780C56D8 #txt
As0 f32 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f32 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f32 actionTable 'out=in;
' #txt
As0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addNewApp</name>
        <nameStyle>9,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f32 310 38 20 20 13 0 #rect
As0 f32 @|RichDialogProcessStartIcon #fIcon
As0 f33 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f33 310 182 20 20 13 0 #rect
As0 f33 @|RichDialogProcessEndIcon #fIcon
As0 f35 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f35 actionTable 'out=in;
' #txt
As0 f35 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;
import ch.ivy.addon.portalkit.enums.ApplicationType;
import org.primefaces.context.RequestContext;

in.selectedApp = new Application();
if (in.applicationList.size() > 0) {
	in.selectedApp.menuOrdinal = in.applicationList.get(in.applicationList.size() - 1).menuOrdinal + 1;
} else {
	in.selectedApp.menuOrdinal = 0;
}
in.isAddMode = true;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/addNewApplication");
//in.isIvyApplicationType = true;
in.type = ApplicationType.IVY_APPLICATION;
in.displayNameInCurrentLanguage = null;
in.supportedLanguages = new List();
in.selectedApp.isOnline = true;
in.selectedApp.isSupportAbsenceSettings = true;
in.selectedApp.isSupportEmailSettings = true;
in.selectedApp.isVisible = true;' #txt
As0 f35 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init value</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f35 302 108 36 24 20 -2 #rect
As0 f35 @|StepIcon #fIcon
As0 f36 expr out #txt
As0 f36 320 58 320 108 #arcP
As0 f34 expr out #txt
As0 f34 320 132 320 182 #arcP
As0 f37 guid 14B71AFE89C4BE23 #txt
As0 f37 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f37 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f37 actionTable 'out=in;
' #txt
As0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>saveApplication</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f37 518 606 20 20 13 0 #rect
As0 f37 @|RichDialogProcessStartIcon #fIcon
As0 f38 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f38 518 1622 20 20 13 0 #rect
As0 f38 @|RichDialogProcessEndIcon #fIcon
As0 f44 guid 14B71B8355747299 #txt
As0 f44 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f44 method editApplication(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f44 disableUIEvents false #txt
As0 f44 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.Application application> param = methodEvent.getInputArguments();
' #txt
As0 f44 inParameterMapAction 'out.selectedApp=param.application;
' #txt
As0 f44 outParameterDecl '<> result;
' #txt
As0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editApplication(Application)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f44 574 38 20 20 13 0 #rect
As0 f44 @|RichDialogMethodStartIcon #fIcon
As0 f45 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f45 574 374 20 20 13 0 #rect
As0 f45 @|RichDialogProcessEndIcon #fIcon
As0 f52 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f52 actionTable 'out=in;
' #txt
As0 f52 actionCode in.applicationList.remove(in.selectedApp); #txt
As0 f52 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f52 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove from list</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f52 182 452 36 24 20 -2 #rect
As0 f52 @|StepIcon #fIcon
As0 f54 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f54 actionTable 'out=in;
' #txt
As0 f54 actionCode 'import ch.ivy.addon.portalkit.enums.ApplicationType;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;
import org.primefaces.context.RequestContext;

in.isAddMode = false;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/editApplication");
if(in.selectedApp.#serverId is initialized){	
	in.type = ApplicationType.IVY_APPLICATION;
}else{	
	in.type = ApplicationType.THIRD_PARTY_APPLICATION;	
}

Locale currentLocale = new Locales().getCurrentLocale();
DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName, currentLocale);
in.displayNameInCurrentLanguage = displayNameAdaptor.getDisplayNameAsString();
in.supportedLanguages = new List();' #txt
As0 f54 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f54 566 108 36 24 20 -2 #rect
As0 f54 @|StepIcon #fIcon
As0 f47 guid 14B7254A2BFCA52B #txt
As0 f47 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f47 method submitDeleteApp(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f47 disableUIEvents false #txt
As0 f47 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.Application application> param = methodEvent.getInputArguments();
' #txt
As0 f47 inActionCode 'out.selectedApp = param.application;
out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/deleteAppConfirmation");
//out.objToDelete = 2;' #txt
As0 f47 outParameterDecl '<> result;
' #txt
As0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitDeleteApp(Application)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f47 798 270 20 20 13 0 #rect
As0 f47 @|RichDialogMethodStartIcon #fIcon
As0 f58 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f58 798 406 20 20 13 0 #rect
As0 f58 @|RichDialogProcessEndIcon #fIcon
As0 f59 expr out #txt
As0 f59 808 290 808 406 #arcP
As0 f59 0 0.5000000000000001 0 0 #arcLabel
As0 f61 guid 14B76C9713AD988C #txt
As0 f61 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f61 method onTabChange(org.primefaces.event.TabChangeEvent) #txt
As0 f61 disableUIEvents false #txt
As0 f61 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<org.primefaces.event.TabChangeEvent tabEvent> param = methodEvent.getInputArguments();
' #txt
As0 f61 inActionCode 'import org.primefaces.context.RequestContext;
import org.primefaces.component.tabview.TabView;
import org.primefaces.event.TabChangeEvent;

TabChangeEvent tabChangeEvent = param.tabEvent;
TabView tabView = tabChangeEvent.getComponent() as TabView;
out.tabIndexActive = tabView.getChildren().indexOf(tabChangeEvent.getTab());
if (out.tabIndexActive == 2) {
	out.settingTabOpened = true;
	RequestContext.getCurrentInstance().execute("PF(''settingTable'').filter()");
}' #txt
As0 f61 outParameterDecl '<> result;
' #txt
As0 f61 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onTabChange(TabChangeEvent)</name>
        <nameStyle>27,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f61 1150 550 20 20 13 0 #rect
As0 f61 @|RichDialogMethodStartIcon #fIcon
As0 f62 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f62 1150 670 20 20 13 0 #rect
As0 f62 @|RichDialogProcessEndIcon #fIcon
As0 f69 guid 14B77FA478FB87A1 #txt
As0 f69 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f69 method editSetting(ch.ivy.addon.portalkit.persistence.domain.GlobalSetting) #txt
As0 f69 disableUIEvents false #txt
As0 f69 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.GlobalSetting setting> param = methodEvent.getInputArguments();
' #txt
As0 f69 inParameterMapAction 'out.selectedSetting=param.setting;
' #txt
As0 f69 outParameterDecl '<> result;
' #txt
As0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editSetting(GlobalSetting)</name>
        <nameStyle>26,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f69 846 38 20 20 13 0 #rect
As0 f69 @|RichDialogMethodStartIcon #fIcon
As0 f70 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f70 846 182 20 20 13 0 #rect
As0 f70 @|RichDialogProcessEndIcon #fIcon
As0 f72 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f72 actionTable 'out=in;
' #txt
As0 f72 actionCode 'import ch.ivy.addon.portalkit.statistics.StatisticChartConstants;
import java.util.Arrays;
import ch.ivy.addon.portalkit.enums.GlobalVariable;
import org.primefaces.context.RequestContext;

in.isAddMode = false;
in.dialogTitle = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/editSetting");
GlobalVariable globalVariable = GlobalVariable.valueOf(in.selectedSetting.key);
if (GlobalVariable.getBooleanType().contains(globalVariable)) {
	in.settingInputType = 2; //dropdown
	in.dropDownValues = Arrays.asList("false", "true");
} else if (GlobalVariable.getNumberType().contains(globalVariable)) {
	in.settingInputType = 3; //number
} else {
	in.settingInputType = 1; //text
}' #txt
As0 f72 security system #txt
As0 f72 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f72 838 108 36 24 20 -2 #rect
As0 f72 @|StepIcon #fIcon
As0 f73 expr out #txt
As0 f73 856 58 856 108 #arcP
As0 f71 expr out #txt
As0 f71 856 132 856 182 #arcP
As0 f80 guid 14B784950D872997 #txt
As0 f80 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f80 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f80 actionTable 'out=in;
' #txt
As0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>saveSetting</name>
        <nameStyle>11,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f80 942 606 20 20 13 0 #rect
As0 f80 @|RichDialogProcessStartIcon #fIcon
As0 f81 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f81 942 870 20 20 13 0 #rect
As0 f81 @|RichDialogProcessEndIcon #fIcon
As0 f93 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f93 actionTable 'out=in;
' #txt
As0 f93 actionCode 'if (in.isAddMode) {
	in.applicationList.add(in.selectedApp);	
}' #txt
As0 f93 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f93 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>add to list (if in addMode)</name>
        <nameStyle>27,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f93 510 1492 36 24 21 -10 #rect
As0 f93 @|StepIcon #fIcon
As0 f113 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f113 actionTable 'out=in;
' #txt
As0 f113 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

in.selectedApp.link = in.selectedApp.link.trim();

in.duplicateApp = false;
for (Application app : in.applicationList) {
	if (app.name.equals(in.selectedApp.name)&& app.link.equals(in.selectedApp.link)){
		if (in.isAddMode) {
			in.duplicateApp = true;
			break;
		} else {
				if(!in.selectedApp.id.equals(app.id)){
					in.duplicateApp = true;
					break;
				}
		}
	}
}' #txt
As0 f113 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>check duplication</name>
        <nameStyle>17,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f113 510 660 36 24 20 -2 #rect
As0 f113 @|StepIcon #fIcon
As0 f115 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>app exist ?</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f115 514 714 28 28 14 0 #rect
As0 f115 @|AlternativeIcon #fIcon
As0 f116 expr out #txt
As0 f116 528 684 528 714 #arcP
As0 f117 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f117 actionTable 'out=in;
' #txt
As0 f117 actionCode 'import ch.ivy.addon.portalkit.enums.ApplicationType;
import javax.faces.application.FacesMessage;
import org.primefaces.context.RequestContext;
import org.primefaces.component.inputtext.InputText;
import javax.faces.context.FacesContext;

if(in.type == ApplicationType.IVY_APPLICATION) {
	InputText ui = FacesContext.getCurrentInstance().getViewRoot().findComponent(":appDialogForm:portalLink") as InputText;
	ui.valid = false;
} else {
	InputText ui = FacesContext.getCurrentInstance().getViewRoot().findComponent(":appDialogForm:portalLink3rd") as InputText;
	ui.valid = false;
}

FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/duplicatePortalLinkMsg"), null));
FacesContext.getCurrentInstance().validationFailed();' #txt
As0 f117 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show message</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f117 662 716 36 24 20 -2 #rect
As0 f117 @|StepIcon #fIcon
As0 f118 expr in #txt
As0 f118 outCond in.duplicateApp #txt
As0 f118 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f118 542 728 662 728 #arcP
As0 f118 0 0.67536365735396 4 -6 #arcLabel
As0 f119 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f119 670 766 20 20 13 0 #rect
As0 f119 @|RichDialogProcessEndIcon #fIcon
As0 f120 expr out #txt
As0 f120 680 740 680 766 #arcP
As0 f20 guid 14CBC65EA2BAB5DF #txt
As0 f20 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f20 method getApplicationUserList(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f20 disableUIEvents false #txt
As0 f20 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.Application app> param = methodEvent.getInputArguments();
' #txt
As0 f20 inParameterMapAction 'out.selectedApp=param.app;
' #txt
As0 f20 outParameterDecl '<> result;
' #txt
As0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getApplicationUserList(Application)</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f20 1150 718 20 20 13 0 #rect
As0 f20 @|RichDialogMethodStartIcon #fIcon
As0 f121 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f121 1150 1102 20 20 13 0 #rect
As0 f121 @|RichDialogProcessEndIcon #fIcon
As0 f127 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f127 310 1782 20 20 13 0 #rect
As0 f127 @|RichDialogProcessEndIcon #fIcon
As0 f138 guid 14CC094CD70A6996 #txt
As0 f138 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f138 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f138 actionTable 'out=in;
' #txt
As0 f138 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getApplicationList</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f138 310 1566 20 20 13 0 #rect
As0 f138 @|RichDialogProcessStartIcon #fIcon
As0 f156 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f156 actionTable 'out=in;
' #txt
As0 f156 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();

in.selectedApp.name = in.selectedIvyApplication.name;

Application existingApplication = applicationService.findByName(in.selectedIvyApplication.name);
if (existingApplication != null) {
	in.selectedApp.isSupportAbsenceSettings = existingApplication.isSupportAbsenceSettings;
	in.selectedApp.isSupportEmailSettings = existingApplication.isSupportEmailSettings;
} else {
	in.selectedApp.isSupportAbsenceSettings = false;
	in.selectedApp.isSupportEmailSettings = false;
}' #txt
As0 f156 security system #txt
As0 f156 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f156 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set email. absence &#xD;
for selected app</name>
    </language>
</elementInfo>
' #txt
As0 f156 814 1164 36 24 20 -2 #rect
As0 f156 @|StepIcon #fIcon
As0 f157 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f157 822 1326 20 20 13 0 #rect
As0 f157 @|RichDialogProcessEndIcon #fIcon
As0 f158 guid 14CC66EBC28A586A #txt
As0 f158 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f158 method selectApplication(ch.ivy.addon.portalkit.ivydata.bo.IvyApplication) #txt
As0 f158 disableUIEvents false #txt
As0 f158 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.ivydata.bo.IvyApplication app> param = methodEvent.getInputArguments();
' #txt
As0 f158 inParameterMapAction 'out.selectedIvyApplication=param.app;
' #txt
As0 f158 outParameterDecl '<> result;
' #txt
As0 f158 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectApplication(IvyApplication)</name>
    </language>
</elementInfo>
' #txt
As0 f158 822 1063 20 18 13 0 #rect
As0 f158 @|RichDialogMethodStartIcon #fIcon
As0 f160 expr out #txt
As0 f160 832 1081 832 1164 #arcP
As0 f161 guid 14CD511E6C573620 #txt
As0 f161 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f161 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f161 actionTable 'out=in;
' #txt
As0 f161 actionCode '
//reset application name
out.selectedApp.name = "";
' #txt
As0 f161 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetApplicationName</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f161 886 966 20 20 13 0 #rect
As0 f161 @|RichDialogProcessStartIcon #fIcon
As0 f162 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f162 886 1030 20 20 13 0 #rect
As0 f162 @|RichDialogProcessEndIcon #fIcon
As0 f163 expr out #txt
As0 f163 896 986 896 1030 #arcP
As0 f165 guid 14CD62A3566672A1 #txt
As0 f165 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f165 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f165 actionTable 'out=in;
' #txt
As0 f165 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f165 190 254 20 20 13 0 #rect
As0 f165 @|RichDialogProcessStartIcon #fIcon
As0 f11 guid 14DE0D8C8D0542F8 #txt
As0 f11 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f11 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f11 actionTable 'out=in;
' #txt
As0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>appTypeChange</name>
        <nameStyle>13,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f11 78 1102 20 20 13 0 #rect
As0 f11 @|RichDialogProcessStartIcon #fIcon
As0 f17 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f17 78 1334 20 20 13 0 #rect
As0 f17 @|RichDialogProcessEndIcon #fIcon
As0 f88 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f88 actionTable 'out=in;
' #txt
As0 f88 actionCode 'in.selectedApp.name = in.selectedApp.displayName;
in.selectedApp.isOnline = true;


' #txt
As0 f88 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f88 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set value</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f88 438 1108 36 24 -74 -6 #rect
As0 f88 @|StepIcon #fIcon
As0 f170 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f170 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>IvyApplication?</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f170 514 986 28 28 14 0 #rect
As0 f170 @|AlternativeIcon #fIcon
As0 f176 guid 14E951D887B4F17A #txt
As0 f176 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f176 method onApplicationReorder(org.primefaces.event.ReorderEvent) #txt
As0 f176 disableUIEvents false #txt
As0 f176 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<org.primefaces.event.ReorderEvent reorderEvent> param = methodEvent.getInputArguments();
' #txt
As0 f176 inParameterMapAction 'out.reorderEvent=param.reorderEvent;
' #txt
As0 f176 outParameterDecl '<> result;
' #txt
As0 f176 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>onApplicationReorder(ReorderEvent)</name>
    </language>
</elementInfo>
' #txt
As0 f176 1422 550 20 20 13 0 #rect
As0 f176 @|RichDialogMethodStartIcon #fIcon
As0 f177 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f177 1422 734 20 20 13 0 #rect
As0 f177 @|RichDialogProcessEndIcon #fIcon
As0 f179 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f179 actionTable 'out=in;
' #txt
As0 f179 actionCode 'int fromIndex = in.reorderEvent.getFromIndex();
int toIndex = in.reorderEvent.getToIndex();

in.selectedApp = in.applicationList.removeGet(fromIndex);
in.applicationList.add(toIndex, in.selectedApp);

for (int i = 0; i < in.applicationList.size(); i++) {
	in.applicationList.get(i).setMenuOrdinal(i);
}' #txt
As0 f179 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f179 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>calculate applications'' order</name>
        <nameStyle>29,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f179 1414 604 36 24 20 -2 #rect
As0 f179 @|StepIcon #fIcon
As0 f178 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>an application
is selected</name>
        <nameStyle>26,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f178 1138 1602 28 28 -92 -11 #rect
As0 f178 @|AlternativeIcon #fIcon
As0 f185 guid 14E9B7FC56E87E52 #txt
As0 f185 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f185 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f185 actionTable 'out=in;
' #txt
As0 f185 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>processLanguage</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f185 910 1390 20 20 13 0 #rect
As0 f185 @|RichDialogProcessStartIcon #fIcon
As0 f202 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f202 actionTable 'out=in;
' #txt
As0 f202 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;
import ch.ivy.addon.portalkit.util.Locales;

if (!in.languages.isEmpty()){
	DisplayNameConvertor displayNameConvertor = new DisplayNameConvertor();
	
	for (DisplayName displayName : in.supportedLanguages) {
		displayNameConvertor.add(displayName.locale, displayName.value);
	}
	in.selectedApp.displayName = displayNameConvertor.toJson();
	in.displayNameInCurrentLanguage = displayNameConvertor.toString(new Locales().getCurrentLocale());
}
' #txt
As0 f202 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f202 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>process data from GUI</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f202 902 1445 36 22 20 -2 #rect
As0 f202 @|StepIcon #fIcon
As0 f190 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f190 actionTable 'out=in;
' #txt
As0 f190 actionCode 'import ch.ivy.addon.portalkit.loader.ApplicationMultiLanguageNameLoader;
import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;

if(in.isAddMode){
	in.supportedLanguages = new ApplicationMultiLanguageNameLoader().currentDisplayName(in.displayNameInCurrentLanguage)
																									 .currentDisplayNames(in.supportedLanguages)
																									 .supportedLanguages(in.languages)
																									 .load();
} else {
	java.util.Locale currentLocale = new Locales().getCurrentLocale();
	DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName, currentLocale);
	java.util.Map displayNames = displayNameAdaptor.getDisplayNameAsMap();
	in.supportedLanguages = new ApplicationMultiLanguageNameLoader().currentDisplayName(in.displayNameInCurrentLanguage)
																									 .currentDisplayNames(displayNames)
																									 .supportedLanguages(in.languages)
																									 .load();
}
' #txt
As0 f190 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f190 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get supported
languages from WS</name>
        <nameStyle>31,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f190 1134 1684 36 24 25 2 #rect
As0 f190 @|StepIcon #fIcon
As0 f194 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f194 910 1510 20 20 13 0 #rect
As0 f194 @|RichDialogProcessEndIcon #fIcon
As0 f188 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f188 1142 1758 20 20 13 0 #rect
As0 f188 @|RichDialogProcessEndIcon #fIcon
As0 f192 guid 14E9B7FC57888C9E #txt
As0 f192 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f192 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f192 actionTable 'out=in;
' #txt
As0 f192 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getLanguageList</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f192 1142 1534 20 20 13 0 #rect
As0 f192 @|RichDialogProcessStartIcon #fIcon
As0 f193 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f193 actionTable 'out=in;
' #txt
As0 f193 actionCode 'ivy.log.error("selected application is null");' #txt
As0 f193 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f193 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>write error log</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f193 1294 1604 36 24 -38 14 #rect
As0 f193 @|StepIcon #fIcon
As0 f195 expr out #txt
As0 f195 1152 1554 1152 1602 #arcP
As0 f197 expr in #txt
As0 f197 outCond 'in.#selectedApp == null' #txt
As0 f197 1166 1616 1294 1616 #arcP
As0 f199 expr out #txt
As0 f199 1312 1628 1162 1768 #arcP
As0 f199 1 1312 1768 #addKink
As0 f199 1 0.43856392005896616 0 0 #arcLabel
As0 f207 expr out #txt
As0 f207 920 1410 920 1445 #arcP
As0 f208 expr out #txt
As0 f208 920 1467 920 1510 #arcP
As0 f191 expr out #txt
As0 f191 1152 1708 1152 1758 #arcP
As0 f191 0 0.5151654308142813 0 0 #arcLabel
As0 f103 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f103 514 1362 28 28 14 0 #rect
As0 f103 @|AlternativeIcon #fIcon
As0 f206 expr out #txt
As0 f206 456 1132 514 1376 #arcP
As0 f206 1 456 1376 #addKink
As0 f206 1 0.09861351404025685 0 0 #arcLabel
As0 f173 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f173 actionTable 'out=in;
' #txt
As0 f173 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import java.util.Map;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;

DisplayNameConvertor convertor = new DisplayNameConvertor();

if (in.supportedLanguages.isEmpty()) {
	if (!in.languages.isEmpty()) {
		for (String language : in.languages) {
			convertor.add(new Locale(language),in.displayNameInCurrentLanguage);
		}
	}else {
		convertor.add(new Locales().getCurrentLocale(),in.displayNameInCurrentLanguage);
	}
	
}else {
	for (DisplayName displayName: in.supportedLanguages){
		if(displayName.value.isEmpty()){
			displayName.value = in.displayNameInCurrentLanguage;
		}
		convertor.add(displayName.locale,displayName.value);
	}
}

in.selectedApp.displayName = convertor.toJson();' #txt
As0 f173 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f173 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>prepair displayname</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f173 510 924 36 24 -63 11 #rect
As0 f173 @|StepIcon #fIcon
As0 f171 expr out #txt
As0 f171 528 948 528 986 #arcP
As0 f217 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f217 actionTable 'out=in;
' #txt
As0 f217 actionCode 'import ch.ivy.addon.portalkit.enums.ApplicationType;
import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;

if (in.type == ApplicationType.IVY_APPLICATION){
	in.languages = ApplicationMultiLanguage.getThirdPartySupportedLanguage();
}


' #txt
As0 f217 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f217 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load supported languages
for 3rd party application</name>
        <nameStyle>50,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f217 70 1220 36 24 -37 18 #rect
As0 f217 @|StepIcon #fIcon
As0 f222 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f222 processCall 'Ivy Data Processes/LanguageService:loadSupportedLanguages(String)' #txt
As0 f222 doCall true #txt
As0 f222 requestActionDecl '<java.lang.String appName> param;
' #txt
As0 f222 requestMappingAction 'param.appName=in.selectedApp.name;
' #txt
As0 f222 responseActionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f222 responseMappingAction 'out=in;
out.errors=result.errors;
out.languages=result.supportedLanguge.supportedLanguages;
' #txt
As0 f222 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LanguageService</name>
    </language>
</elementInfo>
' #txt
As0 f222 814 1236 36 24 25 -10 #rect
As0 f222 @|CallSubIcon #fIcon
As0 f223 expr out #txt
As0 f223 832 1188 832 1236 #arcP
As0 f186 expr in #txt
As0 f186 1152 1630 1152 1684 #arcP
As0 f186 0 0.5000000000000001 0 0 #arcLabel
As0 f141 guid 14CC18BB4746B6E3 #txt
As0 f141 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f141 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f141 actionTable 'out=in;
' #txt
As0 f141 actionCode 'import ch.ivy.addon.portalkit.ivydata.bo.IvyApplication;
IvyApplication ivyApplication = event.getSource() as IvyApplication;
in.selectedApp.name = ivyApplication.name;' #txt
As0 f141 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selectApplication</name>
    </language>
</elementInfo>
' #txt
As0 f141 1750 806 20 20 13 0 #rect
As0 f141 @|RichDialogProcessStartIcon #fIcon
As0 f142 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f142 1750 894 20 20 13 0 #rect
As0 f142 @|RichDialogProcessEndIcon #fIcon
As0 f189 expr out #txt
As0 f189 88 1244 88 1334 #arcP
As0 f189 0 0.5311048610309348 0 0 #arcLabel
As0 f159 expr out #txt
As0 f159 832 1260 832 1326 #arcP
As0 f196 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f196 570 178 28 28 14 0 #rect
As0 f196 @|AlternativeIcon #fIcon
As0 f198 expr out #txt
As0 f198 584 132 584 178 #arcP
As0 f205 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f205 actionTable 'out=in;
' #txt
As0 f205 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;


in.languages = ApplicationMultiLanguage.getThirdPartySupportedLanguage();


' #txt
As0 f205 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f205 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load supported languages
for 3rd party application</name>
        <nameStyle>50,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f205 486 284 36 24 -92 15 #rect
As0 f205 @|StepIcon #fIcon
As0 f220 expr in #txt
As0 f220 570 192 504 284 #arcP
As0 f220 1 504 192 #addKink
As0 f220 0 0.9318339403871162 0 0 #arcLabel
As0 f204 expr out #txt
As0 f204 504 308 574 384 #arcP
As0 f204 1 504 384 #addKink
As0 f204 0 0.7997648611494669 0 0 #arcLabel
As0 f114 expr out #txt
As0 f114 528 626 528 660 #arcP
As0 f211 expr in #txt
As0 f211 outCond in.isAddMode #txt
As0 f211 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f211 528 886 528 924 #arcP
As0 f211 0 0.21052631578947367 -12 0 #arcLabel
As0 f209 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f209 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is add mode?</name>
        <nameStyle>12,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f209 514 858 28 28 -91 -6 #rect
As0 f209 @|AlternativeIcon #fIcon
As0 f213 expr in #txt
As0 f213 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f213 542 872 607 924 #arcP
As0 f213 1 607 872 #addKink
As0 f213 0 0.12121212121212122 0 -10 #arcLabel
As0 f214 expr out #txt
As0 f214 607 948 542 1000 #arcP
As0 f214 1 607 1000 #addKink
As0 f214 0 0.8041048185752951 0 0 #arcLabel
As0 f212 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f212 actionTable 'out=in;
' #txt
As0 f212 actionCode 'import ch.ivy.addon.portalkit.dto.DisplayName;
import ch.ivy.addon.portalkit.util.DisplayNameAdaptor;
import java.util.Map;
import java.util.Locale;
import ch.ivy.addon.portalkit.util.Locales;
import ch.ivy.addon.portalkit.util.DisplayNameConvertor;

Locale currentLocale = new Locales().getCurrentLocale();
DisplayNameAdaptor displayNameAdaptor = new DisplayNameAdaptor(in.selectedApp.displayName,currentLocale);
Map displayNameMap = displayNameAdaptor.getDisplayNameAsMap();

if (in.supportedLanguages.isEmpty()) {
	if (!in.languages.isEmpty()) {
		for (String language : in.languages) {
			if(displayNameMap.get(language).toString().isEmpty()){
				displayNameAdaptor.add(new Locale(language),in.displayNameInCurrentLanguage);
			}
		}
	}else {
		displayNameAdaptor.add(currentLocale,in.displayNameInCurrentLanguage);
	}
}else {
	for (DisplayName displayName: in.supportedLanguages){
		if(displayName.value.isEmpty()){
			displayName.value = in.displayNameInCurrentLanguage;
		}
		displayNameAdaptor.add(displayName.locale,displayName.value);
	}
}

displayNameAdaptor.add(currentLocale,in.displayNameInCurrentLanguage);
in.selectedApp.displayName = displayNameAdaptor.toJson();' #txt
As0 f212 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f212 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update current language</name>
        <nameStyle>23,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f212 591 924 35 24 -17 12 #rect
As0 f212 @|StepIcon #fIcon
As0 f200 guid 14ED7B5BE39B1F96 #txt
As0 f200 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f200 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f200 actionTable 'out=in;
' #txt
As0 f200 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancelApplicationDialog</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f200 694 1566 20 20 14 -1 #rect
As0 f200 @|RichDialogProcessStartIcon #fIcon
As0 f216 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f216 694 1670 20 20 13 0 #rect
As0 f216 @|RichDialogProcessEndIcon #fIcon
As0 f229 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f229 actionTable 'out=in;
' #txt
As0 f229 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

for(Application application : in.effectedApplications) {
	for(Application app : in.applicationList){
		if(app.id == application.id) {
			app.setIsSupportAbsenceSettings(in.selectedApp.isSupportAbsenceSettings);	
			app.setIsSupportEmailSettings(in.selectedApp.isSupportEmailSettings);
		}
	}
	
	application.setIsSupportAbsenceSettings(in.selectedApp.isSupportAbsenceSettings);	
	application.setIsSupportEmailSettings(in.selectedApp.isSupportEmailSettings);
}' #txt
As0 f229 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f229 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update data to effected apps</name>
        <nameStyle>28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f229 510 1108 36 24 20 -2 #rect
As0 f229 @|StepIcon #fIcon
As0 f92 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f92 actionTable 'out=in;
' #txt
As0 f92 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
applicationService.delete(in.selectedApp);' #txt
As0 f92 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete application</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f92 182 388 36 24 20 -2 #rect
As0 f92 @|StepIcon #fIcon
As0 f53 expr out #txt
As0 f53 200 412 200 452 #arcP
As0 f155 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f155 actionTable 'out=in;
' #txt
As0 f155 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
in.effectedApplications = applicationService.findOtherApplicationsHaveSameNameAndServer(in.selectedApp);
' #txt
As0 f155 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f155 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find effected apps</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f155 510 1052 36 24 20 -2 #rect
As0 f155 @|StepIcon #fIcon
As0 f168 expr in #txt
As0 f168 outCond 'in.type == ch.ivy.addon.portalkit.enums.ApplicationType.IVY_APPLICATION' #txt
As0 f168 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f168 528 1014 528 1052 #arcP
As0 f168 0 0.2857142857142857 -22 0 #arcLabel
As0 f184 expr out #txt
As0 f184 528 1076 528 1108 #arcP
As0 f228 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f228 actionTable 'out=in;
' #txt
As0 f228 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
applicationService.saveAll(in.effectedApplications);' #txt
As0 f228 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f228 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save effected applications</name>
        <nameStyle>26,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f228 510 1172 36 24 20 -2 #rect
As0 f228 @|StepIcon #fIcon
As0 f230 expr out #txt
As0 f230 528 1132 528 1172 #arcP
As0 f40 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f40 actionTable 'out=in;
' #txt
As0 f40 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.Application;

import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
in.selectedApp = applicationService.save(in.selectedApp) as Application;' #txt
As0 f40 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f40 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save application</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f40 510 1436 36 24 20 -2 #rect
As0 f40 @|StepIcon #fIcon
As0 f225 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f225 actionTable 'out=in;
' #txt
As0 f225 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
in.applicationList = applicationService.findAll();' #txt
As0 f225 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f225 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get all applications</name>
        <nameStyle>20,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f225 686 1620 36 24 20 -2 #rect
As0 f225 @|StepIcon #fIcon
As0 f226 expr out #txt
As0 f226 704 1586 704 1620 #arcP
As0 f227 expr out #txt
As0 f227 704 1644 704 1670 #arcP
As0 f231 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f231 actionTable 'out=in;
' #txt
As0 f231 actionCode 'import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
in.applicationList = applicationService.saveAll(in.applicationList);' #txt
As0 f231 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f231 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save all applications</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f231 1414 668 36 24 20 -2 #rect
As0 f231 @|StepIcon #fIcon
As0 f187 expr out #txt
As0 f187 1432 692 1432 734 #arcP
As0 f180 expr out #txt
As0 f180 1432 570 1432 604 #arcP
As0 f181 expr out #txt
As0 f181 1432 628 1432 668 #arcP
As0 f15 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f15 actionTable 'out=in;
' #txt
As0 f15 actionCode 'import ch.ivy.addon.portalkit.persistence.domain.GlobalSetting;

import ch.ivy.addon.portalkit.service.GlobalSettingService;

GlobalSettingService globalSettingService= new GlobalSettingService();
in.selectedSetting = globalSettingService.save(in.selectedSetting) as GlobalSetting;' #txt
As0 f15 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save global setting</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f15 934 724 36 24 20 -2 #rect
As0 f15 @|StepIcon #fIcon
As0 f169 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f169 actionTable 'out=in;
' #txt
As0 f169 actionCode 'in.filteredUsers = in.usersApplicationList;' #txt
As0 f169 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f169 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set filter users</name>
    </language>
</elementInfo>
' #txt
As0 f169 1142 1012 36 24 20 -2 #rect
As0 f169 @|StepIcon #fIcon
As0 f122 expr out #txt
As0 f122 1160 1036 1160 1102 #arcP
As0 f124 expr out #txt
As0 f124 1760 826 1760 894 #arcP
As0 f133 expr in #txt
As0 f133 514 1000 456 1108 #arcP
As0 f133 1 456 1000 #addKink
As0 f133 0 0.8007004654459767 0 0 #arcLabel
As0 f144 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f144 1077 109 22 22 14 0 #rect
As0 f144 @|RichDialogProcessEndIcon #fIcon
As0 f143 guid 1503CBAF85EC7EE8 #txt
As0 f143 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f143 method getAppNameInCurrentLocale(ch.ivy.addon.portalkit.persistence.domain.Application) #txt
As0 f143 disableUIEvents false #txt
As0 f143 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.Application application> param = methodEvent.getInputArguments();
' #txt
As0 f143 inActionCode 'out.application = param.application;' #txt
As0 f143 outParameterDecl '<java.lang.String name> result;
' #txt
As0 f143 outActionCode 'import ch.ivy.addon.portalkit.service.ApplicationMultiLanguage;
result.name = ApplicationMultiLanguage.getDisplayNameInCurrentLocale(in.application);' #txt
As0 f143 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAppNameInCurrentLocale(Application)</name>
        <nameStyle>38,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f143 1077 37 22 22 14 0 #rect
As0 f143 @|RichDialogMethodStartIcon #fIcon
As0 f145 expr out #txt
As0 f145 1088 59 1088 109 #arcP
As0 f48 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f48 190 566 20 20 13 0 #rect
As0 f48 @|RichDialogProcessEndIcon #fIcon
As0 f2 guid 151E78971722E279 #txt
As0 f2 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f2 method findAllApplication() #txt
As0 f2 disableUIEvents false #txt
As0 f2 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
As0 f2 outParameterDecl '<List<ch.ivy.addon.portalkit.persistence.domain.Application> applications> result;
' #txt
As0 f2 outParameterMapAction 'result.applications=in.applicationList;
' #txt
As0 f2 outActionCode 'import ch.ivy.addon.portalkit.comparator.ApplicationIndexAscendingComparator;
import java.util.Collections;
import ch.ivy.addon.portalkit.service.ApplicationService;

ApplicationService applicationService = new ApplicationService();
in.applicationList  = applicationService.findAll();
Collections.sort(in.applicationList, new ApplicationIndexAscendingComparator());
result.applications = in.applicationList;' #txt
As0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>findAllApplication()</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f2 1421 805 22 22 14 0 #rect
As0 f2 @|RichDialogMethodStartIcon #fIcon
As0 f99 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f99 1421 917 22 22 14 0 #rect
As0 f99 @|RichDialogProcessEndIcon #fIcon
As0 f153 expr out #txt
As0 f153 1432 827 1432 917 #arcP
As0 f263 expr out #txt
As0 f263 584 58 584 108 #arcP
As0 f41 expr out #txt
As0 f41 528 1460 528 1492 #arcP
As0 f265 expr out #txt
As0 f265 200 58 200 182 #arcP
As0 f265 0 0.4862440103228913 0 0 #arcLabel
As0 f286 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f286 1324 415 20 20 13 0 #rect
As0 f286 @|RichDialogProcessEndIcon #fIcon
As0 f74 guid 163DD18A566F4B85 #txt
As0 f74 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f74 method submitResetSetting(ch.ivy.addon.portalkit.persistence.domain.GlobalSetting) #txt
As0 f74 disableUIEvents false #txt
As0 f74 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivy.addon.portalkit.persistence.domain.GlobalSetting setting> param = methodEvent.getInputArguments();
' #txt
As0 f74 inActionCode 'out.selectedSetting = param.setting;
out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/resetSettingConfirmation");
out.resetAllSettings = false;' #txt
As0 f74 outParameterDecl '<> result;
' #txt
As0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitResetSetting(GlobalSetting)</name>
    </language>
</elementInfo>
' #txt
As0 f74 1055 271 20 20 13 0 #rect
As0 f74 @|RichDialogMethodStartIcon #fIcon
As0 f285 guid 163DD18A56815DFE #txt
As0 f285 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f285 method submitResetAllSettings() #txt
As0 f285 disableUIEvents false #txt
As0 f285 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
As0 f285 inActionCode 'out.confirmMsg  = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/adminSettings/resetAllSettingsConfirmation");
out.resetAllSettings = true;' #txt
As0 f285 outParameterDecl '<> result;
' #txt
As0 f285 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>submitResetAllSettings()</name>
    </language>
</elementInfo>
' #txt
As0 f285 1324 271 20 20 13 0 #rect
As0 f285 @|RichDialogMethodStartIcon #fIcon
As0 f75 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f75 1055 415 20 20 13 0 #rect
As0 f75 @|RichDialogProcessEndIcon #fIcon
As0 f76 expr out #txt
As0 f76 1065 291 1065 415 #arcP
As0 f287 expr out #txt
As0 f287 1334 291 1334 415 #arcP
As0 f63 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f63 actionTable 'out=in;
' #txt
As0 f63 actionCode 'import ch.ivy.addon.portalkit.service.GlobalSettingService;
GlobalSettingService globalSettingService = new GlobalSettingService();
globalSettingService.resetGlobalSetting(in.selectedSetting.getKey());
in.selectedSetting.setValueToDefault();' #txt
As0 f63 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reset selected setting</name>
    </language>
</elementInfo>
' #txt
As0 f63 537 1875 128 44 -59 -8 #rect
As0 f63 @|StepIcon #fIcon
As0 f277 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f277 807 1998 26 26 0 12 #rect
As0 f277 @|RichDialogProcessEndIcon #fIcon
As0 f276 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f276 actionTable 'out=in;
' #txt
As0 f276 actionCode 'import ch.ivy.addon.portalkit.enums.GlobalVariable;
import ch.ivy.addon.portalkit.service.GlobalSettingService;
GlobalSettingService globalSettingService = new GlobalSettingService();
int i = 0;
for (GlobalVariable globalVariable : GlobalVariable.values()) {
	globalSettingService.resetGlobalSetting(globalVariable.toString());
	in.settingList.get(i).setValueToDefault();
	i++;
}' #txt
As0 f276 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f276 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reset all settings</name>
    </language>
</elementInfo>
' #txt
As0 f276 764 1877 112 44 -45 -8 #rect
As0 f276 @|StepIcon #fIcon
As0 f67 guid 163DD1F145199579 #txt
As0 f67 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f67 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f67 actionTable 'out=in;
' #txt
As0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetValue</name>
        <nameStyle>10,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f67 588 1788 26 26 -29 15 #rect
As0 f67 @|RichDialogProcessStartIcon #fIcon
As0 f68 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f68 588 1996 26 26 0 12 #rect
As0 f68 @|RichDialogProcessEndIcon #fIcon
As0 f278 guid 163DD1F1451A5EB6 #txt
As0 f278 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f278 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f278 actionTable 'out=in;
' #txt
As0 f278 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetValues</name>
        <nameStyle>11,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f278 807 1788 26 26 -33 15 #rect
As0 f278 @|RichDialogProcessStartIcon #fIcon
As0 f279 expr out #txt
As0 f279 820 1814 820 1877 #arcP
As0 f281 expr out #txt
As0 f281 601 1814 601 1875 #arcP
As0 f29 expr out #txt
As0 f29 952 626 952 724 #arcP
As0 f8 expr out #txt
As0 f8 1160 570 1160 670 #arcP
As0 f9 guid 1640186953392B88 #txt
As0 f9 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f9 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f9 actionTable 'out=in;
' #txt
As0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>loadAllGlobalSettings</name>
        <nameStyle>21,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f9 115 675 26 26 -59 15 #rect
As0 f9 @|RichDialogProcessStartIcon #fIcon
As0 f10 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f10 actionTable 'out=in;
' #txt
As0 f10 actionCode 'import org.apache.commons.collections.CollectionUtils;
import ch.ivy.addon.portalkit.service.GlobalSettingService;

in.settingTabOpened = false;
GlobalSettingService globalSettingService = new GlobalSettingService();
in.settingList = globalSettingService.findAllGlobalSetting();
in.filteredSettingList = in.settingList;' #txt
As0 f10 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find all global settings</name>
    </language>
</elementInfo>
' #txt
As0 f10 64 785 128 44 -60 -8 #rect
As0 f10 @|StepIcon #fIcon
As0 f66 expr out #txt
As0 f66 128 701 128 785 #arcP
As0 f91 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f91 115 883 26 26 0 12 #rect
As0 f91 @|RichDialogProcessEndIcon #fIcon
As0 f97 expr out #txt
As0 f97 128 829 128 883 #arcP
As0 f55 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f55 actionTable 'out=in;
' #txt
As0 f55 actionCode 'import org.primefaces.context.RequestContext;

if (in.settingTabOpened) {
	RequestContext.getCurrentInstance().execute("PF(''settingTable'').clearFilters()");
}' #txt
As0 f55 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>clear filter</name>
    </language>
</elementInfo>
' #txt
As0 f55 232 786 112 44 -26 -8 #rect
As0 f55 @|StepIcon #fIcon
As0 f18 guid 164024E1B1165F19 #txt
As0 f18 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f18 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f18 actionTable 'out=in;
' #txt
As0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>clearSettingTableFilter</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f18 275 675 26 26 -61 15 #rect
As0 f18 @|RichDialogProcessStartIcon #fIcon
As0 f100 expr out #txt
As0 f100 288 701 288 786 #arcP
As0 f98 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f98 275 883 26 26 0 12 #rect
As0 f98 @|RichDialogProcessEndIcon #fIcon
As0 f102 expr out #txt
As0 f102 288 830 288 883 #arcP
As0 f64 expr out #txt
As0 f64 820 1921 820 1998 #arcP
As0 f65 expr out #txt
As0 f65 601 1919 601 1996 #arcP
As0 f4 expr out #txt
As0 f4 528 1516 528 1622 #arcP
As0 f5 expr in #txt
As0 f5 528 1390 528 1436 #arcP
As0 f6 expr out #txt
As0 f6 200 476 200 566 #arcP
As0 f23 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f23 actionTable 'out=in;
' #txt
As0 f23 actionCode 'import ch.ivy.addon.portalkit.ivydata.service.impl.ApplicationService;
in.ivyApplications = ApplicationService.newInstance().findAll();
' #txt
As0 f23 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f23 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get all ivy apps</name>
    </language>
</elementInfo>
' #txt
As0 f23 264 1674 112 44 -40 -8 #rect
As0 f23 @|StepIcon #fIcon
As0 f24 expr out #txt
As0 f24 320 1586 320 1674 #arcP
As0 f25 expr out #txt
As0 f25 320 1718 320 1782 #arcP
As0 f3 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f3 actionTable 'out=in;
' #txt
As0 f3 actionCode in.selectedApp.setServerId(Long.valueOf(1)); #txt
As0 f3 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set local host server id</name>
    </language>
</elementInfo>
' #txt
As0 f3 464 1258 128 44 -61 -8 #rect
As0 f3 @|StepIcon #fIcon
As0 f26 expr out #txt
As0 f26 528 1196 528 1258 #arcP
As0 f27 expr out #txt
As0 f27 528 1302 528 1362 #arcP
As0 f39 expr out #txt
As0 f39 88 1122 88 1220 #arcP
As0 f28 expr in #txt
As0 f28 outCond 'in.type == ch.ivy.addon.portalkit.enums.ApplicationType.IVY_APPLICATION' #txt
As0 f28 584 206 584 374 #arcP
As0 f28 0 0.5226032559978508 0 0 #arcLabel
As0 f21 expr out #txt
As0 f21 952 748 952 870 #arcP
As0 f7 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f7 processCall 'Ivy Data Processes/SecurityService:findUsers(ch.ivyteam.ivy.application.IApplication)' #txt
As0 f7 doCall true #txt
As0 f7 requestActionDecl '<ch.ivyteam.ivy.application.IApplication application> param;
' #txt
As0 f7 requestMappingAction 'param.application=in.app;
' #txt
As0 f7 responseActionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f7 responseMappingAction 'out=in;
out.errors=result.errors;
out.usersApplicationList=result.users;
' #txt
As0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SecurityService</name>
    </language>
</elementInfo>
' #txt
As0 f7 1104 930 112 44 -41 -8 #rect
As0 f7 @|CallSubIcon #fIcon
As0 f12 expr out #txt
As0 f12 1160 974 1160 1012 #arcP
As0 f14 actionDecl 'ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData out;
' #txt
As0 f14 actionTable 'out=in;
' #txt
As0 f14 actionCode 'import ch.ivyteam.ivy.server.ServerFactory;
in.app = ServerFactory.getServer().getApplicationConfigurationManager().findApplication(in.selectedApp.name);' #txt
As0 f14 security system #txt
As0 f14 type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
As0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find app</name>
    </language>
</elementInfo>
' #txt
As0 f14 1104 810 112 44 -22 -8 #rect
As0 f14 @|StepIcon #fIcon
As0 f16 expr out #txt
As0 f16 1160 738 1160 810 #arcP
As0 f13 expr out #txt
As0 f13 1160 854 1160 930 #arcP
As0 f19 expr in #txt
As0 f19 outCond '!in.duplicateApp	' #txt
As0 f19 528 742 528 858 #arcP
As0 f22 expr out #txt
As0 f22 200 274 200 388 #arcP
>Proto As0 .type ch.ivy.addon.portalkit.admin.AdminSettings.AdminSettingsData #txt
>Proto As0 .processKind HTML_DIALOG #txt
>Proto As0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name></name>
        <swimlaneLabel>Start Method</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel>Methods</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>256</swimlaneSize>
    <swimlaneSize>840</swimlaneSize>
    <swimlaneSize>912</swimlaneSize>
    <swimlaneColor gradient="true">-1</swimlaneColor>
    <swimlaneColor gradient="true">-13057</swimlaneColor>
    <swimlaneColor gradient="true">-3342337</swimlaneColor>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneType>LANE</swimlaneType>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>0</swimlaneSpaceBefore>
</elementInfo>
' #txt
>Proto As0 -8 -8 16 16 16 26 #rect
>Proto As0 '' #fIcon
As0 f32 mainOut f36 tail #connect
As0 f36 head f35 mainIn #connect
As0 f35 mainOut f34 tail #connect
As0 f34 head f33 mainIn #connect
As0 f47 mainOut f59 tail #connect
As0 f59 head f58 mainIn #connect
As0 f69 mainOut f73 tail #connect
As0 f73 head f72 mainIn #connect
As0 f72 mainOut f71 tail #connect
As0 f71 head f70 mainIn #connect
As0 f113 mainOut f116 tail #connect
As0 f116 head f115 in #connect
As0 f118 head f117 mainIn #connect
As0 f117 mainOut f120 tail #connect
As0 f120 head f119 mainIn #connect
As0 f158 mainOut f160 tail #connect
As0 f160 head f156 mainIn #connect
As0 f161 mainOut f163 tail #connect
As0 f163 head f162 mainIn #connect
As0 f176 mainOut f180 tail #connect
As0 f180 head f179 mainIn #connect
As0 f192 mainOut f195 tail #connect
As0 f195 head f178 in #connect
As0 f178 out f197 tail #connect
As0 f197 head f193 mainIn #connect
As0 f193 mainOut f199 tail #connect
As0 f199 head f188 mainIn #connect
As0 f185 mainOut f207 tail #connect
As0 f207 head f202 mainIn #connect
As0 f202 mainOut f208 tail #connect
As0 f208 head f194 mainIn #connect
As0 f190 mainOut f191 tail #connect
As0 f191 head f188 mainIn #connect
As0 f88 mainOut f206 tail #connect
As0 f206 head f103 in #connect
As0 f173 mainOut f171 tail #connect
As0 f171 head f170 in #connect
As0 f156 mainOut f223 tail #connect
As0 f223 head f222 mainIn #connect
As0 f178 out f186 tail #connect
As0 f186 head f190 mainIn #connect
As0 f217 mainOut f189 tail #connect
As0 f189 head f17 mainIn #connect
As0 f222 mainOut f159 tail #connect
As0 f159 head f157 mainIn #connect
As0 f54 mainOut f198 tail #connect
As0 f198 head f196 in #connect
As0 f220 head f205 mainIn #connect
As0 f205 mainOut f204 tail #connect
As0 f204 head f45 mainIn #connect
As0 f37 mainOut f114 tail #connect
As0 f114 head f113 mainIn #connect
As0 f209 out f211 tail #connect
As0 f211 head f173 mainIn #connect
As0 f209 out f213 tail #connect
As0 f213 head f212 mainIn #connect
As0 f212 mainOut f214 tail #connect
As0 f214 head f170 in #connect
As0 f92 mainOut f53 tail #connect
As0 f53 head f52 mainIn #connect
As0 f170 out f168 tail #connect
As0 f168 head f155 mainIn #connect
As0 f155 mainOut f184 tail #connect
As0 f184 head f229 mainIn #connect
As0 f229 mainOut f230 tail #connect
As0 f230 head f228 mainIn #connect
As0 f200 mainOut f226 tail #connect
As0 f226 head f225 mainIn #connect
As0 f225 mainOut f227 tail #connect
As0 f227 head f216 mainIn #connect
As0 f231 mainOut f187 tail #connect
As0 f187 head f177 mainIn #connect
As0 f179 mainOut f181 tail #connect
As0 f181 head f231 mainIn #connect
As0 f169 mainOut f122 tail #connect
As0 f122 head f121 mainIn #connect
As0 f141 mainOut f124 tail #connect
As0 f124 head f142 mainIn #connect
As0 f170 out f133 tail #connect
As0 f133 head f88 mainIn #connect
As0 f143 mainOut f145 tail #connect
As0 f145 head f144 mainIn #connect
As0 f2 mainOut f153 tail #connect
As0 f153 head f99 mainIn #connect
As0 f44 mainOut f263 tail #connect
As0 f263 head f54 mainIn #connect
As0 f40 mainOut f41 tail #connect
As0 f41 head f93 mainIn #connect
As0 f0 mainOut f265 tail #connect
As0 f265 head f1 mainIn #connect
As0 f74 mainOut f76 tail #connect
As0 f76 head f75 mainIn #connect
As0 f285 mainOut f287 tail #connect
As0 f287 head f286 mainIn #connect
As0 f67 mainOut f281 tail #connect
As0 f281 head f63 mainIn #connect
As0 f278 mainOut f279 tail #connect
As0 f279 head f276 mainIn #connect
As0 f80 mainOut f29 tail #connect
As0 f29 head f15 mainIn #connect
As0 f61 mainOut f8 tail #connect
As0 f8 head f62 mainIn #connect
As0 f9 mainOut f66 tail #connect
As0 f66 head f10 mainIn #connect
As0 f10 mainOut f97 tail #connect
As0 f97 head f91 mainIn #connect
As0 f18 mainOut f100 tail #connect
As0 f100 head f55 mainIn #connect
As0 f55 mainOut f102 tail #connect
As0 f102 head f98 mainIn #connect
As0 f276 mainOut f64 tail #connect
As0 f64 head f277 mainIn #connect
As0 f63 mainOut f65 tail #connect
As0 f65 head f68 mainIn #connect
As0 f93 mainOut f4 tail #connect
As0 f4 head f38 mainIn #connect
As0 f103 out f5 tail #connect
As0 f5 head f40 mainIn #connect
As0 f52 mainOut f6 tail #connect
As0 f6 head f48 mainIn #connect
As0 f138 mainOut f24 tail #connect
As0 f24 head f23 mainIn #connect
As0 f23 mainOut f25 tail #connect
As0 f25 head f127 mainIn #connect
As0 f228 mainOut f26 tail #connect
As0 f26 head f3 mainIn #connect
As0 f3 mainOut f27 tail #connect
As0 f27 head f103 in #connect
As0 f11 mainOut f39 tail #connect
As0 f39 head f217 mainIn #connect
As0 f196 out f28 tail #connect
As0 f28 head f45 mainIn #connect
As0 f196 out f220 tail #connect
As0 f15 mainOut f21 tail #connect
As0 f21 head f81 mainIn #connect
As0 f7 mainOut f12 tail #connect
As0 f12 head f169 mainIn #connect
As0 f20 mainOut f16 tail #connect
As0 f16 head f14 mainIn #connect
As0 f14 mainOut f13 tail #connect
As0 f13 head f7 mainIn #connect
As0 f115 out f19 tail #connect
As0 f19 head f209 in #connect
As0 f115 out f118 tail #connect
As0 f165 mainOut f22 tail #connect
As0 f22 head f92 mainIn #connect
