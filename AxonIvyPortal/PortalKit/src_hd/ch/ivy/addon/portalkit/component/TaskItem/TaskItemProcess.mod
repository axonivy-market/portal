[Ivy]
150CB86EFC2F2972 3.26 #module
>Proto >Proto Collection #zClass
Ts0 TaskItemProcess Big #zClass
Ts0 RD #cInfo
Ts0 #process
Ts0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ts0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ts0 @TextInP .resExport .resExport #zField
Ts0 @TextInP .type .type #zField
Ts0 @TextInP .processKind .processKind #zField
Ts0 @AnnotationInP-0n ai ai #zField
Ts0 @MessageFlowInP-0n messageIn messageIn #zField
Ts0 @MessageFlowOutP-0n messageOut messageOut #zField
Ts0 @TextInP .xml .xml #zField
Ts0 @TextInP .responsibility .responsibility #zField
Ts0 @RichDialogProcessEnd f94 '' #zField
Ts0 @RichDialogProcessEnd f46 '' #zField
Ts0 @Alternative f79 '' #zField
Ts0 @RichDialogProcessEnd f106 '' #zField
Ts0 @RichDialogProcessStart f36 '' #zField
Ts0 @PushWFArc f92 '' #zField
Ts0 @RichDialogProcessEnd f98 '' #zField
Ts0 @GridStep f27 '' #zField
Ts0 @RichDialogProcessEnd f17 '' #zField
Ts0 @RichDialogProcessEnd f62 '' #zField
Ts0 @RichDialogProcessEnd f11 '' #zField
Ts0 @RichDialogProcessEnd f70 '' #zField
Ts0 @CallSub f103 '' #zField
Ts0 @GridStep f56 '' #zField
Ts0 @RichDialogMethodStart f33 '' #zField
Ts0 @PushWFArc f55 '' #zField
Ts0 @GridStep f54 '' #zField
Ts0 @RichDialogMethodStart f13 '' #zField
Ts0 @RichDialogProcessEnd f1 '' #zField
Ts0 @RichDialogProcessEnd f3 '' #zField
Ts0 @RichDialogMethodStart f108 '' #zField
Ts0 @RichDialogMethodStart f12 '' #zField
Ts0 @RichDialogMethodStart f30 '' #zField
Ts0 @PushWFArc f87 '' #zField
Ts0 @GridStep f80 '' #zField
Ts0 @GridStep f19 '' #zField
Ts0 @GridStep f66 '' #zField
Ts0 @PushWFArc f57 '' #zField
Ts0 @Alternative f77 '' #zField
Ts0 @PushWFArc f110 '' #zField
Ts0 @RichDialogProcessEnd f109 '' #zField
Ts0 @PushWFArc f101 '' #zField
Ts0 @PushWFArc f67 '' #zField
Ts0 @PushWFArc f100 '' #zField
Ts0 @Alternative f99 '' #zField
Ts0 @PushWFArc f78 '' #zField
Ts0 @GridStep f47 '' #zField
Ts0 @PushWFArc f8 '' #zField
Ts0 @GridStep f7 '' #zField
Ts0 @PushWFArc f104 '' #zField
Ts0 @CallSub f20 '' #zField
Ts0 @PushWFArc f23 '' #zField
Ts0 @PushWFArc f14 '' #zField
Ts0 @GridStep f10 '' #zField
Ts0 @PushWFArc f95 '' #zField
Ts0 @RichDialogMethodStart f76 '' #zField
Ts0 @RichDialogMethodStart f39 '' #zField
Ts0 @PushWFArc f73 '' #zField
Ts0 @PushWFArc f50 '' #zField
Ts0 @GridStep f49 '' #zField
Ts0 @PushWFArc f29 '' #zField
Ts0 @RichDialogMethodStart f22 '' #zField
Ts0 @PushWFArc f81 '' #zField
Ts0 @RichDialogMethodStart f97 '' #zField
Ts0 @PushWFArc f52 '' #zField
Ts0 @PushWFArc f102 '' #zField
Ts0 @GridStep f24 '' #zField
Ts0 @PushWFArc f71 '' #zField
Ts0 @RichDialogProcessEnd f68 '' #zField
Ts0 @PushWFArc f34 '' #zField
Ts0 @RichDialogProcessEnd f28 '' #zField
Ts0 @PushWFArc f32 '' #zField
Ts0 @GridStep f2 '' #zField
Ts0 @PushWFArc f21 '' #zField
Ts0 @PushWFArc f5 '' #zField
Ts0 @GridStep f4 '' #zField
Ts0 @PushWFArc f25 '' #zField
Ts0 @PushWFArc f26 '' #zField
Ts0 @GridStep f15 '' #zField
Ts0 @PushWFArc f69 '' #zField
Ts0 @RichDialogMethodStart f96 '' #zField
Ts0 @PushWFArc f111 '' #zField
Ts0 @PushWFArc f107 '' #zField
Ts0 @GridStep f105 '' #zField
Ts0 @PushWFArc f63 '' #zField
Ts0 @PushWFArc f61 '' #zField
Ts0 @GridStep f48 '' #zField
Ts0 @PushWFArc f65 '' #zField
Ts0 @PushWFArc f64 '' #zField
Ts0 @GridStep f35 '' #zField
Ts0 @PushWFArc f60 '' #zField
Ts0 @PushWFArc f58 '' #zField
Ts0 @GridStep f45 '' #zField
Ts0 @PushWFArc f31 '' #zField
Ts0 @RichDialogInitStart f0 '' #zField
>Proto Ts0 Ts0 TaskItemProcess #zField
Ts0 f94 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f94 339 1043 26 26 0 12 #rect
Ts0 f94 @|RichDialogProcessEndIcon #fIcon
Ts0 f46 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f46 1043 467 26 26 0 12 #rect
Ts0 f46 @|RichDialogProcessEndIcon #fIcon
Ts0 f79 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f79 336 656 32 32 0 16 #rect
Ts0 f79 @|AlternativeIcon #fIcon
Ts0 f106 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f106 819 947 26 26 0 12 #rect
Ts0 f106 @|RichDialogProcessEndIcon #fIcon
Ts0 f36 guid 16816B4C738DA4B0 #txt
Ts0 f36 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f36 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f36 actionTable 'out=in;
' #txt
Ts0 f36 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>changeAssignType</name>
    </language>
</elementInfo>
' #txt
Ts0 f36 83 851 26 26 -47 15 #rect
Ts0 f36 @|RichDialogProcessStartIcon #fIcon
Ts0 f92 expr in #txt
Ts0 f92 outCond in.canUserResumeTask #txt
Ts0 f92 368 672 467 672 #arcP
Ts0 f98 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f98 467 659 26 26 0 12 #rect
Ts0 f98 @|RichDialogProcessEndIcon #fIcon
Ts0 f27 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f27 actionTable 'out=in;
' #txt
Ts0 f27 actionCode 'import ch.ivy.addon.portalkit.util.TaskUtils;

TaskUtils.resetTask(in.task);' #txt
Ts0 f27 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Reset task</name>
    </language>
</elementInfo>
' #txt
Ts0 f27 168 170 112 44 -29 -8 #rect
Ts0 f27 @|StepIcon #fIcon
Ts0 f17 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f17 -106 1334 20 20 13 0 #rect
Ts0 f17 @|RichDialogProcessEndIcon #fIcon
Ts0 f62 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f62 339 275 26 26 0 12 #rect
Ts0 f62 @|RichDialogProcessEndIcon #fIcon
Ts0 f11 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f11 819 1235 26 26 0 12 #rect
Ts0 f11 @|RichDialogProcessEndIcon #fIcon
Ts0 f70 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f70 339 1139 26 26 0 12 #rect
Ts0 f70 @|RichDialogProcessEndIcon #fIcon
Ts0 f103 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f103 processCall 'Functional Processes/CalculateTaskDelegate:call(List<ch.ivyteam.ivy.security.IRole>,List<ch.ivyteam.ivy.security.IUser>,ch.ivyteam.ivy.security.ISecurityMember,ch.ivyteam.ivy.workflow.ITask)' #txt
Ts0 f103 doCall true #txt
Ts0 f103 requestActionDecl '<java.util.List<ch.ivyteam.ivy.security.IRole> roles,java.util.List<ch.ivyteam.ivy.security.IUser> users,ch.ivyteam.ivy.security.ISecurityMember currentUser,ch.ivyteam.ivy.workflow.ITask task> param;
' #txt
Ts0 f103 requestMappingAction 'param.roles=in.rolesToDelegate;
param.users=in.usersToDelegate;
param.currentUser=ivy.session.getSessionUser();
param.task=in.task;
' #txt
Ts0 f103 responseActionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f103 responseMappingAction 'out=in;
out.rolesToDelegate=result.roles;
out.usersToDelegate=result.users;
' #txt
Ts0 f103 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>CalculateTaskDelegate</name>
    </language>
</elementInfo>
' #txt
Ts0 f103 472 938 144 44 -64 -8 #rect
Ts0 f103 @|CallSubIcon #fIcon
Ts0 f56 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f56 actionTable 'out=in;
' #txt
Ts0 f56 actionCode 'import javax.faces.context.FacesContext;
import ch.ivyteam.ivy.server.ServerFactory;
import ch.ivyteam.ivy.request.RequestUriFactory;
import javax.servlet.http.HttpServletRequest;
import ch.ivy.addon.portalkit.support.UrlDetector;
import ch.ivyteam.ivy.workflow.IProcessStart;
import ch.ivy.addon.portalkit.service.ProcessStartCollector;

ProcessStartCollector collector = new ProcessStartCollector(ivy.wf.getApplication());
java.util.List<IProcessStart> processStarts = collector.findProcessStartRequestPathContainsKeyword("restorePortalTaskList.ivp");
UrlDetector urlDetector = new UrlDetector();
HttpServletRequest request = FacesContext.getCurrentInstance().getExternalContext().getRequest() as HttpServletRequest;
out.callbackUrl = urlDetector.getBaseURLWithoutContextPath(request) + RequestUriFactory.createProcessStartUri(ServerFactory.getServer().getApplicationConfigurationManager(), processStarts.get(0));' #txt
Ts0 f56 security system #txt
Ts0 f56 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f56 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build callbackUrl</name>
        <nameStyle>17
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f56 424 458 112 44 -46 -8 #rect
Ts0 f56 @|StepIcon #fIcon
Ts0 f33 guid 16816C4D9766CFA8 #txt
Ts0 f33 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f33 method openTask(ch.ivyteam.ivy.workflow.ITask,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel) #txt
Ts0 f33 disableUIEvents false #txt
Ts0 f33 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel dataModel> param = methodEvent.getInputArguments();
' #txt
Ts0 f33 inParameterMapAction 'out.dataModel=param.dataModel;
out.task=param.task;
' #txt
Ts0 f33 outParameterDecl '<> result;
' #txt
Ts0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openTask(ITask,TaskLazyDataModel)</name>
    </language>
</elementInfo>
' #txt
Ts0 f33 83 467 26 26 -80 15 #rect
Ts0 f33 @|RichDialogMethodStartIcon #fIcon
Ts0 f55 expr out #txt
Ts0 f55 536 480 576 480 #arcP
Ts0 f54 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f54 actionTable 'out=in;
' #txt
Ts0 f54 actionCode 'import ch.ivy.addon.portalkit.enums.AdditionalProperty;

in.task.setAdditionalProperty(AdditionalProperty.PORTAL_TASK_CALLBACK_URI.toString(), in.callbackUrl);' #txt
Ts0 f54 security system #txt
Ts0 f54 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set additional property</name>
    </language>
</elementInfo>
' #txt
Ts0 f54 576 458 128 44 -61 -8 #rect
Ts0 f54 @|StepIcon #fIcon
Ts0 f13 guid 16817CBC68AF60CA #txt
Ts0 f13 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f13 method delegateTask() #txt
Ts0 f13 disableUIEvents false #txt
Ts0 f13 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f13 outParameterDecl '<> result;
' #txt
Ts0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delegateTask()</name>
    </language>
</elementInfo>
' #txt
Ts0 f13 83 1235 26 26 -41 15 #rect
Ts0 f13 @|RichDialogMethodStartIcon #fIcon
Ts0 f1 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f1 339 83 26 26 0 12 #rect
Ts0 f1 @|RichDialogProcessEndIcon #fIcon
Ts0 f3 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f3 339 851 26 26 0 12 #rect
Ts0 f3 @|RichDialogProcessEndIcon #fIcon
Ts0 f108 guid 161932E544273665 #txt
Ts0 f108 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f108 method setSelectedTaskAndDataModel(ch.ivyteam.ivy.workflow.ITask,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel) #txt
Ts0 f108 disableUIEvents false #txt
Ts0 f108 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel dataModel> param = methodEvent.getInputArguments();
' #txt
Ts0 f108 inParameterMapAction 'out.dataModel=param.dataModel;
out.task=param.task;
' #txt
Ts0 f108 outParameterDecl '<> result;
' #txt
Ts0 f108 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setSelectedTaskAndDataModel(ITask,TaskLazyDataModel)</name>
    </language>
</elementInfo>
' #txt
Ts0 f108 83 755 26 26 -85 17 #rect
Ts0 f108 @|RichDialogMethodStartIcon #fIcon
Ts0 f12 guid 168179A956B8EBA7 #txt
Ts0 f12 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f12 method initDataToDelegate(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f12 disableUIEvents false #txt
Ts0 f12 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task> param = methodEvent.getInputArguments();
' #txt
Ts0 f12 inParameterMapAction 'out.task=param.task;
' #txt
Ts0 f12 outParameterDecl '<> result;
' #txt
Ts0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initDataToDelegate(ITask)</name>
    </language>
</elementInfo>
' #txt
Ts0 f12 83 947 26 26 -72 15 #rect
Ts0 f12 @|RichDialogMethodStartIcon #fIcon
Ts0 f30 guid 16816C2D98C57DA7 #txt
Ts0 f30 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f30 method resetAndOpenTask() #txt
Ts0 f30 disableUIEvents false #txt
Ts0 f30 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f30 outParameterDecl '<> result;
' #txt
Ts0 f30 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetAndOpenTask()</name>
    </language>
</elementInfo>
' #txt
Ts0 f30 83 371 26 26 -57 15 #rect
Ts0 f30 @|RichDialogMethodStartIcon #fIcon
Ts0 f87 expr out #txt
Ts0 f87 288 672 336 672 #arcP
Ts0 f80 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f80 actionTable 'out=in;
' #txt
Ts0 f80 actionCode 'import ch.ivy.addon.portalkit.jsf.ManagedBeans;
import ch.ivy.addon.portalkit.bean.TaskActionBean;

TaskActionBean taskActionBean = ManagedBeans.get("taskActionBean") as TaskActionBean;
out.canUserResumeTask = taskActionBean.canResume(in.task);
' #txt
Ts0 f80 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if can resume</name>
    </language>
</elementInfo>
' #txt
Ts0 f80 160 650 128 44 -56 -8 #rect
Ts0 f80 @|StepIcon #fIcon
Ts0 f19 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f19 actionTable 'out=in;
' #txt
Ts0 f19 actionCode 'import ch.ivy.addon.portalkit.util.TaskUtils;

TaskUtils.delegateTask(in.task, in.delegatedSecurityMember);' #txt
Ts0 f19 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delegate task</name>
    </language>
</elementInfo>
' #txt
Ts0 f19 488 1226 112 44 -38 -8 #rect
Ts0 f19 @|StepIcon #fIcon
Ts0 f66 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f66 actionTable 'out=in;
' #txt
Ts0 f66 actionCode 'import ch.ivyteam.ivy.security.IUser;
import org.apache.commons.lang3.StringUtils;
import ch.ivyteam.ivy.workflow.TaskState;
import javax.faces.context.FacesContext;
import javax.faces.application.FacesMessage;
import org.primefaces.context.RequestContext;

RequestContext requesContext = RequestContext.getCurrentInstance();
FacesContext facesContext = FacesContext.getCurrentInstance();

String notification;
if(in.task.getState() == TaskState.DONE){
	notification = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/components/taskStart/cannotStartMessages/taskDone", [in.task.getName()]);
} else {
	IUser worker = in.task.getWorkerUser();
	if (worker != null){
		String fullName = worker.getFullName();
		String workerName = StringUtils.isBlank(fullName) ? worker.getName() : worker.getFullName() + " (" + worker.getName() + ")";
		notification = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/components/taskStart/cannotStartMessages/isAnotherUserWorking", [in.task.name, in.task.getId(), worker]);
	} else {
		notification = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/components/taskStart/cannotStartMessages/noPermission", [in.task.getName()]);
	}
}

facesContext.validationFailed();
facesContext.addMessage("portal-global-growl", new FacesMessage(FacesMessage.SEVERITY_INFO, notification, null));
requesContext.update("portal-global-growl");  
' #txt
Ts0 f66 security system #txt
Ts0 f66 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f66 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display error</name>
    </language>
</elementInfo>
' #txt
Ts0 f66 424 554 112 44 -35 -8 #rect
Ts0 f66 @|StepIcon #fIcon
Ts0 f57 expr in #txt
Ts0 f57 outCond in.canUserResumeTask #txt
Ts0 f57 366 480 424 480 #arcP
Ts0 f77 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f77 338 466 28 28 14 0 #rect
Ts0 f77 @|AlternativeIcon #fIcon
Ts0 f110 expr out #txt
Ts0 f110 109 768 339 768 #arcP
Ts0 f110 0 0.49999999999999994 0 0 #arcLabel
Ts0 f109 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f109 339 755 26 26 0 12 #rect
Ts0 f109 @|RichDialogProcessEndIcon #fIcon
Ts0 f101 expr in #txt
Ts0 f101 352 656 352 592 #arcP
Ts0 f67 expr in #txt
Ts0 f67 368 576 424 576 #arcP
Ts0 f67 0 0.1527488616366867 0 0 #arcLabel
Ts0 f100 expr in #txt
Ts0 f100 352 494 352 560 #arcP
Ts0 f100 0 0.6038825846613081 0 0 #arcLabel
Ts0 f99 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f99 336 560 32 32 0 16 #rect
Ts0 f99 @|AlternativeIcon #fIcon
Ts0 f78 expr out #txt
Ts0 f78 984 480 1043 480 #arcP
Ts0 f47 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f47 actionTable 'out=in;
' #txt
Ts0 f47 actionCode 'import ch.ivyteam.ivy.request.RequestUriFactory;
import java.net.URI;
import ch.ivyteam.ivy.server.ServerFactory;
import ch.ivyteam.ivy.application.IApplicationConfigurationManager;
import javax.faces.context.FacesContext;

IApplicationConfigurationManager appConfig = ServerFactory.getServer().getApplicationConfigurationManager();
URI taskUri = RequestUriFactory.createTaskStartUri(appConfig, in.task);
FacesContext.getCurrentInstance().getExternalContext().redirect(taskUri.toString());' #txt
Ts0 f47 security system #txt
Ts0 f47 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open task</name>
    </language>
</elementInfo>
' #txt
Ts0 f47 872 458 112 44 -28 -8 #rect
Ts0 f47 @|StepIcon #fIcon
Ts0 f8 expr out #txt
Ts0 f8 448 1248 488 1248 #arcP
Ts0 f7 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f7 actionTable 'out=in;
' #txt
Ts0 f7 actionCode 'String newResponsibleName = in.delegatedSecurityMember.getDisplayName();
String oldResponsibleName = in.task.getActivator().getDisplayName();

in.delegateComment = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/taskDelegate/delegateComment", [in.task.getId(), oldResponsibleName, newResponsibleName]);' #txt
Ts0 f7 security system #txt
Ts0 f7 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Create note</name>
    </language>
</elementInfo>
' #txt
Ts0 f7 336 1226 112 44 -32 -8 #rect
Ts0 f7 @|StepIcon #fIcon
Ts0 f104 expr out #txt
Ts0 f104 440 960 472 960 #arcP
Ts0 f20 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f20 processCall 'Ivy Data Processes/SecurityService:findSecurityMembers(ch.ivyteam.ivy.application.IApplication)' #txt
Ts0 f20 doCall true #txt
Ts0 f20 requestActionDecl '<ch.ivyteam.ivy.application.IApplication application> param;
' #txt
Ts0 f20 requestMappingAction 'param.application=in.application;
' #txt
Ts0 f20 responseActionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f20 responseMappingAction 'out=in;
out.errors=result.errors;
out.rolesToDelegate=result.roles;
out.usersToDelegate=result.users;
' #txt
Ts0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SecurityService</name>
    </language>
</elementInfo>
' #txt
Ts0 f20 328 938 112 44 -41 -8 #rect
Ts0 f20 @|CallSubIcon #fIcon
Ts0 f23 expr out #txt
Ts0 f23 296 1248 336 1248 #arcP
Ts0 f14 expr out #txt
Ts0 f14 109 1248 184 1248 #arcP
Ts0 f10 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f10 actionTable 'out=in;
' #txt
Ts0 f10 actionCode 'import ch.ivy.addon.portalkit.util.TaskUtils;

TaskUtils.resetTask(in.task);' #txt
Ts0 f10 security system #txt
Ts0 f10 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Reset task</name>
    </language>
</elementInfo>
' #txt
Ts0 f10 184 1226 112 44 -29 -8 #rect
Ts0 f10 @|StepIcon #fIcon
Ts0 f95 expr out #txt
Ts0 f95 109 1152 339 1152 #arcP
Ts0 f76 guid 15F8F5A744248DE3 #txt
Ts0 f76 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f76 method autoCompleteForUserDelegate(String) #txt
Ts0 f76 disableUIEvents false #txt
Ts0 f76 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String query> param = methodEvent.getInputArguments();
' #txt
Ts0 f76 inParameterMapAction 'out.queryAutoComplete=param.query;
' #txt
Ts0 f76 outParameterDecl '<java.util.List<ch.ivyteam.ivy.security.IUser> usersToDelegate> result;
' #txt
Ts0 f76 outActionCode 'import ch.ivy.addon.portalkit.util.UserUtils;

result.usersToDelegate = UserUtils.filterUsers(in.usersToDelegate, in.queryAutoComplete);
' #txt
Ts0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>autoCompleteForUserDelegate(String)</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f76 83 1139 26 26 -52 12 #rect
Ts0 f76 @|RichDialogMethodStartIcon #fIcon
Ts0 f39 guid 16816B96E5CA66CF #txt
Ts0 f39 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f39 method parkTask(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f39 disableUIEvents false #txt
Ts0 f39 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task> param = methodEvent.getInputArguments();
' #txt
Ts0 f39 inParameterMapAction 'out.task=param.task;
' #txt
Ts0 f39 outParameterDecl '<> result;
' #txt
Ts0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>parkTask(ITask)</name>
    </language>
</elementInfo>
' #txt
Ts0 f39 83 275 26 26 -44 15 #rect
Ts0 f39 @|RichDialogMethodStartIcon #fIcon
Ts0 f73 expr out #txt
Ts0 f73 704 480 728 480 #arcP
Ts0 f50 expr out #txt
Ts0 f50 840 480 872 480 #arcP
Ts0 f49 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f49 actionTable 'out=in;
' #txt
Ts0 f49 actionCode 'import ch.ivy.addon.portalkit.enums.NavigationHistory;
import ch.ivy.addon.portalkit.datamodel.CaseLazyDataModel;
import ch.ivy.addon.portalkit.datamodel.SearchResultsDataModel;
import ch.ivy.addon.portalkit.jsf.ManagedBeans;
import ch.ivy.addon.portalkit.bean.NavigationHistoryBean;
import ch.ivy.addon.portalkit.dto.TaskEndInfo;
import ch.ivy.addon.portalkit.service.StickyTaskListService;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.util.SecurityServiceUtils;
import java.util.Map;
import ch.ivy.addon.portalkit.enums.SessionAttribute;

TaskEndInfo taskEndInfo = new TaskEndInfo();
taskEndInfo.setDataModel(in.dataModel);
taskEndInfo.setIsFromPortalHome(in.dataModel.compactMode);

NavigationHistoryBean navigationHistoryBean = ManagedBeans.get("navigationHistoryBean") as NavigationHistoryBean;
if (navigationHistoryBean.navigationHistory.equals("SEARCH_RESULTS")) {
	taskEndInfo.setNavigationHistory(NavigationHistory.SEARCH_RESULTS);
}

String taskDataModelSessionAttributeKey = StickyTaskListService.service().getTaskEndInfoSessionAttributeKey(in.task.getId());
SecurityServiceUtils.setSessionAttribute(taskDataModelSessionAttributeKey, taskEndInfo);' #txt
Ts0 f49 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Store task end info</name>
    </language>
</elementInfo>
' #txt
Ts0 f49 728 458 112 44 -51 -8 #rect
Ts0 f49 @|StepIcon #fIcon
Ts0 f29 expr out #txt
Ts0 f29 109 192 168 192 #arcP
Ts0 f22 guid 16816B7003AE2C84 #txt
Ts0 f22 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f22 method resetTask(ch.ivyteam.ivy.workflow.ITask) #txt
Ts0 f22 disableUIEvents false #txt
Ts0 f22 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task> param = methodEvent.getInputArguments();
' #txt
Ts0 f22 inParameterMapAction 'out.task=param.task;
' #txt
Ts0 f22 outParameterDecl '<> result;
' #txt
Ts0 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetTask(ITask)</name>
    </language>
</elementInfo>
' #txt
Ts0 f22 83 179 26 26 -46 15 #rect
Ts0 f22 @|RichDialogMethodStartIcon #fIcon
Ts0 f81 expr out #txt
Ts0 f81 109 672 160 672 #arcP
Ts0 f97 guid 1602EFA80B079E1D #txt
Ts0 f97 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f97 method validate(ch.ivyteam.ivy.workflow.ITask,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel) #txt
Ts0 f97 disableUIEvents false #txt
Ts0 f97 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.workflow.ITask task,ch.ivy.addon.portalkit.datamodel.TaskLazyDataModel dataModel> param = methodEvent.getInputArguments();
' #txt
Ts0 f97 inParameterMapAction 'out.dataModel=param.dataModel;
out.task=param.task;
' #txt
Ts0 f97 outParameterDecl '<> result;
' #txt
Ts0 f97 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>validate(ITask,TaskLazyDataModel)</name>
    </language>
</elementInfo>
' #txt
Ts0 f97 83 659 26 26 -60 16 #rect
Ts0 f97 @|RichDialogMethodStartIcon #fIcon
Ts0 f52 expr out #txt
Ts0 f52 280 960 328 960 #arcP
Ts0 f102 expr out #txt
Ts0 f102 109 960 168 960 #arcP
Ts0 f24 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f24 actionTable 'out=in;
' #txt
Ts0 f24 actionCode 'in.disabledDelegateButton = true;
in.isUserDelegated = true;
in.delegatedSecurityMember = null;
in.application = in.task.getApplication();' #txt
Ts0 f24 security system #txt
Ts0 f24 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init data</name>
    </language>
</elementInfo>
' #txt
Ts0 f24 168 938 112 44 -21 -8 #rect
Ts0 f24 @|StepIcon #fIcon
Ts0 f71 expr out #txt
Ts0 f71 536 576 595 576 #arcP
Ts0 f68 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f68 595 563 26 26 0 12 #rect
Ts0 f68 @|RichDialogProcessEndIcon #fIcon
Ts0 f34 expr out #txt
Ts0 f34 280 192 339 192 #arcP
Ts0 f28 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f28 339 179 26 26 0 12 #rect
Ts0 f28 @|RichDialogProcessEndIcon #fIcon
Ts0 f32 expr out #txt
Ts0 f32 280 96 339 96 #arcP
Ts0 f2 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f2 actionTable 'out=in;
' #txt
Ts0 f2 actionCode 'import ch.ivy.addon.portalkit.enums.PortalPermission;
import ch.ivy.addon.portalkit.util.PermissionUtils;
import ch.ivy.addon.portalkit.enums.GlobalVariable;
import ch.ivy.addon.portalkit.service.GlobalSettingService;

GlobalSettingService service = new GlobalSettingService();
String isShowTaskButtonLabels =  service.findGlobalSettingValue(GlobalVariable.SHOW_TASK_BUTTON_LABELS.toString());

if(isShowTaskButtonLabels != null && !isShowTaskButtonLabels.isEmpty()){
	in.isShowTaskButtonLabels = Boolean.parseBoolean(isShowTaskButtonLabels);
} else{
	in.isShowTaskButtonLabels = false;	
}

' #txt
Ts0 f2 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init show/hide&#xD;
button label&#xD;
More actions</name>
    </language>
</elementInfo>
' #txt
Ts0 f2 168 66 112 60 -38 -24 #rect
Ts0 f2 @|StepIcon #fIcon
Ts0 f21 expr out #txt
Ts0 f21 109 864 152 864 #arcP
Ts0 f5 expr out #txt
Ts0 f5 296 864 339 864 #arcP
Ts0 f4 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f4 actionTable 'out=in;
' #txt
Ts0 f4 actionCode 'out.delegatedSecurityMember = null;
out.disabledDelegateButton = true;
' #txt
Ts0 f4 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f4 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Change assignee type&#xD;
to delegate</name>
    </language>
</elementInfo>
' #txt
Ts0 f4 152 842 144 44 -54 -16 #rect
Ts0 f4 @|StepIcon #fIcon
Ts0 f25 expr out #txt
Ts0 f25 760 1248 819 1248 #arcP
Ts0 f26 expr out #txt
Ts0 f26 600 1248 648 1248 #arcP
Ts0 f15 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f15 actionTable 'out=in;
' #txt
Ts0 f15 actionCode 'in.task.getCase().getBusinessCase().createNote(ivy.session, in.delegateComment);' #txt
Ts0 f15 security system #txt
Ts0 f15 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Add note</name>
    </language>
</elementInfo>
' #txt
Ts0 f15 648 1226 112 44 -24 -8 #rect
Ts0 f15 @|StepIcon #fIcon
Ts0 f69 expr out #txt
Ts0 f69 109 1056 339 1056 #arcP
Ts0 f69 0 0.61063400144005 0 0 #arcLabel
Ts0 f96 guid 15F940442EBC4F26 #txt
Ts0 f96 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f96 method autoCompleteForRoleDelegate(String) #txt
Ts0 f96 disableUIEvents false #txt
Ts0 f96 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String query> param = methodEvent.getInputArguments();
' #txt
Ts0 f96 inParameterMapAction 'out.queryAutoComplete=param.query;
' #txt
Ts0 f96 outParameterDecl '<java.util.List<ch.ivyteam.ivy.security.IRole> rolesToDelegate> result;
' #txt
Ts0 f96 outActionCode 'import ch.ivy.addon.portalkit.util.RoleUtils;

result.rolesToDelegate = RoleUtils.filterRoles(in.rolesToDelegate, in.queryAutoComplete);' #txt
Ts0 f96 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>autoCompleteForRoleDelegate(String)</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ts0 f96 83 1043 26 26 -56 13 #rect
Ts0 f96 @|RichDialogMethodStartIcon #fIcon
Ts0 f111 expr out #txt
Ts0 f111 760 960 819 960 #arcP
Ts0 f107 expr out #txt
Ts0 f107 616 960 648 960 #arcP
Ts0 f105 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f105 actionTable 'out=in;
' #txt
Ts0 f105 actionCode 'in.canDelegateTask = !(in.rolesToDelegate.isEmpty() && in.usersToDelegate.isEmpty());

if (in.canDelegateTask) {
	if (in.rolesToDelegate.isEmpty()) {
		in.isUserDelegated = true;
	}
	if (in.usersToDelegate.isEmpty()) {
		in.isUserDelegated = false;
	}
}
' #txt
Ts0 f105 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f105 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if can&#xD;
delegate task</name>
    </language>
</elementInfo>
' #txt
Ts0 f105 648 938 112 44 -37 -16 #rect
Ts0 f105 @|StepIcon #fIcon
Ts0 f63 expr out #txt
Ts0 f63 280 288 339 288 #arcP
Ts0 f61 expr out #txt
Ts0 f61 109 288 168 288 #arcP
Ts0 f48 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f48 actionTable 'out=in;
' #txt
Ts0 f48 actionCode 'import ch.ivy.addon.portalkit.util.TaskUtils;

TaskUtils.parkTask(in.task);' #txt
Ts0 f48 security system #txt
Ts0 f48 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Park task</name>
    </language>
</elementInfo>
' #txt
Ts0 f48 168 266 112 44 -25 -8 #rect
Ts0 f48 @|StepIcon #fIcon
Ts0 f65 expr out #txt
Ts0 f65 280 384 480 458 #arcP
Ts0 f65 1 480 384 #addKink
Ts0 f65 0 0.7241149078079877 0 0 #arcLabel
Ts0 f64 expr out #txt
Ts0 f64 109 384 168 384 #arcP
Ts0 f35 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f35 actionTable 'out=in;
' #txt
Ts0 f35 actionCode 'import ch.ivy.addon.portalkit.util.TaskUtils;

TaskUtils.resetTask(in.task);' #txt
Ts0 f35 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Reset task</name>
    </language>
</elementInfo>
' #txt
Ts0 f35 168 362 112 44 -29 -8 #rect
Ts0 f35 @|StepIcon #fIcon
Ts0 f60 expr out #txt
Ts0 f60 288 480 338 480 #arcP
Ts0 f58 expr out #txt
Ts0 f58 109 480 160 480 #arcP
Ts0 f45 actionDecl 'ch.ivy.addon.portalkit.component.TaskItem.TaskItemData out;
' #txt
Ts0 f45 actionTable 'out=in;
' #txt
Ts0 f45 actionCode 'import ch.ivy.addon.portalkit.jsf.ManagedBeans;
import ch.ivy.addon.portalkit.bean.TaskActionBean;

TaskActionBean taskActionBean = ManagedBeans.get("taskActionBean") as TaskActionBean;
out.canUserResumeTask = taskActionBean.canResume(in.task);
' #txt
Ts0 f45 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if can resume</name>
    </language>
</elementInfo>
' #txt
Ts0 f45 160 458 128 44 -56 -8 #rect
Ts0 f45 @|StepIcon #fIcon
Ts0 f31 expr out #txt
Ts0 f31 109 96 168 96 #arcP
Ts0 f0 guid 16816B3D5FE7A2CB #txt
Ts0 f0 type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
Ts0 f0 method start() #txt
Ts0 f0 disableUIEvents true #txt
Ts0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ts0 f0 outParameterDecl '<> result;
' #txt
Ts0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Ts0 f0 83 83 26 26 -16 15 #rect
Ts0 f0 @|RichDialogInitStartIcon #fIcon
>Proto Ts0 .type ch.ivy.addon.portalkit.component.TaskItem.TaskItemData #txt
>Proto Ts0 .processKind HTML_DIALOG #txt
>Proto Ts0 -8 -8 16 16 16 26 #rect
>Proto Ts0 '' #fIcon
Ts0 f77 out f57 tail #connect
Ts0 f57 head f56 mainIn #connect
Ts0 f96 mainOut f69 tail #connect
Ts0 f69 head f94 mainIn #connect
Ts0 f76 mainOut f95 tail #connect
Ts0 f95 head f70 mainIn #connect
Ts0 f108 mainOut f110 tail #connect
Ts0 f110 head f109 mainIn #connect
Ts0 f0 mainOut f31 tail #connect
Ts0 f31 head f2 mainIn #connect
Ts0 f2 mainOut f32 tail #connect
Ts0 f32 head f1 mainIn #connect
Ts0 f4 mainOut f5 tail #connect
Ts0 f5 head f3 mainIn #connect
Ts0 f36 mainOut f21 tail #connect
Ts0 f21 head f4 mainIn #connect
Ts0 f22 mainOut f29 tail #connect
Ts0 f29 head f27 mainIn #connect
Ts0 f27 mainOut f34 tail #connect
Ts0 f34 head f28 mainIn #connect
Ts0 f39 mainOut f61 tail #connect
Ts0 f61 head f48 mainIn #connect
Ts0 f48 mainOut f63 tail #connect
Ts0 f63 head f62 mainIn #connect
Ts0 f30 mainOut f64 tail #connect
Ts0 f64 head f35 mainIn #connect
Ts0 f33 mainOut f58 tail #connect
Ts0 f58 head f45 mainIn #connect
Ts0 f45 mainOut f60 tail #connect
Ts0 f60 head f77 in #connect
Ts0 f35 mainOut f65 tail #connect
Ts0 f65 head f56 mainIn #connect
Ts0 f66 mainOut f71 tail #connect
Ts0 f71 head f68 mainIn #connect
Ts0 f49 mainOut f50 tail #connect
Ts0 f50 head f47 mainIn #connect
Ts0 f47 mainOut f78 tail #connect
Ts0 f78 head f46 mainIn #connect
Ts0 f56 mainOut f55 tail #connect
Ts0 f55 head f54 mainIn #connect
Ts0 f54 mainOut f73 tail #connect
Ts0 f73 head f49 mainIn #connect
Ts0 f97 mainOut f81 tail #connect
Ts0 f81 head f80 mainIn #connect
Ts0 f80 mainOut f87 tail #connect
Ts0 f87 head f79 in #connect
Ts0 f79 out f92 tail #connect
Ts0 f92 head f98 mainIn #connect
Ts0 f77 out f100 tail #connect
Ts0 f100 head f99 in #connect
Ts0 f99 out f67 tail #connect
Ts0 f67 head f66 mainIn #connect
Ts0 f79 out f101 tail #connect
Ts0 f101 head f99 in #connect
Ts0 f12 mainOut f102 tail #connect
Ts0 f102 head f24 mainIn #connect
Ts0 f24 mainOut f52 tail #connect
Ts0 f52 head f20 mainIn #connect
Ts0 f20 mainOut f104 tail #connect
Ts0 f104 head f103 mainIn #connect
Ts0 f103 mainOut f107 tail #connect
Ts0 f107 head f105 mainIn #connect
Ts0 f105 mainOut f111 tail #connect
Ts0 f111 head f106 mainIn #connect
Ts0 f13 mainOut f14 tail #connect
Ts0 f14 head f10 mainIn #connect
Ts0 f10 mainOut f23 tail #connect
Ts0 f23 head f7 mainIn #connect
Ts0 f7 mainOut f8 tail #connect
Ts0 f8 head f19 mainIn #connect
Ts0 f19 mainOut f26 tail #connect
Ts0 f26 head f15 mainIn #connect
Ts0 f15 mainOut f25 tail #connect
Ts0 f25 head f11 mainIn #connect
