<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://java.sun.com/jsp/jstl/core">

<cc:interface componentType="IvyComponent">
  <cc:attribute name="task" type="ch.ivyteam.ivy.workflow.ITask" />
</cc:interface>

<cc:implementation>
  <c:set var="task" value="#{cc.attrs.task}" />
  <div class="ui-g">
    <div class="ui-xl-2 ui-lg-4 ui-md-4 ui-sm-5 ui-g-2 task-detail-description-label u-no-padding-left">
      <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/description')}" rendered="true" />
    </div>
    <div class="ui-xl-10 ui-lg-8 ui-md-8 ui-sm-7 ui-g-4 task-detail-description">
      <h:form id="task-detail-description-form">
        <div class="scroll-panel OvAuto">
          <p:inplace id="task-description-inplace" editor="true" styleClass="task-description-inplace"
            disabled="#{!taskActionBean.canChangeDescription(task) or taskBean.isDone(task)}"
            saveLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/save')}"
            cancelLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}"
            emptyLabel="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/taskDetails/noDescription')}">
            <p:ajax event="save" update="task-detail-description-form" />
            <f:facet name="input">
              <p:inputTextarea id="task-description-input" rows="3" styleClass="task-detail-description-input" value="#{task.description}"
                autoResize="false" />
            </f:facet>
            <f:facet name="output">
              <h:outputText escape="false" value="#{taskWidgetBean.sanitizeHTML(task.description)}" id="task-description-output" styleClass="task-detail-description-output"/>
            </f:facet>
          </p:inplace>
        </div>
      </h:form>
    </div>
  </div>
</cc:implementation>
</html>