<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:p="http://primefaces.org/ui">

<cc:interface componentType="IvyComponent">
  <cc:attribute name="componentId" default="task-state" />
  <cc:attribute name="state" required="true" type="ch.ivyteam.ivy.workflow.TaskState" />
  <cc:attribute name="stateStyleClass" />
  <cc:attribute name="stateIconStyleClass" />
  <cc:attribute name="stateTooltipStyleClass" />
  <cc:attribute name="dataModel" />
  <cc:attribute name="responsiveStyleClass" default="u-hidden-sm-down" />
</cc:interface>

<cc:implementation>
  <c:set var="state" value="#{cc.attrs.state}" />
  <h:panelGroup rendered="#{cc.attrs.dataModel.isSelectedColumn('STATE')}" >
    <h:panelGroup id="#{cc.attrs.componentId}" styleClass="state-cell default-task-cell #{cc.attrs.stateStyleClass} #{cc.attrs.responsiveStyleClass}">
      <h:panelGroup id="#{cc.attrs.componentId}-open" rendered="#{state == 'SUSPENDED' or state == 'UNASSIGNED'}"
        styleClass="icon ivyicon-controls-play task-state-open #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-in-progress" rendered="#{state == 'RESUMED' or state == 'CREATED'}"
        styleClass="icon ivyicon-hourglass task-state-in-progress #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-done" rendered="#{state == 'DONE'}"
        styleClass="icon ivyicon-check-circle-1 task-state-done #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-reserved" rendered="#{state == 'PARKED'}"
        styleClass="icon ivyicon-touch-finger_1 task-state-reserved #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-destroyed" rendered="#{state == 'DESTROYED' or state == 'ZOMBIE'}"
        styleClass="icon ivyicon-alert-circle task-state-zombie-destroyed #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-delayed" rendered="#{state == 'DELAYED'}"
        styleClass="icon ivyicon-alarm-bell-timer task-state-delayed #{cc.attrs.stateIconStyleClass}" />
      <h:panelGroup id="#{cc.attrs.componentId}-system"
        rendered="#{state != 'SUSPENDED' and state != 'UNASSIGNED' and state != 'RESUMED' and state != 'CREATED'
       and state != 'DONE' and state != 'PARKED' and state != 'DESTROYED' and state != 'ZOMBIE' and state != 'DELAYED'}"
        styleClass="icon ivyicon-synchronize-arrows task-state-system #{cc.attrs.stateIconStyleClass}" />
    </h:panelGroup>
  </h:panelGroup>
  <p:tooltip id="state-tooltip" for="#{cc.attrs.componentId}"
    value="#{taskBean.getUserFriendlyTaskState(state)} (#{taskBean.getTranslatedState(state)})" styleClass="#{cc.attrs.stateTooltipStyleClass}" trackMouse="true" hideEvent="mouseleave click"/>
</cc:implementation>
</html>