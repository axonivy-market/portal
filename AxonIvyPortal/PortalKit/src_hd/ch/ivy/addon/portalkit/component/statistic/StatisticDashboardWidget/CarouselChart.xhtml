<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:pm="http://primefaces.org/mobile" xmlns:cc="http://xmlns.jcp.org/jsf/composite"
  xmlns:jsf="http://xmlns.jcp.org/jsf" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions">
  
  <h:outputScript name="chart-carousel.js" library="js" />

<p:carousel id="statistic-carousel" styleClass="statistic-carousel" circular="true" numVisible="1" value="#{data.statisticChartList}" var="chart"
  binding="#{carouselStatistic}" firstVisible="0" rendered="#{cc.attrs.compactMode and data.hasStatistic and !cc.attrs.isDrilldownElapsedTime}"
  widgetVar="carouselChart" pageLinks="0" >

  <p:panelGrid columns="2" columnClasses="label, value">
    <p:panel>
      <p:panel styleClass="carousel-title-hide" >
        <h:panelGroup id="chart-name-container" style="" styleClass="chart-name-container" layout="block">
          <p:commandLink rendered="#{!(empty chart.filter)}" styleClass="fa fa-info-circle chart-info" actionListener="#{logic.selectChart(chart)}"
            update="chart-dashboard-details-dialog" oncomplete="PF('chart-dashboard-details-dialog').show();" />
          <h:outputLabel id="chart-name" styleClass="chart-name" value="#{chart.name}" for="chart-#{chart.id}" />
        </h:panelGroup>
        
        <h:outputText id="carousel-effect-duration" value="#{carouselStatistic.effectDuration}" />
      </p:panel>

      <p:chart type="donut" styleClass="statistic-chart" model="#{chart.donutChartModel}" rendered="#{statisticDashboardBean.isTaskByPriority(chart)}">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.drilldownTaskByPriority}" />
      </p:chart>

      <p:chart type="bar" styleClass="statistic-chart" model="#{chart.barChartModel}" rendered="#{statisticDashboardBean.isTaskByExpiry(chart)}">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.toTaskByExpiryTaskListFromHomePage}" update="#{p:component('widget-container')}" />
      </p:chart>

      <p:chart type="donut" styleClass="statistic-chart" model="#{chart.donutChartModel}" rendered="#{statisticDashboardBean.isCaseByState(chart)}">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.drilldownCaseByState}" />
      </p:chart>

      <p:chart type="bar" styleClass="statistic-chart" model="#{chart.barChartModel}"
        rendered="#{statisticDashboardBean.isElapsedTimeByCaseCategory(chart)}" />

      <p:chart type="donut" styleClass="statistic-chart" model="#{chart.donutChartModel}"
        rendered="#{statisticDashboardBean.isCaseByFinishedTask(chart)}">
      </p:chart>

      <p:chart type="donut" styleClass="statistic-chart" model="#{chart.donutChartModel}"
        rendered="#{statisticDashboardBean.isCaseByFinishedTime(chart)}">
      </p:chart>
    </p:panel>
  </p:panelGrid>

  <ui:include src="ChartDetailsDialog.xhtml">
    <ui:param name="chartDetailDialogId" value="chart-dashboard-details-dialog" />
  </ui:include>
</p:carousel>

</html>