<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:outputScript name="chart-carousel.js" library="js" rendered="#{cc.attrs.compactMode}"/>

<c:set var="chartCarousel" value="#{data.hasStatistic ? data.statisticChartList : data.chartsPlaceholder}" />
<p:carousel id="statistic-carousel" styleClass="statistic-carousel card #{chartCarousel.size() == 1 ? 'one-statistic':''}" circular="true"
  numVisible="1" value="#{chartCarousel}" var="chart" binding="#{carouselStatistic}" itemStyleClass="statistic-carousel-item"
  rendered="#{cc.attrs.compactMode and !cc.attrs.isDrilldownElapsedTime}" widgetVar="carouselChart" pageLinks="0" responsive="true">

  <h:panelGroup styleClass="statistic-carousel-content">
    <h:panelGroup styleClass="hidden-carousel-title">
      <h:panelGroup id="chart-name-container" styleClass="chart-name-container" layout="block">
        <h:outputText id="chart-name" styleClass="chart-name" value="#{chart.name}" />
        <p:commandLink styleClass="fa fa-info-circle chart-info" actionListener="#{logic.selectChart(chart)}" update="#{p:component('chart-details-dialog')}"
          oncomplete="PF('chart-details-dialog').show();" rendered="#{data.hasStatistic}" />
      </h:panelGroup>

      <h:outputText id="carousel-effect-duration" value="#{carouselStatistic.effectDuration}" />
    </h:panelGroup>
    <h:panelGroup layout="block" id="statistic-chart-carousel">
      <p:donutChart styleClass="statistic-chart ui-g-12" model="#{chart.donutChartModel}" rendered="#{!data.hasStatistic}"
        style="width: 100%; height:200px;" />

      <p:donutChart styleClass="statistic-chart ui-g-12" model="#{chart.donutChartModel}" rendered="#{statisticDashboardBean.isTaskByPriority(chart)}"
        style="width: 100%; height:200px;">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.drilldownTaskByPriority}" />
      </p:donutChart>

      <p:barChart styleClass="statistic-chart ui-g-12" model="#{chart.barChartModel}" rendered="#{statisticDashboardBean.isTaskByExpiry(chart)}"
        style="width: 100%; height:200px;">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.toTaskByExpiryTaskListFromHomePage}" update="#{p:component('widget-container')}" />
      </p:barChart>

      <p:donutChart styleClass="statistic-chart ui-g-12" model="#{chart.donutChartModel}" rendered="#{statisticDashboardBean.isCaseByState(chart)}"
        style="width: 100%; height:200px;">
        <f:attribute name="selectedChartId" value="#{chart.id}" />
        <p:ajax event="itemSelect" listener="#{logic.drilldownCaseByState}" />
      </p:donutChart>

      <p:barChart styleClass="statistic-chart ui-g-12" model="#{chart.barChartModel}" style="width: 100%; height:200px;"
        rendered="#{statisticDashboardBean.isElapsedTimeByCaseCategory(chart)}" />

      <p:donutChart styleClass="statistic-chart ui-g-12" model="#{chart.donutChartModel}" style="width: 100%; height:200px;"
        rendered="#{statisticDashboardBean.isCaseByFinishedTask(chart)}">
      </p:donutChart>

      <p:donutChart styleClass="statistic-chart ui-g-12" model="#{chart.donutChartModel}" style="width: 100%; height:200px;"
        rendered="#{statisticDashboardBean.isCaseByFinishedTime(chart)}">
      </p:donutChart>
    </h:panelGroup>
  </h:panelGroup>
</p:carousel>

</html>