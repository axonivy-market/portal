<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:p="http://primefaces.org/ui">

<cc:interface componentType="IvyComponent">
  <cc:attribute name="componentId" default="case-state-cell" />
  <cc:attribute name="case" required="true" />
  <cc:attribute name="stateStyleClass" />
  <cc:attribute name="stateIconStyleClass" />
  <cc:attribute name="stateTooltipStyleClass" />
  <cc:attribute name="dataModel" />
  <cc:attribute name="responsiveStyleClass" default="u-hidden-sm-down" />
</cc:interface>

<cc:implementation>
  <c:set var="case" value="#{cc.attrs.case}" />
  <c:set var="componentId" value="#{cc.attrs.componentId}" />
  <c:set var="dataModel" value="#{cc.attrs.dataModel}" />

  <h:panelGroup rendered="#{dataModel.isSelectedColumn('STATE')}" id="#{componentId}" 
    styleClass="case-header-default-cell #{cc.attrs.stateStyleClass} #{cc.attrs.responsiveStyleClass}">
    <h:panelGroup id="#{componentId}-in-progress" styleClass="icon ivyicon-hourglass case-state-in-progress #{cc.attrs.stateIconStyleClass}"
      rendered="#{case.state eq 'CREATED' or case.state eq 'RUNNING'}" />
    <h:panelGroup id="#{componentId}-done" styleClass="icon ivyicon-check-circle-1 case-state-done #{cc.attrs.stateIconStyleClass}" 
      rendered="#{case.state eq 'DONE'}" />
    <h:panelGroup id="#{componentId}-destroyed" rendered="#{case.state eq 'DESTROYED' or case.state eq 'ZOMBIE'}"
      styleClass="icon ivyicon-alert-circle case-state-zombie-destroyed #{cc.attrs.stateIconStyleClass}" />
  </h:panelGroup>
  <p:tooltip for="#{componentId}" value="#{caseBean.getState(case)}" styleClass="#{cc.attrs.stateTooltipStyleClass}" trackMouse="true" hideEvent="mouseleave click"/>
</cc:implementation>
</html>