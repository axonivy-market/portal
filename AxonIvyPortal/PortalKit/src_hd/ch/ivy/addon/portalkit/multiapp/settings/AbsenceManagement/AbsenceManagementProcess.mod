[Ivy]
16FCB335E38B3C05 7.5.0 #module
>Proto >Proto Collection #zClass
As0 AbsenceManagementProcess Big #zClass
As0 RD #cInfo
As0 #process
As0 @TextInP .type .type #zField
As0 @TextInP .processKind .processKind #zField
As0 @TextInP .xml .xml #zField
As0 @TextInP .responsibility .responsibility #zField
As0 @UdProcessEnd f13 '' #zField
As0 @Alternative f68 '' #zField
As0 @UdInit f0 '' #zField
As0 @UdProcessEnd f35 '' #zField
As0 @Alternative f4 '' #zField
As0 @GridStep f120 '' #zField
As0 @GridStep f37 '' #zField
As0 @UdMethod f42 '' #zField
As0 @UdProcessEnd f40 '' #zField
As0 @UdEvent f81 '' #zField
As0 @GridStep f104 '' #zField
As0 @UdProcessEnd f23 '' #zField
As0 @UdProcessEnd f80 '' #zField
As0 @GridStep f142 '' #zField
As0 @CallSub f145 '' #zField
As0 @CallSub f39 '' #zField
As0 @Alternative f149 '' #zField
As0 @GridStep f113 '' #zField
As0 @UdMethod f12 '' #zField
As0 @Alternative f90 '' #zField
As0 @Alternative f92 '' #zField
As0 @UdMethod f34 '' #zField
As0 @UdProcessEnd f43 '' #zField
As0 @GridStep f154 '' #zField
As0 @CallSub f111 '' #zField
As0 @UdMethod f11 '' #zField
As0 @UdProcessEnd f18 '' #zField
As0 @UdEvent f96 '' #zField
As0 @GridStep f5 '' #zField
As0 @GridStep f7 '' #zField
As0 @Alternative f97 '' #zField
As0 @Alternative f24 '' #zField
As0 @UdEvent f157 '' #zField
As0 @CallSub f101 '' #zField
As0 @GridStep f152 '' #zField
As0 @UdProcessEnd f100 '' #zField
As0 @GridStep f88 '' #zField
As0 @CallSub f62 '' #zField
As0 @UdEvent f6 '' #zField
As0 @UdMethod f79 '' #zField
As0 @CallSub f94 '' #zField
As0 @CallSub f146 '' #zField
As0 @GridStep f45 '' #zField
As0 @UdEvent f32 '' #zField
As0 @UdEvent f31 '' #zField
As0 @UdProcessEnd f57 '' #zField
As0 @UdProcessEnd f61 '' #zField
As0 @GridStep f9 '' #zField
As0 @UdProcessEnd f130 '' #zField
As0 @UdProcessEnd f125 '' #zField
As0 @UdEvent f38 '' #zField
As0 @UdEvent f54 '' #zField
As0 @CallSub f47 '' #zField
As0 @GridStep f70 '' #zField
As0 @Alternative f83 '' #zField
As0 @UdProcessEnd f59 '' #zField
As0 @GridStep f55 '' #zField
As0 @PushWFArc f71 '' #zField
As0 @PushWFArc f63 '' #zField
As0 @PushWFArc f156 '' #zField
As0 @PushWFArc f119 '' #zField
As0 @PushWFArc f133 '' #zField
As0 @PushWFArc f41 '' #zField
As0 @PushWFArc f78 '' #zField
As0 @PushWFArc f50 '' #zField
As0 @PushWFArc f72 '' #zField
As0 @PushWFArc f103 '' #zField
As0 @PushWFArc f147 '' #zField
As0 @PushWFArc f134 '' #zField
As0 @PushWFArc f131 '' #zField
As0 @PushWFArc f29 '' #zField
As0 @PushWFArc f143 '' #zField
As0 @PushWFArc f48 '' #zField
As0 @PushWFArc f99 '' #zField
As0 @PushWFArc f132 '' #zField
As0 @PushWFArc f8 '' #zField
As0 @PushWFArc f114 '' #zField
As0 @PushWFArc f121 '' #zField
As0 @PushWFArc f95 '' #zField
As0 @PushWFArc f56 '' #zField
As0 @PushWFArc f58 '' #zField
As0 @PushWFArc f91 '' #zField
As0 @PushWFArc f126 '' #zField
As0 @PushWFArc f122 '' #zField
As0 @PushWFArc f16 '' #zField
As0 @PushWFArc f148 '' #zField
As0 @PushWFArc f10 '' #zField
As0 @PushWFArc f128 '' #zField
As0 @PushWFArc f15 '' #zField
As0 @PushWFArc f98 '' #zField
As0 @PushWFArc f14 '' #zField
As0 @PushWFArc f84 '' #zField
As0 @PushWFArc f118 '' #zField
As0 @PushWFArc f25 '' #zField
As0 @PushWFArc f36 '' #zField
As0 @PushWFArc f123 '' #zField
As0 @PushWFArc f64 '' #zField
As0 @PushWFArc f30 '' #zField
As0 @PushWFArc f87 '' #zField
As0 @CallSub f129 '' #zField
As0 @UdMethod f135 '' #zField
As0 @UdProcessEnd f136 '' #zField
As0 @GridStep f137 '' #zField
As0 @GridStep f138 '' #zField
As0 @GridStep f139 '' #zField
As0 @Alternative f140 '' #zField
As0 @PushWFArc f144 '' #zField
As0 @PushWFArc f151 '' #zField
As0 @PushWFArc f153 '' #zField
As0 @PushWFArc f155 '' #zField
As0 @PushWFArc f158 '' #zField
As0 @PushWFArc f141 '' #zField
As0 @UdProcessEnd f150 '' #zField
As0 @Alternative f1 '' #zField
As0 @PushWFArc f2 '' #zField
As0 @GridStep f51 '' #zField
As0 @PushWFArc f77 '' #zField
As0 @PushWFArc f85 '' #zField
As0 @GridStep f86 '' #zField
As0 @PushWFArc f89 '' #zField
As0 @PushWFArc f3 '' #zField
As0 @PushWFArc f20 '' #zField
As0 @PushWFArc f26 '' #zField
As0 @UdMethod f27 '' #zField
As0 @GridStep f28 '' #zField
As0 @PushWFArc f69 '' #zField
As0 @GridStep f102 '' #zField
As0 @CallSub f105 '' #zField
As0 @Alternative f107 '' #zField
As0 @GridStep f109 '' #zField
As0 @Alternative f112 '' #zField
As0 @CallSub f115 '' #zField
As0 @Alternative f116 '' #zField
As0 @UdProcessEnd f117 '' #zField
As0 @CallSub f124 '' #zField
As0 @PushWFArc f161 '' #zField
As0 @PushWFArc f162 '' #zField
As0 @PushWFArc f163 '' #zField
As0 @PushWFArc f167 '' #zField
As0 @PushWFArc f168 '' #zField
As0 @PushWFArc f169 '' #zField
As0 @PushWFArc f171 '' #zField
As0 @PushWFArc f93 '' #zField
As0 @UdMethod f75 '' #zField
As0 @UdProcessEnd f110 '' #zField
As0 @PushWFArc f160 '' #zField
As0 @CallSub f172 '' #zField
As0 @PushWFArc f22 '' #zField
As0 @PushWFArc f60 '' #zField
As0 @PushWFArc f17 '' #zField
As0 @Alternative f19 '' #zField
As0 @PushWFArc f21 '' #zField
As0 @PushWFArc f49 '' #zField
As0 @PushWFArc f65 '' #zField
As0 @Alternative f66 '' #zField
As0 @PushWFArc f67 '' #zField
As0 @PushWFArc f73 '' #zField
As0 @PushWFArc f74 '' #zField
As0 @Alternative f76 '' #zField
As0 @PushWFArc f82 '' #zField
As0 @PushWFArc f108 '' #zField
As0 @PushWFArc f106 '' #zField
As0 @PushWFArc f165 '' #zField
As0 @GridStep f44 '' #zField
As0 @PushWFArc f46 '' #zField
As0 @PushWFArc f52 '' #zField
As0 @UdMethod f53 '' #zField
As0 @UdProcessEnd f127 '' #zField
As0 @PushWFArc f159 '' #zField
As0 @UdMethod f164 '' #zField
As0 @UdProcessEnd f166 '' #zField
As0 @PushWFArc f170 '' #zField
As0 @GridStep f173 '' #zField
As0 @PushWFArc f174 '' #zField
As0 @PushWFArc f33 '' #zField
>Proto As0 As0 AbsenceManagementProcess #zField
As0 f13 379 867 26 26 0 12 #rect
As0 f13 @|UdProcessEndIcon #fIcon
As0 f68 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>sucessful?</name>
    </language>
</elementInfo>
' #txt
As0 f68 776 1728 32 32 -32 -37 #rect
As0 f68 @|AlternativeIcon #fIcon
As0 f0 guid 16FCC0CDEBBE65FA #txt
As0 f0 method start() #txt
As0 f0 inParameterDecl '<> param;' #txt
As0 f0 outParameterDecl '<> result;' #txt
As0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
As0 f0 59 35 26 26 -16 15 #rect
As0 f0 @|UdInitIcon #fIcon
As0 f35 1187 1115 26 26 0 12 #rect
As0 f35 @|UdProcessEndIcon #fIcon
As0 f4 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>successful?</name>
    </language>
</elementInfo>
' #txt
As0 f4 320 1168 32 32 -32 -30 #rect
As0 f4 @|AlternativeIcon #fIcon
As0 f120 actionTable 'out=in;
' #txt
As0 f120 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f120 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors &#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f120 1112 818 128 44 -40 -16 #rect
As0 f120 @|StepIcon #fIcon
As0 f37 actionTable 'out=in;
' #txt
As0 f37 actionCode 'out.backupAbsence.setUser(in.selectedAbsence.getUser());
out.backupAbsence.setFrom(in.selectedAbsence.getFrom());
out.backupAbsence.setUntil(in.selectedAbsence.getUntil());
out.backupAbsence.setComment(in.selectedAbsence.getComment());
out.selectedUser = in.selectedAbsence.getUser();
' #txt
As0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Backup absence</name>
    </language>
</elementInfo>
' #txt
As0 f37 984 914 112 44 -46 -8 #rect
As0 f37 @|StepIcon #fIcon
As0 f42 guid 16FCC0CDEBB92256 #txt
As0 f42 method loadUsers() #txt
As0 f42 inParameterDecl '<> param;' #txt
As0 f42 outParameterDecl '<> result;' #txt
As0 f42 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>loadUsers()</name>
    </language>
</elementInfo>
' #txt
As0 f42 59 1363 26 26 -33 15 #rect
As0 f42 @|UdMethodIcon #fIcon
As0 f40 323 1491 26 26 0 12 #rect
As0 f40 @|UdProcessEndIcon #fIcon
As0 f81 guid 16FCC0CDEBB1A481 #txt
As0 f81 actionTable 'out=in;
' #txt
As0 f81 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>changeUserSubstitute</name>
    </language>
</elementInfo>
' #txt
As0 f81 59 1731 26 26 -47 15 #rect
As0 f81 @|UdEventIcon #fIcon
As0 f104 actionTable 'out=in;
' #txt
As0 f104 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f104 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors</name>
    </language>
</elementInfo>
' #txt
As0 f104 544 394 112 44 -38 -8 #rect
As0 f104 @|StepIcon #fIcon
As0 f23 347 1075 26 26 0 12 #rect
As0 f23 @|UdProcessEndIcon #fIcon
As0 f80 1139 131 26 26 0 12 #rect
As0 f80 @|UdProcessEndIcon #fIcon
As0 f142 actionTable 'out=in;
' #txt
As0 f142 actionCode 'import ch.ivy.addon.portalkit.service.PermissionCheckerService;
import ch.ivyteam.ivy.security.IPermission;

PermissionCheckerService permissionChecker = new PermissionCheckerService();
in.isSupervisor = permissionChecker.hasAllPermissions(IPermission.USER_CREATE_ABSENCE, IPermission.USER_READ_ABSENCES, IPermission.USER_DELETE_ABSENCE);' #txt
As0 f142 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check if current user &#xD;
can manage other users'' absences</name>
    </language>
</elementInfo>
' #txt
As0 f142 152 122 224 44 -92 -16 #rect
As0 f142 @|StepIcon #fIcon
As0 f145 processCall 'Ivy Data Processes/AbsenceService:findAbsencesOfAllUsers(String)' #txt
As0 f145 requestActionDecl '<String username> param;' #txt
As0 f145 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f145 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f145 responseMappingAction 'out=in;
out.absencesByUser=result.absencesByUser;
out.errors=result.errors;
' #txt
As0 f145 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Find absences&#xD;
of all users</name>
    </language>
</elementInfo>
' #txt
As0 f145 576 122 112 44 -41 -20 #rect
As0 f145 @|CallSubIcon #fIcon
As0 f39 processCall 'Ivy Data Processes/AbsenceService:deleteAbsence(ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence)' #txt
As0 f39 requestActionDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence ivyAbsence> param;' #txt
As0 f39 requestMappingAction 'param.ivyAbsence=in.selectedAbsence;
' #txt
As0 f39 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f39 responseMappingAction 'out=in;
out.errors=result.errors;
' #txt
As0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>AbsenceService</name>
    </language>
</elementInfo>
' #txt
As0 f39 160 1162 112 44 -44 -8 #rect
As0 f39 @|CallSubIcon #fIcon
As0 f149 880 128 32 32 0 16 #rect
As0 f149 @|AlternativeIcon #fIcon
As0 f113 actionTable 'out=in;
' #txt
As0 f113 actionCode 'import java.util.ArrayList;
import java.util.Set;
import ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;

Set<IvyAbsence> ivyAbsences = AbsenceAndSubstituteUtils.flatIvyAbsenceMap(in.absencesByUser);

String sessionUsername = ivy.session.getSessionUserName();
in.displayedAbsences.clear();

if (!in.absenceInThePastShown) {
	//in.displayedAbsences.clear();
	for (IvyAbsence absence : ivyAbsences) {
			if (!AbsenceAndSubstituteUtils.isInThePast(absence)) {
				if (in.showAllAbsences || (!in.showAllAbsences && absence.user.name.equals(sessionUsername))){
					in.displayedAbsences.add(absence);
				}							
			}
	}
} else {
	for (IvyAbsence absence : ivyAbsences) {
		if (in.showAllAbsences || (!in.showAllAbsences && absence.user.name.equals(sessionUsername))){
			in.displayedAbsences.add(absence);
		}
	}
//	in.displayedAbsences = new ArrayList(ivyAbsences);
}' #txt
As0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the absences&#xD;
of all users</name>
    </language>
</elementInfo>
' #txt
As0 f113 728 122 128 44 -44 -16 #rect
As0 f113 @|StepIcon #fIcon
As0 f12 guid 16FCC0CDEBC7E549 #txt
As0 f12 method preDelete(ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence) #txt
As0 f12 inParameterDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence selectedAbsence> param;' #txt
As0 f12 inParameterMapAction 'out.selectedAbsence=param.selectedAbsence;
' #txt
As0 f12 outParameterDecl '<> result;' #txt
As0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>preDelete(IvyAbsence)</name>
    </language>
</elementInfo>
' #txt
As0 f12 59 1075 26 26 -61 15 #rect
As0 f12 @|UdMethodIcon #fIcon
As0 f90 152 864 32 32 0 16 #rect
As0 f90 @|AlternativeIcon #fIcon
As0 f92 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>empty usersByApp?</name>
    </language>
</elementInfo>
' #txt
As0 f92 432 1728 32 32 -55 -36 #rect
As0 f92 @|AlternativeIcon #fIcon
As0 f34 guid 16FCC0CDEBC59501 #txt
As0 f34 method autoCompleteForUser(String) #txt
As0 f34 inParameterDecl '<String query> param;' #txt
As0 f34 inParameterMapAction 'out.queryAutoComplete=param.query;
' #txt
As0 f34 outParameterDecl '<java.util.List<ch.ivy.addon.portalkit.dto.UserDTO> users> result;' #txt
As0 f34 outActionCode 'import org.apache.commons.lang.StringUtils;
import org.apache.commons.collections4.CollectionUtils;
import ch.ivy.addon.portalkit.util.UserUtils;

if (CollectionUtils.isEmpty(in.users)) {
	in.users = UserUtils.getNonDuplicatedUsers(in.usersByApp);
}

result.users = UserUtils.filterUsersDTO(in.users, in.queryAutoComplete);' #txt
As0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>autoCompleteForUser(String)</name>
    </language>
</elementInfo>
' #txt
As0 f34 99 1491 26 26 -81 15 #rect
As0 f34 @|UdMethodIcon #fIcon
As0 f43 731 1363 26 26 0 12 #rect
As0 f43 @|UdProcessEndIcon #fIcon
As0 f154 actionTable 'out=in;
' #txt
As0 f154 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f154 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors &#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f154 968 122 128 44 -40 -16 #rect
As0 f154 @|StepIcon #fIcon
As0 f111 processCall 'Ivy Data Processes/AbsenceService:updateAbsences(String,java.util.Set)' #txt
As0 f111 requestActionDecl '<String username,java.util.Set ivyAbsences> param;' #txt
As0 f111 requestMappingAction 'param.username=in.selectedUser.getName();
param.ivyAbsences=in.absencesByUser.get(in.selectedUser.getName()) as java.util.Set;
' #txt
As0 f111 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f111 responseMappingAction 'out=in;
out.errors=result.errors;
' #txt
As0 f111 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>AbsenceService</name>
    </language>
</elementInfo>
' #txt
As0 f111 952 818 112 44 -44 -8 #rect
As0 f111 @|CallSubIcon #fIcon
As0 f11 guid 16FCC0CDEBCF45F4 #txt
As0 f11 method editAbsence(ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence) #txt
As0 f11 inParameterDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence selectedAbsence> param;' #txt
As0 f11 inParameterMapAction 'out.selectedAbsence=param.selectedAbsence;
out.validationError=false;
' #txt
As0 f11 outParameterDecl '<> result;' #txt
As0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>editAbsence(IvyAbsence)</name>
    </language>
</elementInfo>
' #txt
As0 f11 867 923 26 26 -68 15 #rect
As0 f11 @|UdMethodIcon #fIcon
As0 f18 253 35 26 26 0 12 #rect
As0 f18 @|UdProcessEndIcon #fIcon
As0 f96 guid 16FCC0CDEBCF3123 #txt
As0 f96 actionTable 'out=in;
' #txt
As0 f96 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>saveSubstitutes</name>
    </language>
</elementInfo>
' #txt
As0 f96 59 403 26 26 -47 15 #rect
As0 f96 @|UdEventIcon #fIcon
As0 f5 actionTable 'out=in;
' #txt
As0 f5 actionCode 'import ch.ivy.addon.portalkit.ivydata.utils.ServiceUtilities;
import ch.ivy.addon.portalkit.dto.UserDTO;
import ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence;

UserDTO currentUserDTO = new UserDTO(ivy.session.getSessionUser());

in.selectedAbsence = new IvyAbsence();
in.selectedAbsence.from = new Date();
in.selectedAbsence.until = new Date();
in.selectedAbsence.user = currentUserDTO;

in.selectedUser = currentUserDTO;

in.validationError = false;
' #txt
As0 f5 security system #txt
As0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init</name>
    </language>
</elementInfo>
' #txt
As0 f5 984 1106 112 44 -8 -8 #rect
As0 f5 @|StepIcon #fIcon
As0 f7 actionTable 'out=in;
' #txt
As0 f7 actionCode 'import ch.ivy.addon.portalkit.util.UserUtils;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;
import java.util.Set;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;

in.validationError = false;
String username = in.selectedUser.getName();
boolean fromBiggerThanTill = AbsenceAndSubstituteUtils.checkFromBiggerThanTill(in.selectedAbsence);
in.selectedAbsence.user = in.selectedUser;

if (fromBiggerThanTill) {
	in.validationError = true;
	FacesContext.getCurrentInstance().validationFailed();
}

boolean doesNewAbsenceOverlap = AbsenceAndSubstituteUtils.doesNewAbsenceOverlap(in.absencesByUser.get(username) as Set, in.selectedAbsence);
if (doesNewAbsenceOverlap) {
	in.validationError = true;
	FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/AbsenceAndDeputy/Messages/overlappingAbsence"), ""));
	FacesContext.getCurrentInstance().validationFailed();
}
' #txt
As0 f7 security system #txt
As0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Validation</name>
    </language>
</elementInfo>
' #txt
As0 f7 224 858 112 44 -27 -8 #rect
As0 f7 @|StepIcon #fIcon
As0 f97 680 1728 32 32 0 16 #rect
As0 f97 @|AlternativeIcon #fIcon
As0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>successful?</name>
    </language>
</elementInfo>
' #txt
As0 f24 320 400 32 32 -38 16 #rect
As0 f24 @|AlternativeIcon #fIcon
As0 f157 guid 16FCC0CDEBC66FE9 #txt
As0 f157 actionTable 'out=in;
' #txt
As0 f157 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>userSelectInAbsence</name>
    </language>
</elementInfo>
' #txt
As0 f157 59 947 26 26 -48 14 #rect
As0 f157 @|UdEventIcon #fIcon
As0 f101 processCall 'Ivy Data Processes/SubstituteService:saveSubstitutes(String,java.util.Map)' #txt
As0 f101 requestActionDecl '<String username,java.util.Map substitutesByApp> param;' #txt
As0 f101 requestMappingAction 'param.username=in.selectedUser.getName();
param.substitutesByApp=in.substitutesByApp;
' #txt
As0 f101 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f101 responseMappingAction 'out=in;
out.errors=result.errors;
' #txt
As0 f101 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SubstituteService</name>
    </language>
</elementInfo>
' #txt
As0 f101 160 394 112 44 -47 -8 #rect
As0 f101 @|CallSubIcon #fIcon
As0 f152 actionTable 'out=in;
' #txt
As0 f152 actionCode 'import java.util.ArrayList;
import java.util.Set;
import ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;

Set<IvyAbsence> ivyAbsences = in.absencesByUser.get(ivy.session.getSessionUserName()) as Set;
if (!in.absenceInThePastShown) {
	out.displayedAbsences.clear();
	for (IvyAbsence absence : ivyAbsences) {
			if (!AbsenceAndSubstituteUtils.isInThePast(absence)) {
				out.displayedAbsences.add(absence);
			}
	}
} else {
	out.displayedAbsences = new ArrayList(ivyAbsences);
}' #txt
As0 f152 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get the absences&#xD;
of current user</name>
    </language>
</elementInfo>
' #txt
As0 f152 728 202 128 44 -44 -16 #rect
As0 f152 @|StepIcon #fIcon
As0 f100 891 403 26 26 0 12 #rect
As0 f100 @|UdProcessEndIcon #fIcon
As0 f88 actionTable 'out=in;
' #txt
As0 f88 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f88 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors &#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f88 416 1258 128 44 -40 -16 #rect
As0 f88 @|StepIcon #fIcon
As0 f62 processCall 'Ivy Data Processes/SubstituteService:findSubstitutes(String)' #txt
As0 f62 requestActionDecl '<String username> param;' #txt
As0 f62 requestMappingAction 'param.username=in.selectedUser.getName();
' #txt
As0 f62 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f62 responseMappingAction 'out=in;
out.errors=result.errors;
out.substitutesByApp=result.substitutesByApp;
' #txt
As0 f62 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find substitutes</name>
    </language>
</elementInfo>
' #txt
As0 f62 208 1722 112 44 -42 -8 #rect
As0 f62 @|CallSubIcon #fIcon
As0 f6 guid 16FCC0CDEBC9A56B #txt
As0 f6 actionTable 'out=in;
' #txt
As0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>dateChange</name>
    </language>
</elementInfo>
' #txt
As0 f6 59 867 26 26 -36 15 #rect
As0 f6 @|UdEventIcon #fIcon
As0 f79 guid 16FCC0CDEBCA6260 #txt
As0 f79 method findAbsences() #txt
As0 f79 inParameterDecl '<> param;' #txt
As0 f79 outParameterDecl '<> result;' #txt
As0 f79 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>findAbsences()</name>
    </language>
</elementInfo>
' #txt
As0 f79 59 131 26 26 -41 15 #rect
As0 f79 @|UdMethodIcon #fIcon
As0 f94 processCall 'Ivy Data Processes/SecurityService:findUsersOverAllApplications(String)' #txt
As0 f94 requestActionDecl '<String username> param;' #txt
As0 f94 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f94 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f94 responseMappingAction 'out=in;
out.errors=result.errors;
out.usersByApp=result.usersByApp;
' #txt
As0 f94 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SecurityService</name>
    </language>
</elementInfo>
' #txt
As0 f94 512 1722 112 44 -41 -8 #rect
As0 f94 @|CallSubIcon #fIcon
As0 f146 processCall 'Ivy Data Processes/AbsenceService:findAbsences(String)' #txt
As0 f146 requestActionDecl '<String username> param;' #txt
As0 f146 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f146 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f146 responseMappingAction 'out=in;
out.absencesByUser=result.absencesByUser;
out.errors=in.errors;
' #txt
As0 f146 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Find current &#xD;
user''s absences</name>
    </language>
</elementInfo>
' #txt
As0 f146 576 202 112 44 -46 -20 #rect
As0 f146 @|CallSubIcon #fIcon
As0 f45 actionTable 'out=in;
' #txt
As0 f45 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors &#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f45 512 1402 128 44 -40 -16 #rect
As0 f45 @|StepIcon #fIcon
As0 f32 guid 16FCC0CDEBC190E7 #txt
As0 f32 actionTable 'out=in;
' #txt
As0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>updateAbsences</name>
    </language>
</elementInfo>
' #txt
As0 f32 867 827 26 26 -47 15 #rect
As0 f32 @|UdEventIcon #fIcon
As0 f31 guid 16FCC0CDEBC98603 #txt
As0 f31 actionTable 'out=in;
' #txt
As0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>add</name>
    </language>
</elementInfo>
' #txt
As0 f31 867 1115 26 26 -10 15 #rect
As0 f31 @|UdEventIcon #fIcon
As0 f57 1155 1019 26 26 0 12 #rect
As0 f57 @|UdProcessEndIcon #fIcon
As0 f61 603 1171 26 26 0 12 #rect
As0 f61 @|UdProcessEndIcon #fIcon
As0 f9 actionTable 'out=in;
' #txt
As0 f9 actionCode 'import ch.ivy.addon.portalkit.util.UserUtils;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;
import ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence;
import java.util.Set;

out.displayedAbsences.remove(in.selectedAbsence);
Set<IvyAbsence> ivyAbsences = out.absencesByUser.get(in.selectedAbsence.user.getName()) as Set;
ivyAbsences.remove(in.selectedAbsence);' #txt
As0 f9 security system #txt
As0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Remove from list</name>
    </language>
</elementInfo>
' #txt
As0 f9 416 1162 112 44 -46 -8 #rect
As0 f9 @|StepIcon #fIcon
As0 f130 1187 923 26 26 0 12 #rect
As0 f130 @|UdProcessEndIcon #fIcon
As0 f125 1315 827 26 26 0 12 #rect
As0 f125 @|UdProcessEndIcon #fIcon
As0 f38 guid 16FCC0CDEBC953C7 #txt
As0 f38 actionTable 'out=in;
' #txt
As0 f38 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>deleteAbsence</name>
    </language>
</elementInfo>
' #txt
As0 f38 59 1171 26 26 -47 15 #rect
As0 f38 @|UdEventIcon #fIcon
As0 f54 guid 16FCC0CDEBCB48D3 #txt
As0 f54 actionTable 'out=in;
' #txt
As0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cancel</name>
    </language>
</elementInfo>
' #txt
As0 f54 867 1019 26 26 -19 16 #rect
As0 f54 @|UdEventIcon #fIcon
As0 f47 processCall 'Ivy Data Processes/SecurityService:findUsersOverAllApplications(String)' #txt
As0 f47 requestActionDecl '<String username> param;' #txt
As0 f47 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f47 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f47 responseMappingAction 'out=in;
out.errors=result.errors;
out.usersByApp=result.usersByApp;
' #txt
As0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SecurityService</name>
    </language>
</elementInfo>
' #txt
As0 f47 168 1354 112 44 -41 -8 #rect
As0 f47 @|CallSubIcon #fIcon
As0 f70 actionTable 'out=in;
' #txt
As0 f70 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f70 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors&#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f70 896 1818 112 44 -38 -16 #rect
As0 f70 @|StepIcon #fIcon
As0 f83 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show all absences?</name>
    </language>
</elementInfo>
' #txt
As0 f83 464 128 32 32 -37 -33 #rect
As0 f83 @|AlternativeIcon #fIcon
As0 f59 1091 1731 26 26 0 12 #rect
As0 f59 @|UdProcessEndIcon #fIcon
As0 f55 actionTable 'out=in;
' #txt
As0 f55 actionCode 'out.selectedAbsence.setUser(in.backupAbsence.getUser());
out.selectedAbsence.setFrom(in.backupAbsence.getFrom());
out.selectedAbsence.setUntil(in.backupAbsence.getUntil());
out.selectedAbsence.setComment(in.backupAbsence.getComment());
' #txt
As0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Reset</name>
    </language>
</elementInfo>
' #txt
As0 f55 952 1010 112 44 -16 -8 #rect
As0 f55 @|StepIcon #fIcon
As0 f71 expr in #txt
As0 f71 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f71 792 1760 896 1840 #arcP
As0 f71 1 792 1840 #addKink
As0 f71 1 0.2727272727272727 0 -9 #arcLabel
As0 f63 expr out #txt
As0 f63 85 1184 160 1184 #arcP
As0 f156 expr out #txt
As0 f156 1096 144 1139 144 #arcP
As0 f119 expr out #txt
As0 f119 893 840 952 840 #arcP
As0 f133 expr in #txt
As0 f133 712 1744 776 1744 #arcP
As0 f41 expr out #txt
As0 f41 125 1504 323 1504 #arcP
As0 f78 expr out #txt
As0 f78 688 224 728 224 #arcP
As0 f78 0 0.6865900143900335 0 0 #arcLabel
As0 f50 expr out #txt
As0 f50 640 1424 744 1389 #arcP
As0 f50 1 744 1424 #addKink
As0 f50 0 0.7251930467044302 0 0 #arcLabel
As0 f72 expr out #txt
As0 f72 1008 1840 1104 1757 #arcP
As0 f72 1 1104 1840 #addKink
As0 f72 0 0.3118477277014128 0 0 #arcLabel
As0 f103 expr out #txt
As0 f103 656 416 891 416 #arcP
As0 f147 expr in #txt
As0 f147 outCond in.isSupervisor #txt
As0 f147 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f147 496 144 576 144 #arcP
As0 f147 0 0.5 0 -8 #arcLabel
As0 f134 expr out #txt
As0 f134 336 880 379 880 #arcP
As0 f131 expr out #txt
As0 f131 893 936 984 936 #arcP
As0 f29 expr in #txt
As0 f29 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f29 352 416 544 416 #arcP
As0 f29 0 0.4642857142857143 0 -11 #arcLabel
As0 f143 expr out #txt
As0 f143 85 144 152 144 #arcP
As0 f48 expr out #txt
As0 f48 85 1376 168 1376 #arcP
As0 f99 expr in #txt
As0 f99 448 1760 696 1760 #arcP
As0 f99 1 448 1840 #addKink
As0 f99 2 696 1840 #addKink
As0 f99 1 0.5 0 0 #arcLabel
As0 f132 expr out #txt
As0 f132 1096 936 1187 936 #arcP
As0 f8 expr out #txt
As0 f8 272 1184 320 1184 #arcP
As0 f114 expr out #txt
As0 f114 688 144 728 144 #arcP
As0 f121 expr out #txt
As0 f121 1064 840 1112 840 #arcP
As0 f95 expr in #txt
As0 f95 outCond 'in.usersByApp == null || in.usersByApp.isEmpty()' #txt
As0 f95 464 1744 512 1744 #arcP
As0 f56 expr out #txt
As0 f56 893 1032 952 1032 #arcP
As0 f58 expr out #txt
As0 f58 85 48 253 48 #arcP
As0 f91 expr out #txt
As0 f91 85 880 152 880 #arcP
As0 f126 expr out #txt
As0 f126 1240 840 1315 840 #arcP
As0 f126 0 0.41717001380558716 0 0 #arcLabel
As0 f122 expr in #txt
As0 f122 912 144 968 144 #arcP
As0 f16 expr in #txt
As0 f16 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f16 336 1200 416 1280 #arcP
As0 f16 1 336 1280 #addKink
As0 f16 1 0.3875 0 -8 #arcLabel
As0 f148 expr in #txt
As0 f148 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f148 480 160 576 224 #arcP
As0 f148 1 480 224 #addKink
As0 f148 1 0.40389801867577546 -1 -10 #arcLabel
As0 f10 expr in #txt
As0 f10 outCond in.errors.isEmpty() #txt
As0 f10 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f10 352 1184 416 1184 #arcP
As0 f10 0 0.5 0 -8 #arcLabel
As0 f128 expr in #txt
As0 f128 184 880 224 880 #arcP
As0 f15 expr out #txt
As0 f15 528 1184 603 1184 #arcP
As0 f98 expr out #txt
As0 f98 624 1744 680 1744 #arcP
As0 f14 expr out #txt
As0 f14 893 1128 984 1128 #arcP
As0 f84 expr out #txt
As0 f84 85 960 168 896 #arcP
As0 f84 1 168 960 #addKink
As0 f84 0 0.7150846925125054 0 0 #arcLabel
As0 f118 expr out #txt
As0 f118 856 144 880 144 #arcP
As0 f25 expr out #txt
As0 f25 272 416 320 416 #arcP
As0 f36 expr out #txt
As0 f36 1096 1128 1187 1128 #arcP
As0 f123 expr out #txt
As0 f123 856 224 896 160 #arcP
As0 f123 1 896 224 #addKink
As0 f123 0 0.51542288529873 0 0 #arcLabel
As0 f64 expr out #txt
As0 f64 544 1280 616 1197 #arcP
As0 f64 1 616 1280 #addKink
As0 f64 0 0.7951798915758104 0 0 #arcLabel
As0 f30 expr out #txt
As0 f30 85 1088 347 1088 #arcP
As0 f87 expr out #txt
As0 f87 1064 1032 1155 1032 #arcP
As0 f129 processCall 'Ivy Data Processes/AbsenceService:createAbsence(ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence)' #txt
As0 f129 requestActionDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence absence> param;' #txt
As0 f129 requestMappingAction 'param.absence=in.selectedAbsence;
' #txt
As0 f129 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f129 responseMappingAction 'out=in;
out.errors=result.errors;
' #txt
As0 f129 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>AbsenceService</name>
    </language>
</elementInfo>
' #txt
As0 f129 808 2026 112 44 -44 -8 #rect
As0 f129 @|CallSubIcon #fIcon
As0 f135 guid 16FCC699D22BDD3C #txt
As0 f135 method createAbsence() #txt
As0 f135 inParameterDecl '<> param;' #txt
As0 f135 outParameterDecl '<> result;' #txt
As0 f135 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>createAbsence()</name>
    </language>
</elementInfo>
' #txt
As0 f135 67 2035 26 26 -25 15 #rect
As0 f135 @|UdMethodIcon #fIcon
As0 f136 707 1939 26 26 0 12 #rect
As0 f136 @|UdProcessEndIcon #fIcon
As0 f137 actionTable 'out=in;
' #txt
As0 f137 actionCode 'import ch.ivy.addon.portalkit.ivydata.bo.IvyAbsence;
import ch.ivy.addon.portalkit.util.Dates;

java.util.Date endOfDate = Dates.toEndOfDate(in.selectedAbsence.getUntil());
in.selectedAbsence.setUntil(endOfDate);

in.isAbsenceBeingCreated = true;' #txt
As0 f137 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set end date&#xD;
to selected absence</name>
    </language>
</elementInfo>
' #txt
As0 f137 224 2026 144 44 -51 -16 #rect
As0 f137 @|StepIcon #fIcon
As0 f138 actionTable 'out=in;
' #txt
As0 f138 actionCode '
import ch.ivy.addon.portalkit.util.UserUtils;
import java.util.Set;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;

in.validationError = false;
String username = in.selectedUser.getName();
boolean fromBiggerThanTill = AbsenceAndSubstituteUtils.checkFromBiggerThanTill(in.selectedAbsence);
in.selectedAbsence.user = in.selectedUser;

if (fromBiggerThanTill) {
	in.validationError = true;
}

boolean doesNewAbsenceOverlap = AbsenceAndSubstituteUtils.doesNewAbsenceOverlap(in.absencesByUser.get(username) as Set, in.selectedAbsence);
if (doesNewAbsenceOverlap) {
	in.validationError = true;
	FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/AbsenceAndDeputy/Messages/overlappingAbsence"), ""));
}

' #txt
As0 f138 security system #txt
As0 f138 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Validation</name>
    </language>
</elementInfo>
' #txt
As0 f138 412 2026 112 44 -27 -8 #rect
As0 f138 @|StepIcon #fIcon
As0 f139 actionTable 'out=in;
' #txt
As0 f139 actionCode 'import javax.faces.context.FacesContext;
FacesContext.getCurrentInstance().validationFailed();
' #txt
As0 f139 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set validation failed</name>
    </language>
</elementInfo>
' #txt
As0 f139 536 1930 112 44 -53 -8 #rect
As0 f139 @|StepIcon #fIcon
As0 f140 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no errors?</name>
    </language>
</elementInfo>
' #txt
As0 f140 576 2032 32 32 0 16 #rect
As0 f140 @|AlternativeIcon #fIcon
As0 f144 expr out #txt
As0 f144 648 1952 707 1952 #arcP
As0 f144 0 0.9892871299061556 0 0 #arcLabel
As0 f151 expr out #txt
As0 f151 368 2048 412 2048 #arcP
As0 f153 expr in #txt
As0 f153 592 2032 592 1974 #arcP
As0 f153 0 0.9651581755182006 0 0 #arcLabel
As0 f155 expr out #txt
As0 f155 524 2048 576 2048 #arcP
As0 f158 expr in #txt
As0 f158 outCond !in.validationError #txt
As0 f158 608 2048 808 2048 #arcP
As0 f141 93 2048 224 2048 #arcP
As0 f150 1347 2035 26 26 0 12 #rect
As0 f150 @|UdProcessEndIcon #fIcon
As0 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error?</name>
    </language>
</elementInfo>
' #txt
As0 f1 1008 2032 32 32 -20 -44 #rect
As0 f1 @|AlternativeIcon #fIcon
As0 f2 920 2048 1008 2048 #arcP
As0 f51 actionTable 'out=in;
' #txt
As0 f51 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f51 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors</name>
    </language>
</elementInfo>
' #txt
As0 f51 1128 2146 112 44 -38 -8 #rect
As0 f51 @|StepIcon #fIcon
As0 f77 expr in #txt
As0 f77 1024 2064 1128 2168 #arcP
As0 f77 1 1024 2168 #addKink
As0 f77 1 0.14905870655759218 0 0 #arcLabel
As0 f85 1240 2168 1360 2061 #arcP
As0 f85 1 1360 2168 #addKink
As0 f85 0 0.8200494637549657 0 0 #arcLabel
As0 f86 actionTable 'out=in;
' #txt
As0 f86 actionCode 'import ch.ivy.addon.portalkit.util.AbsenceAndSubstituteUtils;

// add to display absence if 
// display all absence is check : just add
// diaplay all absence is not check : if user is same as current login user
boolean showNewAbsence = (!in.showAllAbsences && in.selectedAbsence.user.name.equals(ivy.session.getSessionUserName())) || in.showAllAbsences;

// if absent in the past is check then just show, otherwise check this absent is in the past or not
boolean showAbsenceInPast = (!AbsenceAndSubstituteUtils.isInThePast(in.selectedAbsence) && !in.absenceInThePastShown) || in.absenceInThePastShown;

if (showAbsenceInPast && showNewAbsence){
	in.displayedAbsences.add(in.selectedAbsence);
}' #txt
As0 f86 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update data</name>
    </language>
</elementInfo>
' #txt
As0 f86 1160 2026 112 44 -32 -8 #rect
As0 f86 @|StepIcon #fIcon
As0 f89 expr in #txt
As0 f89 outCond in.errors.isEmpty() #txt
As0 f89 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
    </language>
</elementInfo>
' #txt
As0 f89 1040 2048 1160 2048 #arcP
As0 f89 0 0.48063036947240817 0 -11 #arcLabel
As0 f3 1272 2048 1347 2048 #arcP
As0 f3 0 0.48063036947240817 0 -11 #arcLabel
As0 f20 expr out #txt
As0 f20 85 416 160 416 #arcP
As0 f26 expr out #txt
As0 f26 376 144 464 144 #arcP
As0 f27 guid 1700AB23B2C65876 #txt
As0 f27 method loadData() #txt
As0 f27 inParameterDecl '<> param;' #txt
As0 f27 outParameterDecl '<> result;' #txt
As0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>loadData</name>
    </language>
</elementInfo>
' #txt
As0 f27 67 579 26 26 -25 15 #rect
As0 f27 @|UdMethodIcon #fIcon
As0 f28 actionTable 'out=in;
' #txt
As0 f28 actionCode 'import org.apache.commons.collections4.CollectionUtils;
import ch.ivy.addon.portalkit.ivydata.service.impl.ApplicationService;

in.applications = ApplicationService.newInstance().findActiveAllInvolvedUser(ivy.session.getSessionUserName());

if (CollectionUtils.isNotEmpty(in.applications)){
	in.currentApp = in.applications.get(0).name;
}

' #txt
As0 f28 security system #txt
As0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find applications</name>
    </language>
</elementInfo>
' #txt
As0 f28 152 570 112 44 -45 -8 #rect
As0 f28 @|StepIcon #fIcon
As0 f69 93 592 152 592 #arcP
As0 f102 actionTable 'out=in;
' #txt
As0 f102 actionCode 'import ch.ivy.addon.portalkit.dto.UserDTO;
import ch.ivy.addon.portalkit.ivydata.utils.ServiceUtilities;
in.selectedUser = new UserDTO(ivy.session.getSessionUser());' #txt
As0 f102 security system #txt
As0 f102 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set current user</name>
    </language>
</elementInfo>
' #txt
As0 f102 340 570 112 44 -43 -8 #rect
As0 f102 @|StepIcon #fIcon
As0 f105 processCall 'Ivy Data Processes/SubstituteService:findSubstitutions(String)' #txt
As0 f105 requestActionDecl '<String username> param;' #txt
As0 f105 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f105 responseMappingAction 'out=in;
out.errors=result.errors;
out.substitutionsByApp=result.substitutesByApp;
' #txt
As0 f105 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find substitutions</name>
    </language>
</elementInfo>
' #txt
As0 f105 824 570 112 44 -47 -8 #rect
As0 f105 @|CallSubIcon #fIcon
As0 f107 1400 576 32 32 0 16 #rect
As0 f107 @|AlternativeIcon #fIcon
As0 f109 actionTable 'out=in;
' #txt
As0 f109 actionCode 'import ch.ivy.addon.portalkit.util.BeanUtils;

BeanUtils.invokeBeanMethodViaMethodExpression("#{errorDisplayBean.displayErrors}", in.errors);' #txt
As0 f109 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Display errors&#xD;
if have</name>
    </language>
</elementInfo>
' #txt
As0 f109 1616 650 112 44 -38 -16 #rect
As0 f109 @|StepIcon #fIcon
As0 f112 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>sucessful?</name>
    </language>
</elementInfo>
' #txt
As0 f112 1496 576 32 32 -32 -37 #rect
As0 f112 @|AlternativeIcon #fIcon
As0 f115 processCall 'Ivy Data Processes/SubstituteService:findSubstitutes(String)' #txt
As0 f115 requestActionDecl '<String username> param;' #txt
As0 f115 requestMappingAction 'param.username=in.selectedUser.getName();
' #txt
As0 f115 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f115 responseMappingAction 'out=in;
out.errors=result.errors;
out.substitutesByApp=result.substitutesByApp;
' #txt
As0 f115 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>find substitutes</name>
    </language>
</elementInfo>
' #txt
As0 f115 504 570 112 44 -42 -8 #rect
As0 f115 @|CallSubIcon #fIcon
As0 f116 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>empty usersByApp?</name>
    </language>
</elementInfo>
' #txt
As0 f116 1152 576 32 32 -55 -36 #rect
As0 f116 @|AlternativeIcon #fIcon
As0 f117 1811 579 26 26 0 12 #rect
As0 f117 @|UdProcessEndIcon #fIcon
As0 f124 processCall 'Ivy Data Processes/SecurityService:findUsersOverAllApplications(String)' #txt
As0 f124 requestActionDecl '<String username> param;' #txt
As0 f124 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f124 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.AbsencesAndDeputy.AbsencesAndDeputyData out;
' #txt
As0 f124 responseMappingAction 'out=in;
out.errors=result.errors;
out.usersByApp=result.usersByApp;
' #txt
As0 f124 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>SecurityService</name>
    </language>
</elementInfo>
' #txt
As0 f124 1232 570 112 44 -41 -8 #rect
As0 f124 @|CallSubIcon #fIcon
As0 f161 expr out #txt
As0 f161 1344 592 1400 592 #arcP
As0 f162 expr in #txt
As0 f162 1432 592 1496 592 #arcP
As0 f163 expr in #txt
As0 f163 1168 608 1416 608 #arcP
As0 f163 1 1168 672 #addKink
As0 f163 2 1416 672 #addKink
As0 f163 1 0.5 0 0 #arcLabel
As0 f167 expr in #txt
As0 f167 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>NO</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f167 1512 608 1616 672 #arcP
As0 f167 1 1512 672 #addKink
As0 f167 1 0.2727272727272727 0 -9 #arcLabel
As0 f168 expr in #txt
As0 f168 outCond 'in.usersByApp == null || in.usersByApp.isEmpty()' #txt
As0 f168 1184 592 1232 592 #arcP
As0 f169 expr out #txt
As0 f169 1728 672 1824 605 #arcP
As0 f169 1 1824 672 #addKink
As0 f169 0 0.26598440291586734 0 0 #arcLabel
As0 f171 264 592 340 592 #arcP
As0 f93 expr out #txt
As0 f93 452 592 504 592 #arcP
As0 f93 0 0.7927141382389294 0 0 #arcLabel
As0 f75 guid 170135F31D613670 #txt
As0 f75 method autoCompleteForSubstituteOnApp(String) #txt
As0 f75 inParameterDecl '<String query> param;' #txt
As0 f75 inParameterMapAction 'out.queryAutoComplete=param.query;
' #txt
As0 f75 outParameterDecl '<java.util.List<ch.ivy.addon.portalkit.dto.UserDTO> users> result;' #txt
As0 f75 outActionCode 'import ch.ivy.addon.portalkit.dto.UserDTO;
import org.apache.commons.lang.StringUtils;
import org.apache.commons.collections4.CollectionUtils;
import ch.ivy.addon.portalkit.util.UserUtils;

result.users.add(0, null);
java.util.List<UserDTO> users = UserUtils.findUsersInAppWithIgnoreUser(in.usersByApp, in.currentApp, in.selectedUser.name);
result.users.addAll(UserUtils.filterUsersDTO(in.usersInApp, in.queryAutoComplete));' #txt
As0 f75 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>autoCompleteForSubstituteOnApp(String)</name>
    </language>
</elementInfo>
' #txt
As0 f75 99 1619 26 26 -81 15 #rect
As0 f75 @|UdMethodIcon #fIcon
As0 f110 323 1619 26 26 0 12 #rect
As0 f110 @|UdProcessEndIcon #fIcon
As0 f160 expr out #txt
As0 f160 125 1632 323 1632 #arcP
As0 f172 processCall 'Ivy Data Processes/SubstituteService:findSubstitutions(String)' #txt
As0 f172 requestActionDecl '<String username> param;' #txt
As0 f172 requestMappingAction 'param.username=ivy.session.getSessionUserName();
' #txt
As0 f172 responseMappingAction 'out=in;
out.errors=result.errors;
out.substitutionsByApp=result.substitutesByApp;
' #txt
As0 f172 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>reload substitutions</name>
    </language>
</elementInfo>
' #txt
As0 f172 536 314 128 44 -54 -8 #rect
As0 f172 @|CallSubIcon #fIcon
As0 f22 664 336 904 403 #arcP
As0 f22 1 904 336 #addKink
As0 f22 0 0.6819617680515845 0 0 #arcLabel
As0 f60 expr out #txt
As0 f60 320 1744 432 1744 #arcP
As0 f17 expr out #txt
As0 f17 85 1744 208 1744 #arcP
As0 f17 0 0.6989161447468913 0 0 #arcLabel
As0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>successful ?</name>
    </language>
</elementInfo>
' #txt
As0 f19 672 576 32 32 -42 -34 #rect
As0 f19 @|AlternativeIcon #fIcon
As0 f21 expr out #txt
As0 f21 616 592 672 592 #arcP
As0 f49 expr in #txt
As0 f49 outCond in.errors.isEmpty() #txt
As0 f49 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
    </language>
</elementInfo>
' #txt
As0 f49 704 592 824 592 #arcP
As0 f65 expr in #txt
As0 f65 688 608 1672 694 #arcP
As0 f65 1 688 768 #addKink
As0 f65 2 1672 768 #addKink
As0 f65 1 0.5316792664489914 0 0 #arcLabel
As0 f66 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>successful ?</name>
    </language>
</elementInfo>
' #txt
As0 f66 1056 576 32 32 -50 -40 #rect
As0 f66 @|AlternativeIcon #fIcon
As0 f67 936 592 1056 592 #arcP
As0 f73 expr in #txt
As0 f73 outCond in.errors.isEmpty() #txt
As0 f73 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
    </language>
</elementInfo>
' #txt
As0 f73 1088 592 1152 592 #arcP
As0 f73 0 0.3987818526628043 0 0 #arcLabel
As0 f74 expr in #txt
As0 f74 1072 608 1672 694 #arcP
As0 f74 1 1072 736 #addKink
As0 f74 2 1600 736 #addKink
As0 f74 1 0.2635895976583159 0 0 #arcLabel
As0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>successful?</name>
    </language>
</elementInfo>
' #txt
As0 f76 368 1360 32 32 -35 -37 #rect
As0 f76 @|AlternativeIcon #fIcon
As0 f82 280 1376 368 1376 #arcP
As0 f108 expr in #txt
As0 f108 outCond in.errors.isEmpty() #txt
As0 f108 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
    </language>
</elementInfo>
' #txt
As0 f108 400 1376 731 1376 #arcP
As0 f108 0 0.4954682779456193 0 -12 #arcLabel
As0 f106 expr in #txt
As0 f106 384 1392 512 1424 #arcP
As0 f106 1 384 1424 #addKink
As0 f106 1 0.3153917968256955 0 0 #arcLabel
As0 f165 expr in #txt
As0 f165 outCond in.errors.isEmpty() #txt
As0 f165 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f165 336 400 536 336 #arcP
As0 f165 1 336 336 #addKink
As0 f165 0 0.7229039911779322 -19 -1 #arcLabel
As0 f44 actionTable 'out=in;
' #txt
As0 f44 actionCode 'import ch.ivy.addon.portalkit.util.UserUtils;

in.usersInApp = in.usersByApp.get(in.currentApp) as java.util.List;' #txt
As0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>change substitute list &#13;
in drop down</name>
    </language>
</elementInfo>
' #txt
As0 f44 872 1722 144 44 -54 -16 #rect
As0 f44 @|StepIcon #fIcon
As0 f46 expr in #txt
As0 f46 outCond in.errors.isEmpty() #txt
As0 f46 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f46 808 1744 872 1744 #arcP
As0 f46 0 0.4431818181818182 0 -9 #arcLabel
As0 f52 1016 1744 1091 1744 #arcP
As0 f52 0 0.4431818181818182 0 -9 #arcLabel
As0 f53 guid 17022F2E50D23EEA #txt
As0 f53 method autoCompleteForUserOnApp(String) #txt
As0 f53 inParameterDecl '<String query> param;' #txt
As0 f53 inParameterMapAction 'out.queryAutoComplete=param.query;
' #txt
As0 f53 outParameterDecl '<java.util.List<ch.ivy.addon.portalkit.dto.UserDTO> users> result;' #txt
As0 f53 outActionCode 'import ch.ivy.addon.portalkit.util.UserUtils;
result.users = UserUtils.filterUsersDTO(in.usersInApp, in.queryAutoComplete);' #txt
As0 f53 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>autoCompleteForUserOnApp(String)</name>
    </language>
</elementInfo>
' #txt
As0 f53 99 1555 26 26 -82 22 #rect
As0 f53 @|UdMethodIcon #fIcon
As0 f127 323 1555 26 26 0 12 #rect
As0 f127 @|UdProcessEndIcon #fIcon
As0 f159 125 1568 323 1568 #arcP
As0 f164 guid 1702329F72D5E29B #txt
As0 f164 method updateCurrentApp(ch.ivy.addon.portalkit.ivydata.bo.IvyApplication) #txt
As0 f164 inParameterDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyApplication application> param;' #txt
As0 f164 inParameterMapAction 'out.currentApp=param.application.name;
' #txt
As0 f164 outParameterDecl '<> result;' #txt
As0 f164 outActionCode 'import ch.ivy.addon.portalkit.util.UserUtils;
in.usersInApp = UserUtils.findUsersInApp(in.usersByApp, in.currentApp);' #txt
As0 f164 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>updateCurrentApp(IvyApplication)</name>
    </language>
</elementInfo>
' #txt
As0 f164 83 2227 26 26 -90 15 #rect
As0 f164 @|UdMethodIcon #fIcon
As0 f166 211 2227 26 26 0 12 #rect
As0 f166 @|UdProcessEndIcon #fIcon
As0 f170 109 2240 211 2240 #arcP
As0 f173 actionTable 'out=in;
' #txt
As0 f173 actionCode 'in.usersInApp = in.usersByApp.get(in.currentApp) as java.util.List;' #txt
As0 f173 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get users in app</name>
    </language>
</elementInfo>
' #txt
As0 f173 1584 570 112 44 -44 -8 #rect
As0 f173 @|StepIcon #fIcon
As0 f174 expr in #txt
As0 f174 outCond in.errors.isEmpty() #txt
As0 f174 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>YES</name>
        <nameStyle>3
</nameStyle>
    </language>
</elementInfo>
' #txt
As0 f174 1528 592 1584 592 #arcP
As0 f174 0 0.4431818181818182 0 -8 #arcLabel
As0 f33 1696 592 1811 592 #arcP
As0 f33 0 0.4431818181818182 0 -8 #arcLabel
>Proto As0 .type ch.ivy.addon.portalkit.multiapp.settings.AbsenceManagement.AbsenceManagementData #txt
>Proto As0 .processKind HTML_DIALOG #txt
>Proto As0 -8 -8 16 16 16 26 #rect
>Proto As0 '' #fIcon
As0 f0 mainOut f58 tail #connect
As0 f58 head f18 mainIn #connect
As0 f79 mainOut f143 tail #connect
As0 f143 head f142 mainIn #connect
As0 f83 out f147 tail #connect
As0 f147 head f145 mainIn #connect
As0 f83 out f148 tail #connect
As0 f148 head f146 mainIn #connect
As0 f154 mainOut f156 tail #connect
As0 f156 head f80 mainIn #connect
As0 f11 mainOut f131 tail #connect
As0 f131 head f37 mainIn #connect
As0 f37 mainOut f132 tail #connect
As0 f132 head f130 mainIn #connect
As0 f12 mainOut f30 tail #connect
As0 f30 head f23 mainIn #connect
As0 f31 mainOut f14 tail #connect
As0 f14 head f5 mainIn #connect
As0 f5 mainOut f36 tail #connect
As0 f36 head f35 mainIn #connect
As0 f7 mainOut f134 tail #connect
As0 f134 head f13 mainIn #connect
As0 f54 mainOut f56 tail #connect
As0 f56 head f55 mainIn #connect
As0 f55 mainOut f87 tail #connect
As0 f87 head f57 mainIn #connect
As0 f38 mainOut f63 tail #connect
As0 f63 head f39 mainIn #connect
As0 f88 mainOut f64 tail #connect
As0 f64 head f61 mainIn #connect
As0 f6 mainOut f91 tail #connect
As0 f91 head f90 in #connect
As0 f90 out f128 tail #connect
As0 f128 head f7 mainIn #connect
As0 f32 mainOut f119 tail #connect
As0 f119 head f111 mainIn #connect
As0 f111 mainOut f121 tail #connect
As0 f121 head f120 mainIn #connect
As0 f39 mainOut f8 tail #connect
As0 f8 head f4 in #connect
As0 f4 out f10 tail #connect
As0 f10 head f9 mainIn #connect
As0 f9 mainOut f15 tail #connect
As0 f15 head f61 mainIn #connect
As0 f4 out f16 tail #connect
As0 f16 head f88 mainIn #connect
As0 f42 mainOut f48 tail #connect
As0 f48 head f47 mainIn #connect
As0 f45 mainOut f50 tail #connect
As0 f50 head f43 mainIn #connect
As0 f71 head f70 mainIn #connect
As0 f70 mainOut f72 tail #connect
As0 f72 head f59 mainIn #connect
As0 f34 mainOut f41 tail #connect
As0 f41 head f40 mainIn #connect
As0 f92 out f95 tail #connect
As0 f95 head f94 mainIn #connect
As0 f94 mainOut f98 tail #connect
As0 f98 head f97 in #connect
As0 f92 out f99 tail #connect
As0 f99 head f97 in #connect
As0 f104 mainOut f103 tail #connect
As0 f103 head f100 mainIn #connect
As0 f157 mainOut f84 tail #connect
As0 f84 head f90 in #connect
As0 f146 mainOut f78 tail #connect
As0 f78 head f152 mainIn #connect
As0 f145 mainOut f114 tail #connect
As0 f114 head f113 mainIn #connect
As0 f113 mainOut f118 tail #connect
As0 f118 head f149 in #connect
As0 f149 out f122 tail #connect
As0 f122 head f154 mainIn #connect
As0 f152 mainOut f123 tail #connect
As0 f123 head f149 in #connect
As0 f120 mainOut f126 tail #connect
As0 f126 head f125 mainIn #connect
As0 f101 mainOut f25 tail #connect
As0 f25 head f24 in #connect
As0 f29 head f104 mainIn #connect
As0 f97 out f133 tail #connect
As0 f133 head f68 in #connect
As0 f138 mainOut f155 tail #connect
As0 f155 head f140 in #connect
As0 f153 head f139 mainIn #connect
As0 f139 mainOut f144 tail #connect
As0 f144 head f136 mainIn #connect
As0 f137 mainOut f151 tail #connect
As0 f151 head f138 mainIn #connect
As0 f140 out f158 tail #connect
As0 f158 head f129 mainIn #connect
As0 f140 out f153 tail #connect
As0 f135 mainOut f141 tail #connect
As0 f141 head f137 mainIn #connect
As0 f129 mainOut f2 tail #connect
As0 f2 head f1 in #connect
As0 f77 head f51 mainIn #connect
As0 f51 mainOut f85 tail #connect
As0 f85 head f150 mainIn #connect
As0 f1 out f89 tail #connect
As0 f89 head f86 mainIn #connect
As0 f1 out f77 tail #connect
As0 f86 mainOut f3 tail #connect
As0 f3 head f150 mainIn #connect
As0 f96 mainOut f20 tail #connect
As0 f20 head f101 mainIn #connect
As0 f142 mainOut f26 tail #connect
As0 f26 head f83 in #connect
As0 f27 mainOut f69 tail #connect
As0 f69 head f28 mainIn #connect
As0 f167 head f109 mainIn #connect
As0 f109 mainOut f169 tail #connect
As0 f169 head f117 mainIn #connect
As0 f116 out f168 tail #connect
As0 f168 head f124 mainIn #connect
As0 f124 mainOut f161 tail #connect
As0 f161 head f107 in #connect
As0 f116 out f163 tail #connect
As0 f163 head f107 in #connect
As0 f107 out f162 tail #connect
As0 f162 head f112 in #connect
As0 f28 mainOut f171 tail #connect
As0 f171 head f102 mainIn #connect
As0 f102 mainOut f93 tail #connect
As0 f93 head f115 mainIn #connect
As0 f75 mainOut f160 tail #connect
As0 f160 head f110 mainIn #connect
As0 f172 mainOut f22 tail #connect
As0 f22 head f100 mainIn #connect
As0 f62 mainOut f60 tail #connect
As0 f60 head f92 in #connect
As0 f81 mainOut f17 tail #connect
As0 f17 head f62 mainIn #connect
As0 f115 mainOut f21 tail #connect
As0 f21 head f19 in #connect
As0 f19 out f49 tail #connect
As0 f49 head f105 mainIn #connect
As0 f19 out f65 tail #connect
As0 f65 head f109 mainIn #connect
As0 f105 mainOut f67 tail #connect
As0 f67 head f66 in #connect
As0 f66 out f73 tail #connect
As0 f73 head f116 in #connect
As0 f66 out f74 tail #connect
As0 f74 head f109 mainIn #connect
As0 f47 mainOut f82 tail #connect
As0 f82 head f76 in #connect
As0 f76 out f108 tail #connect
As0 f108 head f43 mainIn #connect
As0 f76 out f106 tail #connect
As0 f106 head f45 mainIn #connect
As0 f24 out f165 tail #connect
As0 f165 head f172 mainIn #connect
As0 f24 out f29 tail #connect
As0 f68 out f46 tail #connect
As0 f46 head f44 mainIn #connect
As0 f68 out f71 tail #connect
As0 f44 mainOut f52 tail #connect
As0 f52 head f59 mainIn #connect
As0 f53 mainOut f159 tail #connect
As0 f159 head f127 mainIn #connect
As0 f164 mainOut f170 tail #connect
As0 f170 head f166 mainIn #connect
As0 f112 out f174 tail #connect
As0 f174 head f173 mainIn #connect
As0 f112 out f167 tail #connect
As0 f173 mainOut f33 tail #connect
As0 f33 head f117 mainIn #connect
