<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"      
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:ic="http://ivyteam.ch/jsf/component"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<ui:composition template="/layouts/portal-template-1col.xhtml">
		
		<ui:define name="pageContent">
			<p:layout>
				<p:layoutUnit position="center">
					<div class="case-view-header">						
						<h2
							style="display: inline-block; margin-top: 20px; margin-left: 15px;">
							<ui:insert name="taskName">
		        			    <span class="fa fa-check-square-o"></span><h:outputText id="title" style="margin-left:5px" value="#{task.name} (##{task.id})" ></h:outputText>
					    	</ui:insert>
						</h2>
						<ui:insert name="process_chain_area">
							<div style="float: right">						
							   <ic:ch.ivy.addon.portalkit.singleapp.process.ProcessChain startMethod="start" componentId="process-chain-id" sharp="CIRCLE" direction="HORIZONTAL" isShowAllSteps="false"
		        		                 actualStepIndex="#{actualStepIndex}" steps="#{steps}"/>
							</div>
						</ui:insert>
						
					</div>

					<div class="container-fluid">
											  
					  <ui:insert name="errorsZone"> </ui:insert>                           
                      
                       <ui:insert name="infoZone"> </ui:insert>   
                       	<p:panelGrid columns="2">
 	                   		<p:spacer />
							<p:commandLink  id="add-case-note" styleClass="tabViewAddNote" onclick="PF('addCaseNoteDialog').show()" >
								<i class="fa fa-pencil-square-o fa-2x"/>
							</p:commandLink>
						</p:panelGrid>
						<p:tabView id="case-information" styleClass="tabViewMain" >
								<ui:insert name="dynamicTabs">
		        					You can add one or many tabs here
								</ui:insert>
								<p:tab title="Request" > <!-- rendered="#{#{showTaskFormTab == null ? true : #{showTaskFormTab}" -->
									<ui:insert name="taskForm">
			        					 Task form
			        					<br />
									</ui:insert>
								</p:tab>
								<p:tab id="document-tab" title="Document" > <!-- rendered="#{showDocumentTab == null ? true : showDocumentTab}" -->
									<ui:insert name="documentTab">
										<c:choose>
											<c:when
												test="#{caseId == null}">
												<h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portal.generic/CaseDetailsTemplate/noCaseId')}"></h:outputText>
											</c:when>
											<c:otherwise>
												<iframe src="#{facesContext.externalContext.requestContextPath}/pro/#{urlBean.getUrlDocumentPage()}?caseId=#{caseId}"
												width="100%"  scrolling="yes" style="margin: 0 auto;"
						                        	height="350px" frameborder="0"></iframe>
											</c:otherwise>
										</c:choose>
									</ui:insert>
								</p:tab>
								<p:tab title="Status Information"> <!--  rendered="#{showCaseStatusInfoTab == null ? true : showCaseStatusInfoTab}" -->
									<ui:insert name="caseStatusTab">
										<c:choose>
											<c:when
												test="#{caseId == null}">
												<h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portal.generic/CaseDetailsTemplate/noCaseId')}"></h:outputText>
											</c:when>
											<c:otherwise>
												<ic:ch.ivy.addon.portalkit.singleapp.cases.CaseStatusInformation  homeLink="#{homeLink}" caseId="#{caseId}"/>				            			
											</c:otherwise>
										</c:choose>
									</ui:insert>
								</p:tab>
								<p:tab id="hisotry-container" title="History" > <!-- rendered="#{showHistoryTab == null ? true : showHistoryTab}" -->
									<ui:insert name="caseHistoryTab">
										<c:choose>
											<c:when
												test="#{caseId == null}">
												<h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portal.generic/CaseDetailsTemplate/noCaseId')}"></h:outputText>
											</c:when>
											<c:otherwise>
												<ic:ch.ivy.addon.portalkit.singleapp.cases.CaseHistory id="case-history" caseId="#{caseId}"/>			            			
											</c:otherwise>
										</c:choose>
									</ui:insert>
								</p:tab>
						</p:tabView>
						
					</div>

					<div class="case-view-footer" style="text-align: right; padding: 5px; background-color: #fff;">
						<div style="float: left">
							<ui:insert name="leftButtons">
		        				<!--  Left buttons -->
		        				 <br />
							</ui:insert>
						</div>
							
						<div style="float: right;">
								<ui:insert name="rightButtons">
		        				   <!-- Right buttons -->
		        				 <br />
							   </ui:insert>							
						</div>

					</div>
					
				</p:layoutUnit>
			</p:layout>
		</ui:define>
	</ui:composition>
</h:body>
</html>