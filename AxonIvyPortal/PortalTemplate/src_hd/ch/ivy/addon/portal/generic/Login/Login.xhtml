<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
  <f:facet name="first">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
  </f:facet>

  <f:attribute name="primefaces.THEME" value="serenity-ivy" />
  
  <title>
      #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/login/login')}
  </title>
  <ui:fragment rendered="#{logoBean.hasFaviconLogoImage()}">
    <link rel="shortcut icon" href="#{resource['ivy-cms:/images/logo/faviconLogo']}" type="image/png" />
  </ui:fragment>
  <ui:fragment rendered="#{!logoBean.hasFaviconLogoImage()}">
    <link rel="shortcut icon" href="#{resource['ivy-cms:/images/logo/faviconLogoSvg']}" />
  </ui:fragment>

  <h:outputStylesheet library="css" name="utility.css" />

  <h:outputStylesheet name="css/nanoscroller.css" library="serenity-layout" />
  <h:outputStylesheet name="css/ripple.css" library="serenity-layout" />
  <h:outputStylesheet name="css/grid.css" library="serenity-layout" />
  <h:outputStylesheet name="css/layout-ivy.css" library="serenity-layout" />

  <h:outputStylesheet library="css" name="portal-variables.css" />
  <h:outputStylesheet library="css" name="template.css" />
  <h:outputStylesheet library="css" name="module.css" />
  <h:outputStylesheet library="css" name="portal.css" />

  <h:outputStylesheet library="css" name="customization.css" />

  <h:outputScript name="js/nanoscroller.js" library="serenity-layout" />
  <h:outputScript name="js/ripple.js" library="serenity-layout" />
  <h:outputScript name="js/layout.js" library="serenity-layout" />
  <h:outputScript name="js/swipe.js" library="serenity-layout" />
  <h:outputScript name="js/css-vars-ponyfill.min.js" library="serenity-layout" />
  
  <script src="#{resource['ivy-webcontent:layouts/js/cookie-helper.js']}" />
  <script src="#{resource['ivy-webcontent:layouts/js/primefaces-calendar-en-us.js']}" />
  <script src="#{resource['ivy-webcontent:resources/serenity-layout/js/layout.js']}" />
  
  <h:outputScript name="responsive-toolkit.js" library="js" />
  <h:outputScript name="main.js" library="js" />
  <h:outputScript name="portal.js" library="js" />
  <ui:insert name="head" />
</h:head>

<h:body>
  <c:when test="#{ivy.wf.securityContext.currentSession.sessionUserUnknown and !isNotRequiredLogin}">
    <c:choose>
      <c:when test="#{loginBean.isLoginPageRendered()}">
        <ui:insert name="login">
          <div class="login-body">
            <ic:ch.ivy.addon.portalkit.singleapp.general.Login id="login" callbackUrl="#{data.callbackUrl}" />
          </div>
        </ui:insert>
      </c:when>
      <c:otherwise>
        <ui:insert name="loginErrorPage">
          <div class="login-body login-error-page">
            <ic:ch.ivy.addon.portalkit.LoginErrorPage />
          </div>
        </ui:insert>
      </c:otherwise>
    </c:choose>
  </c:when>
</h:body>
</html>