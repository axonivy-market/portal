<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:cc="http://xmlns.jcp.org/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:pe="http://primefaces.org/ui/extensions" xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<cc:interface componentType="IvyComponent">
</cc:interface>

<cc:implementation>
  <div id="#{cc.clientId}">
    <h:form id="mobile-menu-form" styleClass="mobile-menu">
      <p:commandLink id="mobile-task-menu-item" styleClass="mobile-menu-item mobile-task-menu-item" actionListener="#{logic.onClickTasks}">
        <f:attribute name="menuKind" value="#{ch.ivy.addon.portalkit.enums.MenuKind.TASK}" />
        <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/tasks')}" />
      </p:commandLink>
      <p:commandLink id="mobile-process-menu-item" styleClass="mobile-menu-item mobile-process-menu-item" actionListener="#{logic.onClickProcesses}">
        <f:attribute name="menuKind" value="#{ch.ivy.addon.portalkit.enums.MenuKind.PROCESS}" />
        <h:outputText value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/processes')}" />
      </p:commandLink>
    </h:form>

    <p:confirmDialog id="task-leave-warning-dialog" rendered="#{data.isWorkingOnATask}" 
      header="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/confirmation')}"
      widgetVar="task-losing-confirmation-dialog" appendTo="@(body)" closeOnEscape="true">
      <h:form prependId="false">
        <h:panelGroup styleClass="Fs14">
          <p:commandButton id="leave-button" actionListener="#{logic.leave}" process="@this" update="@none"
            value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/leave')}"
            styleClass="ui-confirmdialog-yes u-mar-right-5" />
          <p:commandButton id="reserve-task-button" actionListener="#{logic.reserveTask}" process="@this" update="@none"
            value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/reserve')}"
            styleClass="ui-confirmdialog-yes u-mar-right-5" rendered="#{ivy.task.state != 'CREATED'}" />
          <p:commandButton onclick="PF('task-losing-confirmation-dialog').hide()"
            value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}" type="button"
            styleClass="ui-confirmdialog-no portal-cancel-button" />
        </h:panelGroup>
      </h:form>
      <f:facet name="message">
        <h:outputText escape="false" styleClass="ui-confirm-dialog-message" rendered="#{ivy.task.state != 'CREATED'}"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/taskWarning/resetParkTaskBeforeLeave')}" />
        <h:outputText escape="false" styleClass="ui-confirm-dialog-message" rendered="#{ivy.task.state == 'CREATED'}"
          value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/taskWarning/createdTaskLeave')}" />
      </f:facet>
    </p:confirmDialog>
  </div>
</cc:implementation>
</html>