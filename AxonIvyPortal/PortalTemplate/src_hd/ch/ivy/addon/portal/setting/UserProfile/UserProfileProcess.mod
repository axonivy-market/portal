[Ivy]
172546E1FDEB1FF7 9.4.0 #module
>Proto >Proto Collection #zClass
Us0 UserProfileProcess Big #zClass
Us0 RD #cInfo
Us0 #process
Ct9 Component Big #zClass
Ct9 B #cInfo
Ct8 Component Big #zClass
Ct8 B #cInfo
Ct7 Component Big #zClass
Ct7 B #cInfo
Ct6 Component Big #zClass
Ct6 B #cInfo
Ct5 Component Big #zClass
Ct5 B #cInfo
Ct4 Component Big #zClass
Ct4 B #cInfo
Ct3 Component Big #zClass
Ct3 B #cInfo
Ct2 Component Big #zClass
Ct2 B #cInfo
Ct0 Component Big #zClass
Ct0 B #cInfo
Ct10 Component Big #zClass
Ct10 B #cInfo
Us0 Ct9 S90 'Sub 9' #zField
Us0 Ct8 S80 'Sub 8' #zField
Us0 Ct7 S70 'Sub 7' #zField
Us0 Ct6 S60 'Sub 6' #zField
Us0 Ct5 S50 'Sub 5' #zField
Us0 Ct4 S20 'Sub 2' #zField
Us0 Ct3 S40 'Sub 4' #zField
Us0 Ct2 S30 'Sub 3' #zField
Us0 Ct0 S10 'Sub 1' #zField
Us0 @TextInP .type .type #zField
Us0 @TextInP .processKind .processKind #zField
Us0 @TextInP .xml .xml #zField
Us0 @TextInP .responsibility .responsibility #zField
Us0 @UdProcessEnd f1 '' #zField
Us0 @UdProcessEnd f8 '' #zField
Us0 @UdMethod f12 '' #zField
Us0 @UdMethod f19 '' #zField
Us0 @CallSub f39 '' #zField
Us0 @UdProcessEnd f42 '' #zField
Us0 @CallSub f45 '' #zField
Us0 @PushWFArc f2 '' #zField
Us0 @UdInit f0 '' #zField
Us0 @UdProcessEnd f21 '' #zField
Us0 @UdMethod f16 '' #zField
Us0 @GridStep f14 '' #zField
Us0 @PushWFArc f15 '' #zField
Us0 @PushWFArc f22 '' #zField
Us0 @PushWFArc f35 '' #zField
Us0 @PushWFArc f36 '' #zField
Us0 @PushWFArc f7 '' #zField
Us0 @PushWFArc f13 '' #zField
Us0 @PushWFArc f24 '' #zField
Us0 @GridStep f6 '' #zField
Us0 @PushWFArc f3 '' #zField
Us0 @PushWFArc f4 '' #zField
Us0 @PushWFArc f10 '' #zField
Us0 @PushWFArc f25 '' #zField
Us0 @PushWFArc f26 '' #zField
Us0 @PushWFArc f11 '' #zField
Us0 @PushWFArc f5 '' #zField
Us0 @PushWFArc f18 '' #zField
Us0 Ct10 S00 'Sub 10' #zField
Us0 @PushWFArc f9 '' #zField
Us0 @PushWFArc f17 '' #zField
>Proto Us0 Us0 UserProfileProcess #zField
Ct9 @AnnotationInP-0n ai ai #zField
Ct9 @TextInP .type .type #zField
Ct9 @TextInP .processKind .processKind #zField
Ct9 @TextInP .xml .xml #zField
Ct9 @TextInP .responsibility .responsibility #zField
Ct9 @GridStep f17 '' #zField
Ct9 @PushTrueWFInG-01 g0 '' #zField
Ct9 @PushWFArc f0 '' #zField
Ct9 @PushTrueWFOutG-01 g1 '' #zField
Ct9 @PushWFArc f1 '' #zField
>Proto Ct9 Ct0 Component #zField
Ct8 @AnnotationInP-0n ai ai #zField
Ct8 @TextInP .type .type #zField
Ct8 @TextInP .processKind .processKind #zField
Ct8 @TextInP .xml .xml #zField
Ct8 @TextInP .responsibility .responsibility #zField
Ct8 @GridStep f27 '' #zField
Ct8 @PushTrueWFInG-01 g0 '' #zField
Ct8 @PushWFArc f0 '' #zField
Ct8 @PushTrueWFOutG-01 g1 '' #zField
Ct8 @PushWFArc f1 '' #zField
>Proto Ct8 Ct1 Component #zField
Ct7 @AnnotationInP-0n ai ai #zField
Ct7 @TextInP .type .type #zField
Ct7 @TextInP .processKind .processKind #zField
Ct7 @TextInP .xml .xml #zField
Ct7 @TextInP .responsibility .responsibility #zField
Ct7 @GridStep f28 '' #zField
Ct7 @PushTrueWFInG-01 g0 '' #zField
Ct7 @PushWFArc f0 '' #zField
Ct7 @PushTrueWFOutG-01 g1 '' #zField
Ct7 @PushWFArc f1 '' #zField
>Proto Ct7 Ct2 Component #zField
Ct6 @AnnotationInP-0n ai ai #zField
Ct6 @TextInP .type .type #zField
Ct6 @TextInP .processKind .processKind #zField
Ct6 @TextInP .xml .xml #zField
Ct6 @TextInP .responsibility .responsibility #zField
Ct6 @GridStep f11 '' #zField
Ct6 @PushTrueWFInG-01 g0 '' #zField
Ct6 @PushWFArc f0 '' #zField
Ct6 @PushTrueWFOutG-01 g1 '' #zField
Ct6 @PushWFArc f1 '' #zField
>Proto Ct6 Ct3 Component #zField
Ct5 @AnnotationInP-0n ai ai #zField
Ct5 @TextInP .type .type #zField
Ct5 @TextInP .processKind .processKind #zField
Ct5 @TextInP .xml .xml #zField
Ct5 @TextInP .responsibility .responsibility #zField
Ct5 @GridStep f25 '' #zField
Ct5 @PushTrueWFInG-01 g0 '' #zField
Ct5 @PushWFArc f0 '' #zField
Ct5 @PushTrueWFOutG-01 g1 '' #zField
Ct5 @PushWFArc f1 '' #zField
>Proto Ct5 Ct4 Component #zField
Ct4 @AnnotationInP-0n ai ai #zField
Ct4 @TextInP .type .type #zField
Ct4 @TextInP .processKind .processKind #zField
Ct4 @TextInP .xml .xml #zField
Ct4 @TextInP .responsibility .responsibility #zField
Ct4 @PushWFArc f23 '' #zField
Ct4 @GridStep f10 '' #zField
Ct4 @GridStep f20 '' #zField
Ct4 @PushTrueWFInG-01 g0 '' #zField
Ct4 @PushWFArc f0 '' #zField
Ct4 @PushTrueWFOutG-01 g1 '' #zField
Ct4 @PushWFArc f1 '' #zField
>Proto Ct4 Ct5 Component #zField
Ct3 @TextInP .type .type #zField
Ct3 @TextInP .processKind .processKind #zField
Ct3 @TextInP .xml .xml #zField
Ct3 @TextInP .responsibility .responsibility #zField
Ct3 @GridStep f11 '' #zField
Ct3 @PushTrueWFInG-01 g0 '' #zField
Ct3 @PushWFArc f0 '' #zField
Ct3 @PushTrueWFOutG-01 g1 '' #zField
Ct3 @GridStep f4 '' #zField
Ct3 @PushWFArc f2 '' #zField
Ct3 @PushWFArc f1 '' #zField
>Proto Ct3 Ct6 Component #zField
Ct2 @TextInP .type .type #zField
Ct2 @TextInP .processKind .processKind #zField
Ct2 @TextInP .xml .xml #zField
Ct2 @TextInP .responsibility .responsibility #zField
Ct2 @CallSub f11 '' #zField
Ct2 @GridStep f9 '' #zField
Ct2 @PushWFArc f25 '' #zField
Ct2 @PushTrueWFInG-01 g0 '' #zField
Ct2 @PushWFArc f0 '' #zField
Ct2 @PushTrueWFOutG-01 g1 '' #zField
Ct2 @PushWFArc f1 '' #zField
>Proto Ct2 Ct7 Component #zField
Ct0 @TextInP .type .type #zField
Ct0 @TextInP .processKind .processKind #zField
Ct0 @TextInP .xml .xml #zField
Ct0 @TextInP .responsibility .responsibility #zField
Ct0 @PushWFArc f31 '' #zField
Ct0 @CallSub f18 '' #zField
Ct0 @GridStep f20 '' #zField
Ct0 @PushTrueWFInG-01 g0 '' #zField
Ct0 @PushWFArc f0 '' #zField
Ct0 @PushTrueWFOutG-01 g1 '' #zField
Ct0 @PushWFArc f1 '' #zField
>Proto Ct0 Ct8 Component #zField
Ct10 @AnnotationInP-0n ai ai #zField
Ct10 @TextInP .type .type #zField
Ct10 @TextInP .processKind .processKind #zField
Ct10 @TextInP .xml .xml #zField
Ct10 @TextInP .responsibility .responsibility #zField
Ct10 @PushTrueWFInG-01 g0 '' #zField
Ct10 @PushTrueWFOutG-01 g1 '' #zField
Ct10 @GridStep f1 '' #zField
Ct10 @PushWFArc f2 '' #zField
Ct10 @PushWFArc f0 '' #zField
>Proto Ct10 Ct9 Component #zField
Us0 S90 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Save Sort Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S90 752 258 112 44 -46 -8 #rect
Us0 S80 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Save Date Format</name>
    </language>
</elementInfo>
' #txt
Us0 S80 608 258 112 44 -49 -8 #rect
Us0 S70 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Save General Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S70 448 258 128 44 -57 -8 #rect
Us0 S60 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Init Process Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S60 928 122 112 44 -53 -8 #rect
Us0 S50 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Init Date Format Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S50 592 122 144 44 -64 -8 #rect
Us0 S20 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Init Sort Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S20 768 122 112 44 -41 -8 #rect
Us0 S40 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Init General Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S40 448 122 112 44 -52 -8 #rect
Us0 S30 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Init Language</name>
    </language>
</elementInfo>
' #txt
Us0 S30 160 122 112 44 -37 -8 #rect
Us0 S10 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Save Language</name>
    </language>
</elementInfo>
' #txt
Us0 S10 160 258 112 44 -43 -8 #rect
Us0 f1 211 51 26 26 0 12 #rect
Us0 f8 1107 131 26 26 0 12 #rect
Us0 f12 guid 17255599F044D2FD #txt
Us0 f12 method initSettings() #txt
Us0 f12 inParameterDecl '<> param;' #txt
Us0 f12 outParameterDecl '<> result;' #txt
Us0 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>initSettings()</name>
    </language>
</elementInfo>
' #txt
Us0 f12 83 131 26 26 -22 17 #rect
Us0 f19 guid 17255B3EA938571E #txt
Us0 f19 method save() #txt
Us0 f19 inParameterDecl '<> param;' #txt
Us0 f19 outParameterDecl '<> result;' #txt
Us0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save()</name>
    </language>
</elementInfo>
' #txt
Us0 f19 83 267 26 26 -16 20 #rect
Us0 f39 processCall 'Ivy Data Processes/EmailSettingService:findEmailSetting()' #txt
Us0 f39 requestActionDecl '<> param;' #txt
Us0 f39 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.EmailSetting.EmailSettingData out;
' #txt
Us0 f39 responseMappingAction 'out=in;
out.emailSetting=result.ivyEmailSetting;
' #txt
Us0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init EmailSetting</name>
    </language>
</elementInfo>
' #txt
Us0 f39 304 122 112 44 -44 -8 #rect
Us0 f42 1227 267 26 26 0 12 #rect
Us0 f45 processCall 'Ivy Data Processes/EmailSettingService:saveEmailSetting(ch.ivy.addon.portalkit.ivydata.bo.IvyEmailSetting)' #txt
Us0 f45 requestActionDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyEmailSetting emailSetting> param;' #txt
Us0 f45 requestMappingAction 'param.emailSetting=in.emailSetting;
' #txt
Us0 f45 responseMappingAction 'out=in;
' #txt
Us0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Save EmailSetting</name>
    </language>
</elementInfo>
' #txt
Us0 f45 304 258 112 44 -50 -8 #rect
Us0 f2 109 64 211 64 #arcP
Us0 f0 guid 172546E1FE4FCAB2 #txt
Us0 f0 method start() #txt
Us0 f0 inParameterDecl '<> param;' #txt
Us0 f0 inActionCode 'import ch.ivyteam.util.date.Weekday;
out.dailySummaryList = [Weekday.MONDAY, Weekday.TUESDAY, Weekday.WEDNESDAY, Weekday.THURSDAY, Weekday.FRIDAY, Weekday.SATURDAY, Weekday.SUNDAY];' #txt
Us0 f0 outParameterDecl '<> result;' #txt
Us0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Us0 f0 83 51 26 26 -16 15 #rect
Us0 f21 483 379 26 26 0 12 #rect
Us0 f16 guid 1742004FD7E8D572 #txt
Us0 f16 method backToHome() #txt
Us0 f16 inParameterDecl '<> param;' #txt
Us0 f16 outParameterDecl '<> result;' #txt
Us0 f16 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>backToHome()</name>
    </language>
</elementInfo>
' #txt
Us0 f16 83 379 26 26 -25 15 #rect
Us0 f14 actionTable 'out=in;
' #txt
Us0 f14 actionCode 'import ch.ivy.addon.portalkit.publicapi.PortalNavigatorAPI;

PortalNavigatorAPI.navigateToPortalHome();' #txt
Us0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Back to Home</name>
    </language>
</elementInfo>
' #txt
Us0 f14 216 370 112 44 -38 -8 #rect
Us0 f15 109 392 216 392 #arcP
Us0 f22 328 392 483 392 #arcP
Us0 f35 expr out #txt
Us0 f35 109 280 160 280 #arcP
Us0 f36 272 280 304 280 #arcP
Us0 f7 109 144 160 144 #arcP
Us0 f13 272 144 304 144 #arcP
Us0 f24 416 144 448 144 #arcP
Us0 f6 actionTable 'out=in;
' #txt
Us0 f6 actionCode 'import ch.ivy.addon.portalkit.publicapi.PortalNavigatorAPI;

PortalNavigatorAPI.navigateToPortalHome();' #txt
Us0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Back to Home</name>
    </language>
</elementInfo>
' #txt
Us0 f6 1056 258 112 44 -38 -8 #rect
Us0 f3 1168 280 1227 280 #arcP
Us0 f4 560 144 592 144 #arcP
Us0 f10 736 144 768 144 #arcP
Us0 f25 880 144 928 144 #arcP
Us0 f26 1040 144 1107 144 #arcP
Us0 f11 416 280 448 280 #arcP
Us0 f5 576 280 608 280 #arcP
Us0 f18 720 280 752 280 #arcP
Us0 S00 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Save Process Setting</name>
    </language>
</elementInfo>
' #txt
Us0 S00 896 258 128 44 -58 -8 #rect
Us0 f9 864 280 896 280 #arcP
Us0 f17 1024 280 1056 280 #arcP
>Proto Us0 .type ch.ivy.addon.portal.setting.UserProfile.UserProfileData #txt
>Proto Us0 .processKind HTML_DIALOG #txt
>Proto Us0 -8 -8 16 16 16 26 #rect
Ct9 f17 actionTable 'out=in;
' #txt
Ct9 f17 actionCode 'import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
UserSettingService.newInstance().saveDefaultSortFieldOfTaskList(in.selectedTaskListSortField, in.selectedTaskListSortDirection);
UserSettingService.newInstance().saveDefaultSortFieldOfCaseList(in.selectedCaseListSortField, in.selectedCaseListSortDirection);' #txt
Ct9 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Save sort fields</name>
    </language>
</elementInfo>
' #txt
Ct9 f17 136 138 112 44 -42 -8 #rect
Ct9 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct9 g0 51 147 26 26 0 5 #rect
Ct9 f0 77 160 136 160 #arcP
Ct9 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct9 g1 307 147 26 26 0 5 #rect
Ct9 f1 248 160 307 160 #arcP
>Proto Ct0 0 0 32 24 18 0 #rect
>Proto Ct0 @|BIcon #fIcon
Ct8 f27 actionTable 'out=in;
' #txt
Ct8 f27 actionCode 'import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
UserSettingService.newInstance().saveDateFormat(in.selectedDateFormat);' #txt
Ct8 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save date format</name>
    </language>
</elementInfo>
' #txt
Ct8 f27 136 138 112 44 -45 -8 #rect
Ct8 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct8 g0 51 147 26 26 0 5 #rect
Ct8 f0 77 160 136 160 #arcP
Ct8 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct8 g1 307 147 26 26 0 5 #rect
Ct8 f1 248 160 307 160 #arcP
>Proto Ct1 0 0 32 24 18 0 #rect
>Proto Ct1 @|BIcon #fIcon
Ct7 f28 actionTable 'out=in;
' #txt
Ct7 f28 actionCode 'import ch.ivy.addon.portal.generic.bean.UserProfileBean;
import ch.ivy.addon.portalkit.bean.GuideBean;
import ch.ivy.addon.portalkit.jsf.ManagedBeans;

GuideBean guideBean =	ManagedBeans.get("guideBean") as GuideBean;
guideBean.setDontShowAgain(!in.showTutorial);

UserProfileBean userProfileBean =	ManagedBeans.get("userProfileBean") as UserProfileBean;
userProfileBean.saveHomepage(in.selectedHomepage.getName());' #txt
Ct7 f28 security system #txt
Ct7 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>update show user guide&#13;
and selected homepage</name>
    </language>
</elementInfo>
' #txt
Ct7 f28 136 138 160 44 -59 -16 #rect
Ct7 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct7 g0 51 147 26 26 0 5 #rect
Ct7 f0 77 160 136 160 #arcP
Ct7 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct7 g1 371 147 26 26 0 5 #rect
Ct7 f1 296 160 371 160 #arcP
>Proto Ct2 0 0 32 24 18 0 #rect
>Proto Ct2 @|BIcon #fIcon
Ct6 f11 actionTable 'out=in;
' #txt
Ct6 f11 actionCode 'import ch.ivy.addon.portalkit.enums.GlobalVariable;
import ch.ivy.addon.portalkit.configuration.GlobalSetting;
import ch.ivy.addon.portalkit.service.GlobalSettingService;
import org.apache.commons.lang3.StringUtils;
import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
import ch.ivy.addon.portalkit.enums.ProcessMode;

in.processModes.clear();
GlobalSettingService globalSettingService = new GlobalSettingService();
GlobalSetting defaultSetting = globalSettingService.findGlobalSettingByGlobalVariable(GlobalVariable.DEFAULT_PROCESS_MODE);

ProcessMode defaultSettingEnum = ProcessMode.valueOf(defaultSetting.value);

String defaultProcessModeSetting = ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/MyProfile/defaultOption", [defaultSettingEnum == null ? "" : defaultSettingEnum.getLabel()]);
in.processModes.add(defaultProcessModeSetting);

for (ProcessMode mode : ProcessMode.values()) {
	in.processModes.add(mode.getLabel());
}

String userProcessSetting = UserSettingService.newInstance().getDefaultProcessMode();
if (StringUtils.isBlank(userProcessSetting) || StringUtils.equalsIgnoreCase(userProcessSetting, UserSettingService.DEFAULT)) {
	userProcessSetting = defaultProcessModeSetting;
}


in.selectedProcessMode = userProcessSetting;

' #txt
Ct6 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Load Process modes</name>
    </language>
</elementInfo>
' #txt
Ct6 f11 136 138 128 44 -59 -8 #rect
Ct6 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct6 g0 51 147 26 26 0 5 #rect
Ct6 f0 77 160 136 160 #arcP
Ct6 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct6 g1 339 147 26 26 0 5 #rect
Ct6 f1 264 160 339 160 #arcP
>Proto Ct3 0 0 32 24 18 0 #rect
>Proto Ct3 @|BIcon #fIcon
Ct5 f25 actionTable 'out=in;
' #txt
Ct5 f25 actionCode 'import ch.ivyteam.ivy.environment.Ivy;
import ch.ivy.addon.portalkit.util.UserUtils;
import org.apache.commons.collections.CollectionUtils;
import java.util.ArrayList;

if (CollectionUtils.isEmpty(in.dateFormats)) {
  in.dateFormats = new ArrayList();
  in.dateFormats.add("DEFAULT");
  in.dateFormats.add(Ivy.cms().co("/patterns/datePattern"));
  in.dateFormats.add(Ivy.cms().co("/patterns/monthDatePattern"));
}

in.selectedDateFormat = UserUtils.getSelectedDateFormat(in.dateFormats);' #txt
Ct5 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>init date formats</name>
    </language>
</elementInfo>
' #txt
Ct5 f25 136 138 112 44 -44 -8 #rect
Ct5 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct5 g0 51 147 26 26 0 5 #rect
Ct5 f0 77 160 136 160 #arcP
Ct5 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct5 g1 307 147 26 26 0 5 #rect
Ct5 f1 248 160 307 160 #arcP
>Proto Ct4 0 0 32 24 18 0 #rect
>Proto Ct4 @|BIcon #fIcon
Ct4 f23 248 160 296 160 #arcP
Ct4 f10 actionTable 'out=in;
' #txt
Ct4 f10 actionCode 'import org.apache.commons.lang3.StringUtils;
import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
import ch.ivy.addon.portalkit.enums.SortDirection;
import java.util.ArrayList;

if (in.sortDirections == null || in.sortDirections.isEmpty()) {
	String defaultOption = UserSettingService.DEFAULT;

  in.sortDirections = new ArrayList();
  in.sortDirections.add(defaultOption);
  for (SortDirection direction : SortDirection.values()) {
    in.sortDirections.add(direction.name());
  }

  in.selectedTaskListSortDirection = UserSettingService.newInstance().getDefaultSortDirectionOfTaskList();
  if (StringUtils.isBlank(in.selectedTaskListSortDirection)) {
    in.selectedTaskListSortDirection = defaultOption;
  }

  in.selectedCaseListSortDirection = UserSettingService.newInstance().getDefaultSortDirectionOfCaseList();
  if (StringUtils.isBlank(in.selectedCaseListSortDirection)) {
  	in.selectedCaseListSortDirection = defaultOption;
  }
}' #txt
Ct4 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init sort directions</name>
    </language>
</elementInfo>
' #txt
Ct4 f10 136 138 112 44 -48 -8 #rect
Ct4 f20 actionTable 'out=in;
' #txt
Ct4 f20 actionCode 'import ch.ivy.addon.portalkit.enums.CaseSortField;
import ch.ivy.addon.portalkit.enums.TaskSortField;
import org.apache.commons.lang3.StringUtils;
import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
import java.util.Optional;
import ch.ivy.addon.portalkit.enums.CaseSortField;
import ch.ivy.addon.portalkit.enums.TaskSortField;
import java.util.ArrayList;

String defaultOption = UserSettingService.DEFAULT;

if (in.taskListSortFields == null || in.taskListSortFields.isEmpty()) {
  in.taskListSortFields = new ArrayList();
  in.taskListSortFields.add(defaultOption);

  for (TaskSortField sortField : TaskSortField.values()) {
   	// Task category sort not yet available
  	if (StringUtils.isNotBlank(sortField.getLabel()) && sortField != TaskSortField.CATEGORY) {
  		in.taskListSortFields.add(sortField.name());
  	}
  }

  in.selectedTaskListSortField = Optional.ofNullable(UserSettingService.newInstance().getDefaultSortFieldOfTaskList()).orElse(defaultOption) as String;
}

if (in.caseListSortFields == null || in.caseListSortFields.isEmpty()) {
  in.caseListSortFields = new ArrayList();
  in.caseListSortFields.add(defaultOption);

	
  for (CaseSortField sortField : CaseSortField.values()) {
  	// Case category sort not yet available
    if (StringUtils.isNotBlank(sortField.getLabel()) && sortField != CaseSortField.CATEGORY) {
  		in.caseListSortFields.add(sortField.name());
  	}
  }

  in.selectedCaseListSortField = Optional.ofNullable(UserSettingService.newInstance().getDefaultSortFieldOfCaseList()).orElse(defaultOption) as String;
}' #txt
Ct4 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init sort fields</name>
    </language>
</elementInfo>
' #txt
Ct4 f20 296 138 112 44 -36 -8 #rect
Ct4 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct4 g0 51 147 26 26 0 5 #rect
Ct4 f0 77 160 136 160 #arcP
Ct4 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct4 g1 467 147 26 26 0 5 #rect
Ct4 f1 408 160 467 160 #arcP
>Proto Ct5 0 0 32 24 18 0 #rect
>Proto Ct5 @|BIcon #fIcon
Ct3 f11 actionTable 'out=in;
' #txt
Ct3 f11 actionCode 'import ch.ivy.addon.portalkit.constant.UserProperty;
import ch.ivy.addon.portalkit.enums.GlobalVariable;
import ch.ivy.addon.portalkit.service.GlobalSettingService;
import ch.ivy.addon.portalkit.bo.Guide;

// Find Global setting for SHOW_USER_GUIDE
GlobalSettingService globalSettingService = new GlobalSettingService();
in.disableShowTutorial = !Boolean.parseBoolean(globalSettingService.findGlobalSettingValue(GlobalVariable.SHOW_USER_GUIDE));

// Get isShowGuide from IUser
in.showTutorial = Boolean.valueOf(ivy.session.getSessionUser().getProperty(UserProperty.SHOW_GUIDE));' #txt
Ct3 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init User Guide</name>
    </language>
</elementInfo>
' #txt
Ct3 f11 176 138 112 44 -41 -8 #rect
Ct3 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct3 g0 51 147 26 26 0 5 #rect
Ct3 f0 77 160 176 160 #arcP
Ct3 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct3 g1 571 147 26 26 0 5 #rect
Ct3 f4 actionTable 'out=in;
' #txt
Ct3 f4 actionCode 'import ch.addon.portal.generic.userprofile.homepage.Homepage;
import ch.addon.portal.generic.userprofile.homepage.HomepageUtils;

Homepage defaultHomepage = HomepageUtils.findDefaultHomepage();
defaultHomepage.setName("");
defaultHomepage.setLabel(ivy.cms.co("/ch.ivy.addon.portalkit.ui.jsf/MyProfile/defaultOption", [defaultHomepage.getLabel()]));
out.homepages = HomepageUtils.loadHomepages();
out.homepages.add(0, defaultHomepage);
out.selectedHomepage = HomepageUtils.findHomepageInMyProfile();' #txt
Ct3 f4 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Load homepages</name>
    </language>
</elementInfo>
' #txt
Ct3 f4 352 138 112 44 -45 -8 #rect
Ct3 f2 288 160 352 160 #arcP
Ct3 f1 464 160 571 160 #arcP
Ct3 f1 0 0.5362622036262203 0 0 #arcLabel
>Proto Ct6 0 0 32 24 18 0 #rect
>Proto Ct6 @|BIcon #fIcon
Ct2 f11 processCall 'Ivy Data Processes/LanguageService:findUserLanguages()' #txt
Ct2 f11 requestActionDecl '<> param;' #txt
Ct2 f11 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.CentralLanguage.CentralLanguageData out;
' #txt
Ct2 f11 responseMappingAction 'out=in;
out.language=result.language;
' #txt
Ct2 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LanguageService</name>
    </language>
</elementInfo>
' #txt
Ct2 f11 136 138 112 44 -48 -8 #rect
Ct2 f9 actionTable 'out=in;
' #txt
Ct2 f9 actionCode 'import javax.faces.context.FacesContext;
import ch.ivy.addon.portalkit.util.UserUtils;

UserUtils.setLanguague();
' #txt
Ct2 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set locale</name>
    </language>
</elementInfo>
' #txt
Ct2 f9 288 138 112 44 -27 -8 #rect
Ct2 f25 expr out #txt
Ct2 f25 248 160 288 160 #arcP
Ct2 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct2 g0 51 147 26 26 0 5 #rect
Ct2 f0 77 160 136 160 #arcP
Ct2 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct2 g1 467 147 26 26 0 5 #rect
Ct2 f1 expr out #txt
Ct2 f1 400 160 467 160 #arcP
>Proto Ct7 0 0 32 24 18 0 #rect
>Proto Ct7 @|BIcon #fIcon
Ct0 f31 expr out #txt
Ct0 f31 248 160 288 160 #arcP
Ct0 f18 processCall 'Ivy Data Processes/LanguageService:saveUserLanguage(ch.ivy.addon.portalkit.ivydata.bo.IvyLanguage)' #txt
Ct0 f18 requestActionDecl '<ch.ivy.addon.portalkit.ivydata.bo.IvyLanguage language> param;' #txt
Ct0 f18 requestMappingAction 'param.language=in.language;
' #txt
Ct0 f18 responseActionDecl 'ch.ivy.addon.portalkit.multiapp.settings.CentralLanguage.CentralLanguageData out;
' #txt
Ct0 f18 responseMappingAction 'out=in;
' #txt
Ct0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>LanguageService</name>
    </language>
</elementInfo>
' #txt
Ct0 f18 136 138 112 44 -48 -8 #rect
Ct0 f20 actionTable 'out=in;
' #txt
Ct0 f20 actionCode 'import ch.ivy.addon.portalkit.util.UserUtils;

UserUtils.setLanguague();
' #txt
Ct0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set locale</name>
    </language>
</elementInfo>
' #txt
Ct0 f20 288 138 112 44 -27 -8 #rect
Ct0 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Ct0 g0 51 147 26 26 0 5 #rect
Ct0 f0 77 160 136 160 #arcP
Ct0 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Ct0 g1 467 147 26 26 0 5 #rect
Ct0 f1 expr out #txt
Ct0 f1 400 160 467 160 #arcP
>Proto Ct8 0 0 32 24 18 0 #rect
>Proto Ct8 @|BIcon #fIcon
Ct10 g0 51 243 26 26 0 5 #rect
Ct10 g1 563 243 26 26 0 5 #rect
Ct10 f1 actionTable 'out=in;
' #txt
Ct10 f1 actionCode 'import ch.ivy.addon.portalkit.ivydata.service.impl.UserSettingService;
UserSettingService.newInstance().saveProcessModeSetting(in.selectedProcessMode);' #txt
Ct10 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Save Process Setting</name>
    </language>
</elementInfo>
' #txt
Ct10 f1 224 234 128 44 -58 -8 #rect
Ct10 f2 77 256 224 256 #arcP
Ct10 f0 352 256 563 256 #arcP
>Proto Ct9 0 0 32 24 18 0 #rect
>Proto Ct9 @|BIcon #fIcon
Us0 f0 mainOut f2 tail #connect
Us0 f2 head f1 mainIn #connect
Us0 f16 mainOut f15 tail #connect
Us0 f15 head f14 mainIn #connect
Us0 f14 mainOut f22 tail #connect
Us0 f22 head f21 mainIn #connect
Us0 f35 head S10 g0 #connect
Us0 S10 g1 f36 tail #connect
Us0 f36 head f45 mainIn #connect
Us0 f19 mainOut f35 tail #connect
Us0 f7 head S30 g0 #connect
Us0 S30 g1 f13 tail #connect
Us0 f13 head f39 mainIn #connect
Us0 f12 mainOut f7 tail #connect
Us0 f24 head S40 g0 #connect
Us0 f39 mainOut f24 tail #connect
Us0 f6 mainOut f3 tail #connect
Us0 f3 head f42 mainIn #connect
Us0 f4 head S50 g0 #connect
Us0 S50 g1 f10 tail #connect
Us0 f10 head S20 g0 #connect
Us0 S40 g1 f4 tail #connect
Us0 f25 head S60 g0 #connect
Us0 S60 g1 f26 tail #connect
Us0 f26 head f8 mainIn #connect
Us0 S20 g1 f25 tail #connect
Us0 f11 head S70 g0 #connect
Us0 f45 mainOut f11 tail #connect
Us0 f5 head S80 g0 #connect
Us0 S70 g1 f5 tail #connect
Us0 f18 head S90 g0 #connect
Us0 S80 g1 f18 tail #connect
Us0 S90 g1 f9 tail #connect
Us0 f9 head S00 g0 #connect
Us0 S00 g1 f17 tail #connect
Us0 f17 head f6 mainIn #connect
Ct9 g0 m f0 tail #connect
Ct9 f0 head f17 mainIn #connect
Ct9 f1 head g1 m #connect
Ct9 f17 mainOut f1 tail #connect
Ct9 0 0 384 320 0 #ivRect
Ct8 g0 m f0 tail #connect
Ct8 f0 head f27 mainIn #connect
Ct8 f1 head g1 m #connect
Ct8 f27 mainOut f1 tail #connect
Ct8 0 0 384 320 0 #ivRect
Ct7 g0 m f0 tail #connect
Ct7 f0 head f28 mainIn #connect
Ct7 f1 head g1 m #connect
Ct7 f28 mainOut f1 tail #connect
Ct7 0 0 448 320 0 #ivRect
Ct6 g0 m f0 tail #connect
Ct6 f0 head f11 mainIn #connect
Ct6 f1 head g1 m #connect
Ct6 f11 mainOut f1 tail #connect
Ct6 0 0 416 320 0 #ivRect
Ct5 g0 m f0 tail #connect
Ct5 f0 head f25 mainIn #connect
Ct5 f1 head g1 m #connect
Ct5 f25 mainOut f1 tail #connect
Ct5 0 0 384 320 0 #ivRect
Ct4 f10 mainOut f23 tail #connect
Ct4 f23 head f20 mainIn #connect
Ct4 g0 m f0 tail #connect
Ct4 f0 head f10 mainIn #connect
Ct4 f1 head g1 m #connect
Ct4 f20 mainOut f1 tail #connect
Ct4 0 0 544 320 0 #ivRect
Ct3 g0 m f0 tail #connect
Ct3 f0 head f11 mainIn #connect
Ct3 f11 mainOut f2 tail #connect
Ct3 f2 head f4 mainIn #connect
Ct3 f4 mainOut f1 tail #connect
Ct3 f1 head g1 m #connect
Ct3 0 0 704 336 0 #ivRect
Ct2 f11 mainOut f25 tail #connect
Ct2 f25 head f9 mainIn #connect
Ct2 g0 m f0 tail #connect
Ct2 f0 head f11 mainIn #connect
Ct2 f1 head g1 m #connect
Ct2 f9 mainOut f1 tail #connect
Ct2 0 0 544 320 0 #ivRect
Ct0 f18 mainOut f31 tail #connect
Ct0 f31 head f20 mainIn #connect
Ct0 g0 m f0 tail #connect
Ct0 f0 head f18 mainIn #connect
Ct0 f1 head g1 m #connect
Ct0 f20 mainOut f1 tail #connect
Ct0 0 0 544 320 0 #ivRect
Ct10 g0 m f2 tail #connect
Ct10 f2 head f1 mainIn #connect
Ct10 f1 mainOut f0 tail #connect
Ct10 f0 head g1 m #connect
Ct10 0 0 640 512 0 #ivRect
