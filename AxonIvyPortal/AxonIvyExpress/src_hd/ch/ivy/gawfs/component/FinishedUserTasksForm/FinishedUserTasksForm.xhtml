<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:cc="http://java.sun.com/jsf/composite" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:pm="http://primefaces.org/mobile">
<cc:interface componentType="IvyComponent">
  <cc:attribute name="finishedTasks" required="true" />
</cc:interface>
<cc:implementation>
  <h:outputLabel id="finished-task-label" styleClass="finished-task-label" for="approval-result"
    value="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinishedTasksForm/FinishedTasks')}" />
  <ui:repeat id="approval-result" var="wfTask" value="#{cc.attrs.finishedTasks}" varStatus="status">
    <p:fieldset id="finished-task-fieldset" styleClass="finished-task-fieldset express-fieldset fieldset-no-border ui-g" toggleable="true"
      collapsed="#{status.index  == cc.attrs.finishedTasks.size() -1 ? 'false' : 'true'}">
      <f:facet name="legend">
        <h:outputText id="finished-task-fieldset-legend" value="#{wfTask.subject}" />
      </f:facet>
      <div class="ui-g-12 card">
        <!-- APPLICANT INFO -->
        <p:outputLabel id="applicant-label" value="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinishedTasksForm/Applicant')}"
          styleClass="review-content-title" />
        <p:panelGrid id="applicant-field-container" styleClass="applicant-field-container">
          <p:row>
            <p:column styleClass="applicant-label-field-col">
              <p:outputLabel value="#{ivy.cms.co('/Dialogs/WorkflowExecution/ApprovalForm/Fullname')}:" for="applicant-fullname" />
            </p:column>
          </p:row>
          <p:row>
            <p:column styleClass="applicant-field-col">
              <h:outputText id="applicant-fullname" value="#{wfTask.actualApplicant.displayName} (#{wfTask.actualApplicant.name})" />
            </p:column>
          </p:row>
          <p:row>
            <p:column styleClass="applicant-label-field-col">
              <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/emailSetting/eMail')}:" for="applicant-mail" />
            </p:column>
          </p:row>
          <p:row>
            <p:column styleClass="applicant-field-col">
              <h:outputText id="applicant-mail" value="#{wfTask.actualApplicant.EMailAddress}" />
            </p:column>
          </p:row>
        </p:panelGrid>

        <!-- USER TASKS -->
        <p:outputLabel id="form-details-label" value="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinishedTasksForm/FormDetails')}"
          styleClass="review-content-title" />
        <pe:dynaForm id="dyna-form" value="#{wfTask.dynaFormController.model}" var="dynaData" columnClasses="label-container, field-container"
          styleClass="user-task-dyna-form ui-fluid">

          <pe:dynaFormControl type="InputFieldText" for="input-field-text">
            <p:inputText id="input-field-text" value="#{dynaData.value}" required="#{dynaData.required}" disabled="true" />
          </pe:dynaFormControl>

          <pe:dynaFormControl type="InputFieldNumber" for="input-field-number">
            <p:spinner id="input-field-number" value="#{dynaData.value}" required="#{dynaData.required}" min="0" readonly="true" />
          </pe:dynaFormControl>

          <pe:dynaFormControl type="InputFieldDate" for="input-field-date" styleClass="calendar">
            <p:calendar locale="#{localeBean.locale}" pattern="#{dateTimePatternBean.datePattern}" id="input-field-date" value="#{dynaData.value}"
              required="#{dynaData.required}" showOn="false" readonly="true" />
          </pe:dynaFormControl>

          <pe:dynaFormControl type="InputTextArea" for="input-text-area">
            <p:inputTextarea id="input-text-area" value="#{dynaData.value}" required="#{dynaData.required}" rows="#{dynaData.intSetting}"
              autoResize="false" disabled="true" readonly="true" />
          </pe:dynaFormControl>

          <pe:dynaFormControl type="ManyCheckbox" for="many-checkbox" styleClass="dyna-form-dl-div">
            <p:dataList value="#{dynaData.value}" var="checkItem" type="definition">
              <i class="fa fa-check-square-o" aria-hidden="true" /> #{checkItem}
            </p:dataList>
          </pe:dynaFormControl>

          <pe:dynaFormControl type="OneRadio" for="one-radio" styleClass="dyna-form-dl-div">
            <p:dataList value="#{dynaData.value}" var="checkItem" type="definition"
              emptyMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/NoSelection')}">
              <i class="fa fa-dot-circle-o" aria-hidden="true" /> #{checkItem}
            </p:dataList>
          </pe:dynaFormControl>

          <pe:dynaFormControl type="FileUpload" for="file-upload">
            <ic:ch.ivy.gawfs.component.CaseDocument uploadPossible="false" fileLimit="#{dynaData.intSetting}" startMethod="start(#{dynaData.options})"
              allowFiletypes="#{dynaData.options}" />
          </pe:dynaFormControl>

          <pe:dynaFormControl type="Spacer" for="spacer">
            <p:spacer width="50" height="16" id="spacer" />
          </pe:dynaFormControl>

        </pe:dynaForm>

      </div>
    </p:fieldset>

    <ic:ch.ivy.gawfs.component.ApprovalResult id="approval-result-component" approvalResults="#{wfTask.approvalResultList}"
      rendered="#{not empty wfTask.approvalResultList}" lastApprovalCollapsed="#{!status.last}" />

    <p:tooltip id="finished-task-fieldset-tooltip" value="#{wfTask.subject}" for="finished-task-fieldset-legend" trackMouse="true" />
  </ui:repeat>
</cc:implementation>
</html>