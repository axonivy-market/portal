<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:cc="http://java.sun.com/jsf/composite"
  xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:pm="http://primefaces.org/mobile">
<cc:interface componentType="IvyComponent">
  <cc:attribute name="finishedTasks" required="true" />
</cc:interface>
<cc:implementation>
  <ui:repeat id="approval-result" var="wfTask" value="#{cc.attrs.finishedTasks}">
    <!-- APPLICANT INFO -->
    <!-- <p:panelGrid id="prozessSettingsGrid" styleClass="applicant-field-container">
      <p:row>
        <p:column styleClass="applicant-label-field-col">
          <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/login/username')}:" for="applicant-name" />
        </p:column>
        <p:column styleClass="applicant-field-col">
          <h:outputText id="applicant-name" value="#{wfTask.actualApplicant.name}"/>
        </p:column>
      </p:row>
      <p:row>
        <p:column styleClass="applicant-label-field-col">
          <p:outputLabel value="#{ivy.cms.co('/Dialogs/WorkflowExecution/ApprovalForm/Fullname')}:" for="applicant-fullname" />
        </p:column>
        <p:column styleClass="applicant-field-col">
          <h:outputText id="applicant-fullname" value="#{wfTask.actualApplicant.displayName}" />
        </p:column>
      </p:row>
      <p:row rendered="#{wfTask.actualApplicant.isUser()}">
        <p:column styleClass="applicant-label-field-col">
          <p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/emailSetting/eMail')}:" for="applicant-mail" />
        </p:column>
        <p:column styleClass="applicant-field-col">
          <h:outputText id="applicant-mail" value="#{wfTask.actualApplicant.EMailAddress}" />
        </p:column>
      </p:row>
    </p:panelGrid> -->

    <!-- USER TASKS -->
    <p:fieldset id="finished-task-fieldset" styleClass="finished-task-fieldset" toggleable="true" legend="#{wfTask.subject}">
      <p:outputLabel id="form-details-label" value="Form details" styleClass="review-content-title" />
      <pe:dynaForm id="dynaForm"
        value="#{wfTask.dynaFormController.model}"
        var="dynaData" columnClasses="label-container, field-container"
        styleClass="Wid100" readonly="true">

        <pe:dynaFormControl type="InputFieldText" for="inputFieldText">
          <p:inputText id="inputFieldText" value="#{dynaData.value}"
            required="#{dynaData.required}" readonly="true" />
        </pe:dynaFormControl>

        <pe:dynaFormControl type="InputFieldNumber" for="inputFieldNumber">
          <p:spinner id="inputFieldNumber" value="#{dynaData.value}"
            required="#{dynaData.required}" min="0" readonly="true" />
        </pe:dynaFormControl>

        <pe:dynaFormControl type="InputFieldDate" for="inputFieldDate"
          styleClass="calendar">
          <p:calendar
            locale="#{localeBean.locale}" pattern="#{dateTimePatternBean.datePattern}" 
            id="inputFieldDate" value="#{dynaData.value}"
            required="#{dynaData.required}" showOn="false" readonly="true" />
        </pe:dynaFormControl>

        <pe:dynaFormControl type="InputTextArea" for="inputTextArea">
          <p:inputTextarea id="inputTextArea" value="#{dynaData.value}"
            required="#{dynaData.required}" rows="#{dynaData.intSetting}"
            autoResize="false" disabled="true" readonly="true" />
        </pe:dynaFormControl>

        <pe:dynaFormControl type="ManyCheckbox" for="manyCheckbox">
          <p:dataList value="#{dynaData.value}" var="checkItem" type="definition" >
            <i class="fa fa-check-square-o" aria-hidden="true"></i> #{checkItem}
          </p:dataList>

        </pe:dynaFormControl>

        <pe:dynaFormControl type="OneRadio" for="oneRadio">
          <p:dataList value="#{dynaData.value}" var="checkItem" type="definition" emptyMessage="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/NoSelection')}">
            <i class="fa fa-dot-circle-o" aria-hidden="true"></i> #{checkItem}
          </p:dataList>
        </pe:dynaFormControl>
        
        <pe:dynaFormControl type="FileUpload" for="fileUpload">
          <ic:ch.ivy.gawfs.component.CaseDocument uploadPossible="false"
            fileLimit="#{dynaData.intSetting}" startMethod="start(#{dynaData.options})" 
            allowFiletypes="#{dynaData.options}"/>
        </pe:dynaFormControl>

        <pe:dynaFormControl type="Spacer" for="spacer">
          <p:spacer width="50" height="16" id="spacer" />
        </pe:dynaFormControl>
      </pe:dynaForm>

      <!-- APPROVAL RESULT -->
      <p:outputLabel id="form-approval-label" value="Approval result" styleClass="review-content-title" />
      <p:dataTable id="approval-result-table" value="#{wfTask.approvalResultList}" var="approval">
        <p:column headerText="#{ivy.cms.co('/Dialogs/agileBPM/define_WF/TaskSubject')}" sortBy="#{approval.taskName}">
          <h:outputText value="#{approval.taskName}" />
        </p:column>
        <p:column headerText="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinalReviewForm/applicant')}" sortBy="#{approval.applicantName}">
          <h:outputText value="#{approval.applicantName}" />
        </p:column>
        <p:column headerText="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinalReviewForm/approver')}" sortBy="#{approval.approverName}">
          <h:outputText value="#{approval.approverName}" />
        </p:column>
        <p:column headerText="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/AbsenceAndDeputy/comment')}" sortBy="#{approval.comment}">
          <h:outputText value="#{approval.comment}" />
        </p:column>
        <p:column headerText="#{ivy.cms.co('/Dialogs/WorkflowExecution/FinalReviewForm/approvalStatus')}">
          <h:outputText value="#{approval.isApproved ? ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/yes') : ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/no')}" />
        </p:column>
      </p:dataTable>
    </p:fieldset>
  </ui:repeat>
</cc:implementation>
</html>