<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>

		<ui:composition template="/layouts/TaskTemplate.xhtml">
		<ui:param name="caseId" value="#{ivy.case.id}" />
		<ui:param name="task" value="#{ivy.task}" />
		<ui:param name="steps" value="#{data.data.steps}" />
		<ui:param name="actualStepIndex" value="2" />
		<ui:param name="isShowStartAdhocButton" value="false" />
		<ui:param name="isNotRequiredLogin" value="false" />


		<ui:define name="title">#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/PageTitle')} #{ivy.case.name}</ui:define>
		<ui:define name="taskForm">

			<h:form id="form">
				<!-- createFormelementTabs -->
				<div>
					<p:fieldset id="createTabsField" styleClass="createTabsFieldset" toggleable="true"
						legend="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/FieldSetFormelements')}">

						<p:tabView effect="" id="createTabs"
							activeIndex="#{data.activeTab}" dynamic="false">
							<p:ajax event="tabChange" listener="#{logic.tabChange}" />

							<p:tab title="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputField')}" id="createInputFieldTab">
							
								<f:facet name="title">
					               	<h:outputText styleClass="form-definition-item-icon" value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputField')}"/>
					             	<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/InputFieldText" width="70" styleClass="form-definition-item-icon"/>
					            </f:facet>
								<p:messages id="messagesInputFieldType" showDetail="false"
									autoUpdate="true" closable="true" for="InputFieldName" />
								<p:messages id="messagesInputFieldLabel" showDetail="false"
									autoUpdate="true" closable="true" for="InputFieldLabel" />

								<p:panelGrid id="createInputFieldPanelGrid" styleClass="Wid100">

									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="form-element-name">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')}:"
												for="InputFieldName"/>
										</p:column>
										<p:column styleClass="form-element-label">
											<p:inputText id="InputFieldName" required="true" type="text"
												value="#{data.createInputFieldTab.name}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"/>
										</p:column>
										<p:column styleClass="form-element-attribute">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputType')}:" for="InputFieldType" />
										</p:column>
										<p:column styleClass="form-element-attribute">
											<p:selectOneMenu id="InputFieldType"
												value="#{data.createInputFieldTab.type}" styleClass="form-element-input-field-type" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputType')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}">
												<f:selectItem itemLabel="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputTypes/TextBox')}"
													itemValue="InputFieldText" />
												<f:selectItem itemLabel="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputTypes/NumberField')}"
													itemValue="InputFieldNumber" />
												<f:selectItem itemLabel="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputTypes/DateSelection')}"
													itemValue="InputFieldDate" />
												<f:selectItems></f:selectItems>

											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="no-border">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}:" for="InputFieldLabel" />
										</p:column>
										<p:column styleClass="no-border">
											<p:inputText id="InputFieldLabel" required="true"
												value="#{data.createInputFieldTab.label}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputType')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"/>
										</p:column>
										<p:column styleClass="no-border">

											<p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}:" for="InputFieldRequired" />
										</p:column>
										<p:column styleClass="no-border">
											<p:selectBooleanCheckbox id="InputFieldRequired"
												value="#{data.createInputFieldTab.required}" />
										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-action-row">
										<p:column colspan="4" styleClass="create-input-field-panel-grid-action-btn">
											<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CreateField')}"
												actionListener="#{logic.createInputField()}" styleClass="buttonDelegate"
												icon="fa fa-arrow-down" id="create-element-button"
												update="form:availableFormelements form:createTabs"
												process="form:createTabs:createInputFieldTab" />
										</p:column>
									</p:row>

								</p:panelGrid>
							</p:tab>
							<p:tab title="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputArea')}" id="createInputAreaTab">
								<p:messages id="messagesInputAreaName" showDetail="false"
									autoUpdate="true" closable="true" for="InputAreaName" />
								<p:messages id="messagesInputAreaLabel" showDetail="false"
									autoUpdate="true" closable="true" for="InputAreaLabel" />

								<f:facet name="title">
					               	<h:outputText styleClass="form-definition-item-icon" value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputArea')}"/>
					             	<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/InputTextArea" width="70" styleClass="form-definition-item-icon"/>
					            </f:facet>

								<p:panelGrid id="createInputAreaPanelGrid" styleClass="createInputAreaPanelGrid Wid100">
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="form-element-name">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')}:"
												for="InputAreaName" />
										</p:column>
										<p:column styleClass="form-element-label">
											<p:inputText id="InputAreaName" required="true" type="text" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
												value="#{data.createInputAreaTab.name}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
										</p:column>
										<p:column styleClass="form-element-attribute">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NumberOfRows')}:" for="InputAreaNoRows" />
										</p:column>
										<p:column styleClass="form-element-attribute">
											<p:spinner id="InputAreaNoRows"
												value="#{data.createInputAreaTab.intSetting}" min="0"
												max="10"/>
										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="no-border">

											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}:" for="InputAreaLabel" />
										</p:column>
										<p:column styleClass="no-border">
											<p:inputText id="InputAreaLabel" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
												value="#{data.createInputAreaTab.label}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
										</p:column>
										<p:column styleClass="no-border">

											<p:outputLabel value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}:" for="InputAreaRequired" />
										</p:column>
										<p:column styleClass="no-border">
											<p:selectBooleanCheckbox id="InputAreaRequired"
												value="#{data.createInputAreaTab.required}" />

										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-action-row">
										<p:column colspan="4" styleClass="create-input-field-panel-grid-action-btn">

											<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CreateField')}" styleClass="buttonDelegate"
												actionListener="#{logic.createInputTextArea}"
												icon="fa fa-arrow-down"
												update="form:availableFormelements form:createTabs"
												process="form:createTabs:createInputAreaTab" />
										</p:column>
									</p:row>
								</p:panelGrid>
							</p:tab>
							<p:tab title="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputCheckbox')}" id="createManyCheckboxTab">

								<p:messages id="messagesManyCheckboxName" showDetail="false"
									autoUpdate="true" closable="true" for="ManyCheckboxName" />
								<p:messages id="messagesManyCheckboxLabel" showDetail="false"
									autoUpdate="true" closable="true" for="ManyCheckboxLabel" />
									
								<f:facet name="title">
					               	<h:outputText styleClass="form-definition-item-icon" value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputCheckbox')}"/>
					             	<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/ManyCheckbox" width="70" styleClass="form-definition-item-icon"/>
					            </f:facet>

								<p:panelGrid id="createManyCheckboxGrid" styleClass="createManyCheckboxGridTable Wid100">
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="create-input-field-panel-grid-column">
											<p:panelGrid styleClass="no-border">
												<p:row styleClass="create-input-field-panel-grid-row">
													<p:column styleClass="form-element-name">
														<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')}:"
															for="ManyCheckboxName" />
			
													</p:column>
													<p:column styleClass="form-element-label">
														<p:inputText id="ManyCheckboxName" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
															type="text" value="#{data.createManyCheckboxTab.name}"
															styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
													</p:column>
												</p:row>
												<p:row styleClass="create-input-field-panel-grid-row">
													<p:column styleClass="no-border">
														<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}:" for="ManyCheckboxLabel" />
													</p:column>
													<p:column styleClass="no-border">
														<p:inputText id="ManyCheckboxLabel" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
															value="#{data.createManyCheckboxTab.label}"
															styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
													</p:column>
												</p:row>
											</p:panelGrid>
										</p:column>

										<p:column styleClass="form-element-name">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CheckboxFields')}:" />
										</p:column>
										
										<p:column styleClass="form-definition-option-container">

											<p:dataTable id="ManyCheckboxOptions" var="option"
												value="#{data.createManyCheckboxTab.options}"
												styleClass="hide-column-names no-border NoPadding"
												emptyMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NoCheckboxFieldYet')}">

												<p:column styleClass="vertical-align-middle">

													<p:inputText value="#{option.value}" styleClass="Wid70" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputCheckbox')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
														placeholder="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputCheckbox')}" maxlength="#{ivy.cms.co('/Dialogs/general/maxOptionsLength')}"/>

													<p:spacer width="14" height="16" />
													<p:commandButton icon="fa fa-trash-o fa-2x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"													
														actionListener="#{data.createManyCheckboxTab.deleteOption(option)}"
														process="form:createTabs:ManyCheckboxOptions"
														update="form:createTabs:ManyCheckboxOptions"
														immediate="true">

													</p:commandButton>
												</p:column>
												
												<f:facet name="footer" >
													<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/AddCheckboxField')}" styleClass="buttonDelegate"
														icon="fa fa-plus"
														actionListener="#{data.createManyCheckboxTab.addOption()}"
														update="form:createTabs:ManyCheckboxOptions"
														process="form:createTabs:ManyCheckboxOptions" />
												</f:facet>
											</p:dataTable>
										</p:column>

									</p:row>

									<p:row>
										<p:column colspan="3" styleClass="no-border">
										</p:column>
									</p:row>

									<p:row styleClass="create-input-field-panel-grid-action-row">

										<p:column colspan="4" styleClass="create-input-field-panel-grid-action-btn">
											<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CreateField')}" 
												actionListener="#{logic.createManyCheckbox}" styleClass="buttonDelegate"
												icon="fa fa-arrow-down"
												update="form:availableFormelements form:createTabs form:createTabs:ManyCheckboxOptions"
												process="form:createTabs:createManyCheckboxTab form:createTabs:ManyCheckboxOptions" />

										</p:column>
									</p:row>

								</p:panelGrid>


							</p:tab>

							<p:tab title="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputOptions')}" id="createOneRadioTab">

								<p:messages id="messagesOneRadioName" showDetail="false"
									autoUpdate="true" closable="true" for="OneRadioName" />
								<p:messages id="messagesOneRadioLabel" showDetail="false"
									autoUpdate="true" closable="true" for="OneRadioLabel" />
									
								<f:facet name="title">
					               	<h:outputText styleClass="form-definition-item-icon" value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputOptions')}"/>
					             	<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/OneRadio" width="70" styleClass="form-definition-item-icon"/>
					            </f:facet>

								<p:panelGrid id="createOneRadioGrid" styleClass="createOneRadioGridTable Wid100">
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="create-input-field-panel-grid-column">
											<p:panelGrid styleClass="no-border">
												<p:row styleClass="create-input-field-panel-grid-row">
													<p:column styleClass="form-element-name">
														<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')}:" for="OneRadioName" />
			
													</p:column>
													<p:column styleClass="form-element-label">
														<p:inputText id="OneRadioName" required="true" type="text" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
															value="#{data.createOneRadioTab.name}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
			
													</p:column>
												</p:row>
												<p:row styleClass="create-input-field-panel-grid-row">
													<p:column styleClass="no-border">
														<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}:" for="OneRadioLabel" />
													</p:column>
													<p:column styleClass="no-border">
														<p:inputText id="OneRadioLabel" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}  #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
															value="#{data.createOneRadioTab.label}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
													</p:column>
												</p:row>
											</p:panelGrid>
										</p:column>

										<p:column styleClass="form-definition-option-box-fields">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/OptionboxFields')}:" />

										</p:column>
										<p:column styleClass="form-definition-option-container">

											<p:dataTable id="OneRadioOptions" var="option"
												value="#{data.createOneRadioTab.options}"
												emptyMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NoOptionboxFieldsYet')}"
												styleClass="hide-column-names no-border NoPadding">

												<p:column>

													<p:inputText value="#{option.value}" styleClass="Wid70" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NoOptionboxFieldsYet')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
														placeholder="Option" required="true" maxlength="#{ivy.cms.co('/Dialogs/general/maxOptionsLength')}"/>

													<p:spacer width="14" height="16" />
													<p:commandButton icon="fa fa-trash-o" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
														actionListener="#{data.createOneRadioTab.deleteOption(option)}"
														process="form:createTabs:OneRadioOptions"
														update="form:createTabs:OneRadioOptions"
														immediate="true">

													</p:commandButton>

												</p:column>
												<f:facet name="footer">
													<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/AddOptionboxField')}" styleClass="buttonDelegate"
														icon="fa fa-plus"
														actionListener="#{data.createOneRadioTab.addOption()}"
														update="form:createTabs:OneRadioOptions"
														process="form:createTabs:OneRadioOptions" />
												</f:facet>
											</p:dataTable>
										</p:column>
									</p:row>

									<p:row>
										<p:column colspan="3" styleClass="no-border">
										</p:column>

									</p:row>
									<p:row styleClass="create-input-field-panel-grid-action-row">

										<p:column colspan="4" styleClass="create-input-field-panel-grid-action-btn">
											<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CreateField')}"
												actionListener="#{logic.createOneRadio}" styleClass="buttonDelegate"
												icon="fa fa-arrow-down"
												update="form:availableFormelements form:createTabs"
												process="form:createTabs:createOneRadioTab" />

										</p:column>
									</p:row>

								</p:panelGrid>



							</p:tab>

							<p:tab title="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputFileUpload')}" id="createFileUploadTab">
								<p:messages id="messagesFileUploadName" showDetail="false"
									autoUpdate="true" closable="true" for="FileUploadName" />
								<p:messages id="messagesFileUploadLabel" showDetail="false"
									autoUpdate="true" closable="true" for="FileUploadLabel" />
									
								<f:facet name="title">
					               	<h:outputText styleClass="form-definition-item-icon" value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/InputFileUpload')}"/>
					             	<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/FileUpload" width="70" styleClass="form-definition-item-icon"/>
					            </f:facet>

								<p:panelGrid id="createFileUploadPanelGrid" styleClass="createFileUploadPanelGrid Wid100">
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="form-element-name">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')}:"
												for="FileUploadName" />
										</p:column>
										<p:column styleClass="form-element-label">
											<p:inputText id="FileUploadName" required="true" type="text" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementName')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
												value="#{data.createFileUploadTab.name}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
										</p:column>
										<p:column styleClass="form-element-attribute">

											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/AllowedFiletypes')}:"
												for="FileFormats" />
										</p:column>

										<p:column styleClass="form-element-attribute" rowspan="3">
											<p:selectManyCheckbox id="FileFormats"
												value="#{data.createFileUploadTab.optionsStr}"
												layout="pageDirection" disabled="true">
												<f:selectItems value="#{data.createFileUploadTab.options}"
													var="format" itemLabel="#{format.value}"
													itemValue="#{format.value}" />
											</p:selectManyCheckbox>
										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="no-border">

											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')}:" for="FileUploadLabel" />
										</p:column>
										<p:column styleClass="no-border">
											<p:inputText id="FileUploadLabel" required="true" requiredMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ElementLabel')} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
												value="#{data.createFileUploadTab.label}" styleClass="form-element-label-input" maxlength="#{ivy.cms.co('/Dialogs/general/MaxLabelLenght')}"/>
										</p:column>
										<p:column styleClass="no-border">

										</p:column>
									</p:row>
									<p:row styleClass="create-input-field-panel-grid-row">
										<p:column styleClass="no-border">
											<p:outputLabel value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NumberOfFiles')}" for="FileUploadNoRows" />
										</p:column>
										<p:column styleClass="no-border">
											<p:spinner id="FileUploadNoRows"
												value="#{data.createFileUploadTab.intSetting}" min="0"
												max="10" />

										</p:column>
										<p:column styleClass="no-border">


										</p:column>

									</p:row>
									<p:row styleClass="create-input-field-panel-grid-action-row">
										<p:column colspan="4" styleClass="create-input-field-panel-grid-action-btn">

											<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/CreateField')}"
												actionListener="#{logic.createFileUpload}" styleClass="buttonDelegate"
												icon="fa fa-arrow-down"
												update="form:availableFormelements form:createTabs"
												process="form:createTabs:createFileUploadTab" />
										</p:column>
									</p:row>
								</p:panelGrid>

							</p:tab>

						</p:tabView>
					</p:fieldset>
				</div>

				<br />



				<!-- DragAndDropPanels -->
				<p:fieldset id="availableFormelementsField" toggleable="true"
					legend="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/FieldSetAvailableFormelements')}">
					<p:messages id="DnDmessage" showDetail="false" autoUpdate="true"
						closable="true" for="availableFormelements" />
					<p:dataGrid id="availableFormelements" var="formelement"
						styleClass="no-border"
						emptyMessage="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/NoFormelementsAvailable')}"
						value="#{data.dragAndDropController.availableFormelements}"
						columns="3">
						<p:panel id="pnl"
							styleClass="TexAlCenter vertical-align-middle">
							<p:panelGrid styleClass="no-border TexAlLeft">
								<p:row>
									<p:column styleClass="no-border">
										<p:graphicImage library="ivy-cms"
											name="/Layouts/Icons/#{formelement.type}" width="100" />
									</p:column>
									<p:column styleClass="no-border">
										<p:outputLabel value="#{formelement.name}"
											styleClass="Fs18" />

									</p:column>
									<p:column styleClass="create-input-field-panel-grid-action-btn">
										<p:commandButton icon="fa fa-trash fa-3x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
											actionListener="#{data.dragAndDropController.deleteFormelement(formelement)}"
											process="form:availableFormelements"
											update="form:availableFormelements">
										</p:commandButton>

									</p:column>
								</p:row>
							</p:panelGrid>

						</p:panel>

						<p:draggable for="pnl" revert="true" stack=".ui-panel" />

					</p:dataGrid>
				</p:fieldset>

				<p:outputPanel styleClass="u-text-align-center">
					<br />
					<h:panelGroup id="dragDropIcon" styleClass="u-cursor-pointer">
						<i class="fa fa-hand-o-up fa-2x"></i>
						<i class="fa fa-arrow-circle-o-down fa-2x"></i>

					</h:panelGroup>

					<p:tooltip id="dragDropIconTooltip" for="dragDropIcon"
						value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/DragAndDropTooltip')}"
						trackMouse="true" />
				</p:outputPanel>

				<p:fieldset id="selectedFormelementsField" toggleable="true"
					legend="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/FieldSetFormelementsPlacing')}">

					<p:panelGrid styleClass="Wid100 form-definition-border-color">
						<p:row id="selectedFormelementsHeaderFieldSet"
							styleClass="TexAlCenter form-definition-border-color">
							<p:column colspan="2">

								<p:outputPanel id="selectedFormelementsHeaderPanel">
									<p:outputPanel
										rendered="#{empty data.dragAndDropController.selectedFormelementsHeader}">
										<br />
										<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/BroadHeaderArea')}"
											styleClass="Fs24" />
										<br />
										<br />
									</p:outputPanel>
									<h:outputText value="#{ivy.cms.co('/Dialogs/FormDef/SecDefDialog/BreiterHeader')}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsHeader}" />

									<p:dataGrid id="selectedFormelementsHeader" var="formelement" styleClass="no-border"
										value="#{data.dragAndDropController.selectedFormelementsHeader}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsHeader}"
										columns="1">

										<p:panel id="pnl">
											<p:panelGrid styleClass="no-border">
												<p:row >
													<p:column styleClass="no-border">
														<p:graphicImage library="ivy-cms"
															name="/Layouts/Icons/#{formelement.type}" width="80" />
													</p:column>
													<p:column styleClass="no-border">
														<p:outputLabel value="#{formelement.name}"
															styleClass="Fs18" />

													</p:column>
													<p:column styleClass="create-input-field-panel-grid-action-btn">
														<p:commandButton icon="fa fa-trash fa-3x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
															actionListener="#{data.dragAndDropController.resetFormelementHeader(formelement)}"
															process="form:selectedFormelementsHeader"
															update="form">

														</p:commandButton>

													</p:column>
												</p:row>
											</p:panelGrid>

										</p:panel>

									</p:dataGrid>

									<p:droppable for="selectedFormelementsHeaderFieldSet"
										tolerance="pointer" activeStyleClass="ui-state-highlight"
										datasource="form:availableFormelements" onDrop="handleDrop">

										<p:ajax
											listener="#{data.dragAndDropController.onFieldDropHeader}"
											update="form:selectedFormelementsHeaderPanel form:availableFormelements form:dynaFormFieldSet" />
									</p:droppable>


								</p:outputPanel>
							</p:column>
						</p:row>
						<p:row styleClass="TexAlCenter form-definition-border-color">
							<p:column colspan="1" id="selectedFormelementsLeftPanelFieldSet"
								styleClass="Wid50 TexAlCenter form-definition-border-color">

								<p:outputPanel id="selectedFormelementsLeftPanelPanel">

									<p:outputPanel
										rendered="#{empty data.dragAndDropController.selectedFormelementsLeftPanel}">
										<br />
										<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/LeftColumn')}" styleClass="Fs24" />
										<br />
										<br />
									</p:outputPanel>
									<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/LeftColumn')}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsLeftPanel}" />

									<p:dataGrid id="selectedFormelementsLeftPanel"
										var="formelement" styleClass="no-border" columns="1"
										value="#{data.dragAndDropController.selectedFormelementsLeftPanel}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsLeftPanel}">

										<p:panel id="pnl" styleClass="TexAlCenter vertical-align-middle">
											<p:panelGrid styleClass="no-border TexAlLeft">
												<p:row>
													<p:column styleClass="no-border">
														<p:graphicImage library="ivy-cms"
															name="/Layouts/Icons/#{formelement.type}" width="80" />
													</p:column>
													<p:column styleClass="no-border">
														<p:outputLabel value="#{formelement.name}"
															styleClass="Fs18" />

													</p:column>
													<p:column styleClass="create-input-field-panel-grid-action-btn">
														<p:commandButton icon="fa fa-trash fa-3x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
															actionListener="#{data.dragAndDropController.resetFormelementLeftPanel(formelement)}"
															process="form:selectedFormelementsLeftPanel" update="form">

														</p:commandButton>

													</p:column>
												</p:row>
											</p:panelGrid>

										</p:panel>


									</p:dataGrid>

									<p:droppable for="selectedFormelementsLeftPanelFieldSet"
										tolerance="pointer" activeStyleClass="ui-state-highlight"
										datasource="form:availableFormelements" onDrop="handleDrop">

										<p:ajax
											listener="#{data.dragAndDropController.onFieldDropLeftPanel}"
											update="form:selectedFormelementsLeftPanelPanel form:availableFormelements form:dynaFormFieldSet" />
									</p:droppable>


								</p:outputPanel>
							</p:column>

							<p:column colspan="1" id="selectedFormelementsRightPanelFieldSet"
								styleClass="TexAlCenter Wid50">
								<p:outputPanel id="selectedFormelementsRightPanelPanel">

									<p:outputPanel
										rendered="#{empty data.dragAndDropController.selectedFormelementsRightPanel}">
										<br />
										<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/RightColumn')}" styleClass="Fs24" />
										<br />
										<br />
									</p:outputPanel>
									<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/RightColumn')}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsRightPanel}" />


									<p:dataGrid id="selectedFormelementsRightPanel"
										var="formelement" styleClass="no-border TexAlCenter" columns="1"
										value="#{data.dragAndDropController.selectedFormelementsRightPanel}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsRightPanel}">

										<p:panel id="pnl" styleClass="TexAlCenter vertical-align-middle">
											<p:panelGrid styleClass="no-border TexAlLeft">
												<p:row>
													<p:column styleClass="no-border">
														<p:graphicImage library="ivy-cms"
															name="/Layouts/Icons/#{formelement.type}" width="80" />
													</p:column>
													<p:column styleClass="no-border">
														<p:outputLabel value="#{formelement.name}"
															styleClass="Fs18" />

													</p:column>
													<p:column styleClass="create-input-field-panel-grid-action-btn">
														<p:commandButton icon="fa fa-trash fa-3x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
															actionListener="#{data.dragAndDropController.resetFormelementRightPanel(formelement)}"
															process="form:selectedFormelementsRightPanel" update="form">

														</p:commandButton>

													</p:column>
												</p:row>
											</p:panelGrid>

										</p:panel>

									</p:dataGrid>

									<p:droppable for="selectedFormelementsRightPanelFieldSet"
										tolerance="pointer" activeStyleClass="ui-state-highlight"
										datasource="form:availableFormelements" onDrop="handleDrop">

										<p:ajax
											listener="#{data.dragAndDropController.onFieldDropRightPanel}"
											update="form:selectedFormelementsRightPanelPanel form:availableFormelements form:dynaFormFieldSet" />
									</p:droppable>
								</p:outputPanel>
							</p:column>
						</p:row>



						<p:row id="selectedFormelementsFooterFieldSet" styleClass="TexAlCenter form-definition-border-color">
							<p:column colspan="2">
								<p:outputPanel id="selectedFormelementsFooterPanel">

									<p:outputPanel
										rendered="#{empty data.dragAndDropController.selectedFormelementsFooter}">
										<br />
										<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/BroadFooterArea')}"
											styleClass="Fs24" />
										<br />
										<br />
									</p:outputPanel>
									<h:outputText value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/BroadFooterArea')}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsFooter}" />



									<p:dataGrid id="selectedFormelementsFooter" var="formelement"
										value="#{data.dragAndDropController.selectedFormelementsFooter}"
										rendered="#{not empty data.dragAndDropController.selectedFormelementsFooter}"
										styleClass="no-border TexAlCenter" columns="1">

										<p:panel id="pnl" styleClass="TexAlCenter vertical-align-middle">
											<p:panelGrid styleClass="no-border TexAlLeft">
												<p:row>
													<p:column styleClass="no-border">
														<p:graphicImage library="ivy-cms"
															name="/Layouts/Icons/#{formelement.type}" width="80" />
													</p:column>
													<p:column styleClass="no-border">
														<p:outputLabel value="#{formelement.name}"
															styleClass="Fs18" />

													</p:column>
													<p:column styleClass="create-input-field-panel-grid-action-btn">
														<p:commandButton icon="fa fa-trash fa-3x" title="" styleClass="buttonDelegate placement-form-element-remove-btn"
															actionListener="#{data.dragAndDropController.resetFormelementFooter(formelement)}"
															process="form:selectedFormelementsFooter" update="form">

														</p:commandButton>

													</p:column>
												</p:row>
											</p:panelGrid>

										</p:panel>

									</p:dataGrid>

									<p:droppable for="selectedFormelementsFooterFieldSet"
										tolerance="pointer" activeStyleClass="ui-state-highlight"
										datasource="form:availableFormelements" onDrop="handleDrop">

										<p:ajax
											listener="#{data.dragAndDropController.onFieldDropFooter}"
											update="form:selectedFormelementsFooterPanel form:availableFormelements form:dynaFormFieldSet" />
									</p:droppable>

								</p:outputPanel>
							</p:column>
						</p:row>
					</p:panelGrid>

				</p:fieldset>


				<!-- DynaForm Preview -->
				<br />

				<p:fieldset id="dynaFormFieldSet" toggleable="true"
				legend="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/FieldSetPreviewArea')}" styleClass="dynaFormFieldSet">

					<pe:dynaForm id="dynaForm" value="#{data.dynaFormController.model}"
						var="dynaData" columnClasses="label-container, field-container"
						styleClass="Wid100">

						<pe:dynaFormControl type="InputFieldText" for="inputFieldText"  >
							<p:inputText id="inputFieldText" value="#{dynaData.value}" 
								required="#{dynaData.required}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
								styleClass="Wid90"/>
								
						</pe:dynaFormControl>

						<pe:dynaFormControl type="InputFieldNumber" for="inputFieldNumber">
							<p:spinner id="inputFieldNumber" value="#{dynaData.value}"
								required="#{dynaData.required}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}" min="0" />
						</pe:dynaFormControl>

						<pe:dynaFormControl type="InputFieldDate" for="inputFieldDate"
							styleClass="calendar">
							<p:calendar
								locale="#{localeBean.locale}" pattern="#{dateTimePatternBean.datePattern}" 
								id="inputFieldDate" value="#{dynaData.value}" styleClass="form-definition-calendar"
								required="#{dynaData.required}" showOn="button" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"/>
						</pe:dynaFormControl>

						<pe:dynaFormControl type="InputTextArea" for="inputTextArea">
							<p:inputTextarea id="inputTextArea" value="#{dynaData.value}"
								required="#{dynaData.required}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
								rows="#{dynaData.intSetting}" autoResize="false" />
						</pe:dynaFormControl>

						<pe:dynaFormControl type="ManyCheckbox" for="manyCheckbox">
							<p:selectManyCheckbox id="manyCheckbox" value="#{dynaData.value}"
								required="#{dynaData.required}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}" layout="pageDirection">
								<f:selectItems value="#{dynaData.optionsStr}" />
							</p:selectManyCheckbox>
						</pe:dynaFormControl>

						<pe:dynaFormControl type="OneRadio" for="oneRadio">
							<p:selectOneRadio id="oneRadio" value="#{dynaData.value}"
								required="#{dynaData.required}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"
								layout="pageDirection">
								<f:selectItems value="#{dynaData.optionsStr}" />
							</p:selectOneRadio>
						</pe:dynaFormControl>


						<pe:dynaFormControl type="FileUpload" for="fileUpload">
								<ic:component.CaseDocument uploadPossible="false"
								fileLimit="#{dynaData.intSetting}"
								startMethod="start(#{dynaData.options})"
								allowFiletypes="#{dynaData.options}" requiredMessage="#{dynaData.label} #{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/requiredFieldMessage')}"/>

						</pe:dynaFormControl>

						<pe:dynaFormControl type="Spacer" for="spacer">
							<p:spacer width="50" height="16" id="spacer" />
						</pe:dynaFormControl>



					</pe:dynaForm>



				</p:fieldset>
				<br/>
				<p:outputPanel styleClass="TexAlRight">
					<p:commandButton value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/back')}" icon="fa fa-arrow-left"
						update="form:selectedFormelementsField" styleClass="buttonDelegate floatLeft" process="form:selectedFormelementsField" actionListener="#{logic.back}"/>
					<p:spacer width="5"></p:spacer>

					<p:commandButton value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/SaveWorkflow')}" icon="fa fa-save" id="save-workflow-button"
						styleClass="buttonDelegate" update="form:selectedFormelementsField" process="form:selectedFormelementsField" actionListener="#{logic.close}"/>
					<p:spacer width="5" rendered="#{data.data.processType eq 'AHWF'}"></p:spacer>

					<p:commandButton rendered="#{data.data.processType eq 'AHWF'}" icon="fa fa-check" styleClass="buttonDelegate"
						value="#{ivy.cms.co('/Dialogs/workflowCreation/FormDefinition/ExecuteWorkflow')}" id="execute-workflow-directly-button"
						update="form:selectedFormelementsField" process="form:selectedFormelementsField" actionListener="#{logic.directExecution}"/>
					<p:spacer width="5"></p:spacer>

					<p:commandButton value="#{ivy.cms.co('/ch.ivy.addon.portalkit.ui.jsf/common/cancel')}" icon="fa fa-times"
						actionListener="#{logic.cancel}" styleClass="buttonDelegate portal-cancel-button" update="form:selectedFormelementsField" process="form:selectedFormelementsField"/>

				</p:outputPanel>
				
				<script type="text/javascript">
					function handleDrop(event, ui) {
						var droppedFormelement = ui.draggable;
						droppedFormelement.fadeOut('fast');
					}
				</script>



			</h:form>

		</ui:define>

    <ui:define name="css">
      <h:outputStylesheet library="css" name="portal_express.css" />
    </ui:define>
  </ui:composition>
</h:body>
</html>