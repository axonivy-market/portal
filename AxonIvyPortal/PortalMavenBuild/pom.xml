<?xml version="1.0" encoding="UTF-8"?>
<project
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<groupId>ch.ivyteam.ivy.project.portal</groupId>
	<artifactId>portalMavenBuild</artifactId>
	<version>7.0.144.0</version>
	<packaging>pom</packaging>
	<distributionManagement>
		<repository>
			<id>axonivy-releases-repo</id>
			<url>https://repo.axonivy.io/artifactory/ext-release-local/</url>
		</repository>
		<snapshotRepository>
			<id>axonivy-snapshots-repo</id>
			<url>https://repo.axonivy.io/artifactory/ext-snapshot-local/</url>
		</snapshotRepository>
	</distributionManagement>

	<properties>
		<svn.revision.number>${SVN_REVISION}</svn.revision.number>
		<powermock.version>1.6.6</powermock.version>
		<ivy.engine.version>7.0.0</ivy.engine.version>
	</properties>

	<dependencies>
		<dependency>
			<!-- required: test framework used by the maven-surefire-plugin to run 
				tests -->
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>4.8.2</version>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.powermock</groupId>
			<artifactId>powermock-module-junit4</artifactId>
			<version>${powermock.version}</version>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.powermock</groupId>
			<artifactId>powermock-api-mockito2</artifactId>
			<version>${powermock.version}</version>
			<scope>test</scope>
		</dependency>
	</dependencies>
	<pluginRepositories>
		<!-- Snapshot releases are not deployed to maven central. So the repo on 
			sonatype could be used instead -->
		<pluginRepository>
			<id>sonatype</id>
			<url>https://oss.sonatype.org/content/repositories/snapshots</url>
			<snapshots>
				<updatePolicy>always</updatePolicy>
			</snapshots>
		</pluginRepository>
	</pluginRepositories>

	<build>
		<sourceDirectory>${basedir}/src/</sourceDirectory>
		<directory>${basedir}/target</directory>
		<outputDirectory>${basedir}/classes</outputDirectory>
		<testSourceDirectory>${basedir}/src_test/</testSourceDirectory>
		<testOutputDirectory>${basedir}/classes/</testOutputDirectory>

		<plugins>
			<plugin>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>1.4</version>
				<executions>
					<execution>
						<phase>process-resources</phase>
						<configuration>
							<tasks>
								<delete>
									<fileset dir="${basedir}">
										<include name="svn-revision-*.txt" />
									</fileset>
								</delete>
								<touch file="${basedir}/svn-revision-${svn.revision.number}.txt" />
							</tasks>
						</configuration>
						<goals>
							<goal>run</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>com.axonivy.ivy.ci</groupId>
				<artifactId>project-build-plugin</artifactId>
				<version>6.7.2-SNAPSHOT</version>
				<extensions>true</extensions>
				<configuration>					
					<engineDirectory>${settings.localRepository}/.cache/ivy/${ivy.engine.version}</engineDirectory>										
					<encoding>UTF-8</encoding>
				</configuration>
			</plugin>
		</plugins>
	</build>
</project>