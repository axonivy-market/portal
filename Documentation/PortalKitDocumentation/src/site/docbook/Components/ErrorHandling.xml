<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="axonivyportal.components.errorhandling">
	<title>Error handling</title>
	<para>
		In this section, we introduce 2 kinds of errors, when and how to handle them in Portal.
		<itemizedlist>
			<listitem>
				<para>
					Ajax error : this kind of errors occur during a JSF ajax requests, for example when the user clicks on the show full mode button to tell the task widget switches to full mode, without handling the end user would not get any form of feedback if the action was successfully performed or not.
				</para>
			</listitem>
			<listitem>
				<para>
					Non-ajax error : this kind of errors occur when user access to Portal from a url which could not be handled successfully by server side, or being navigated by a corrupted url. For example, when the user clicks on a link to start a task which does not exist.
				</para>
			</listitem>
		</itemizedlist>
	</para>
	<sect2 xml:id="axonivyportal.components.errorhandling.ajaxerrorhandling">
		<title>Ajax error handling</title>
		<sect3 xml:id="axonivyportal.components.errorhandling.ajaxerrorhandling.introduction">
			<title>Introduction</title>
			<para>
				By default, Portal handles all exceptions from ajax requests.
			</para>
			<para>
				When an exception occurs, Portal will show an error notification with the exception type and message to end user. The exception details is available when user click on show details button.
			</para>
			<para>
				Stacktrace on error messages can be showed/hid depend on ivy system property <code>Errors.ShowDetailsToEndUser</code>.
			</para>
			<note>
				This feature is only available if using the portal default template: <code>BasicTemplate</code> or its extension.
			</note>
		</sect3>
		<sect3 xml:id="axonivyportal.components.errorhandling.ajaxerrorhandling.result">
			<title>Result</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/ErrorHandling/portalAjaxErrorHandler.png" />
				</imageobject>
			</mediaobject>
		</sect3>
	</sect2>
	<sect2 xml:id="axonivyportal.components.errorhandling.nonajaxerrorhandling">
		<title>Non-ajax error handling</title>
		<sect3 xml:id="axonivyportal.components.errorhandling.nonajaxerrorhandling.introduction">
			<title>Introduction</title>
			<para>
				By default, when the server has any error such as : <code>HTTP 404</code>, <code>HTTP 500</code>, or exception while page's loading, AxonIvyEngine will show an default error page. E.g.:
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/ErrorHandling/defaultIvyError.png" />
					</imageobject>
				</mediaobject>
			</para>
			<para>
				You can find content of this page is the file located on <code>${AxonIvyEngineFolder}/webapp/ivy/ivy-error-page.xhtml</code>, but the error page is not user friendly, too much technical information that normal user may not understand. Thus, Axon Ivy Portal provides an alternative solution to make this page nicer. 
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.components.errorhandling.nonajaxerrorhandling.howtoconfigure">
			<title>How to configure</title>
			<para>
				Download the zip file below to configure on your own engine (or designer).
			</para>
			<important>
				Read README.txt
			</important>
			<para>
				<link xlink:href="documents/ErrorHandling/PortalErrorPageConfiguration.zip">PortalErrorPageConfiguration.zip</link>
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.components.errorhandling.nonajaxerrorhandling.result">
			<title>Result</title>
			<para>
				HTTP 404 Page Not Found
				<para>
					Example testing URL: 404
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/ErrorHandling/404.png" />
						</imageobject>
					</mediaobject>
				</para>
			</para>
			<para>
				HTTP 500 Error
				<para>
					Example testing URL: 500
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/ErrorHandling/500.png" />
						</imageobject>
					</mediaobject>
				</para>
			</para>
		</sect3>
	</sect2>
</sect1>