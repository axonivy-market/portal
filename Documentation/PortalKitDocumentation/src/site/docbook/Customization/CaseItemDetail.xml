<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="axonivyportal.customization.caseitemdetails">
	<title>Case item details</title>
	<para>CaseItemDetails is a built-in component of Portal which contains the case info which users can interact with.
		In order to show needed case's information, Portal supports overriding concept for
		CaseItemDetails.
	</para>
	<para>Each CaseItemDetails contains
		<itemizedlist>
			<listitem>
				<para>CaseItemDetailsHeader</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsRelated</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsNotes</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsDocuments</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsAdditional</para>
			</listitem>
			<listitem>
				<para>CaseCustomPanel</para>
			</listitem>
		</itemizedlist>
	</para>
	<mediaobject>
		<imageobject>
			<imagedata fileref="images/CaseItemDetails/CaseStandard.png" />
		</imageobject>
	</mediaobject>
	<important>
		<para>Case General and description box cannot be modified (they stay where they are)</para>
	</important>
	<sect2 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui">
		<title>How to override Case item details UI</title>
		<para>
			Refer to <code>PortalExamples</code> project for examples
		</para>
		<para>
			<orderedlist>
				<listitem>
					<para>
						Introduce an Axon.ivy project which has <code>PortalTemplate</code> as a required library.
					</para>
				</listitem>
				<listitem>
					<para>
						To customize case item detail, you must customize Portal Home first. Refer to <link linkend="axonivyportal.customization.portalhome">Customize Portal home</link> to set new home page.
					</para>
				</listitem>
				<listitem>
					<para>
						Copy the <code>PortalStart</code> process from <code>PortalTemplate</code> to your project. Point PortalHome element to your custom home page in previous step. This process is new home page and administrator should register this link by Portal's Admin Settings.
					</para>
				</listitem>
				<listitem>
					<para>
						Override Case item details:
						<itemizedlist>
							<listitem>
								<para>
									Introduce a new HTMLDialog which uses template <code>/layouts/PortalCaseDetailsTemplate.xhtml</code>. You can take a look at <code>PortalCaseDetails.xhtml</code> to see how to customize it.
									<tip>
										<para>
											Highly recommend to copy the <code>PortalCaseDetails</code> HTMLDialog in PortalTemplate. Remove <code>ui:remove</code> and change the copied one's view.
										</para>
									</tip>
								</para>
							</listitem>
							<listitem>
								Use Axon.ivy Override to override the <code>OpenPortalCaseDetails</code> callable. The original implementation of this callable is calling <code>PortalCaseDetails</code>, change it to call the customized Page introduced in the step above. The signature of this callable is
								<code>call(ICase)</code> and customized page must receive this <code>ICase</code> instance, put in the dialog's <code>Data</code> with the exact name <code>caseData</code>.
							</listitem>
						</itemizedlist>
					</para>
				</listitem>
				<listitem>
					<para>After previous steps, you can override Case item details UI elements by show/hidden element by keywords:</para>
					<para><link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.showhiddenui"><code>showItemDetailsHeader</code>, <code>showItemDetailRelated</code>, <code>showItemDetailsNotes</code>, <code>showItemDetailDocuments</code>, <code>showItemDetailAdditional</code>, <code>showCustomPanel</code></link>
						and override UI for <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.additional">caseItemDetailsAddition</link>
						and <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.custombody">caseItemDetailsCustomBody</link>
					</para>
				</listitem>
			</orderedlist>
			<sect3 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.showhiddenui">
				<title>Show/Hidden components by Keywords</title>
				<para>Refer to the <code>ui:param</code> list in <code>PortalCaseDetails.xhtml</code> of PortalTemplate. 
					In case, we want to show/hidden any elements on CaseItemDetails, we should override value of <code>ui:param</code>
					<para>List valid parameters:
						<itemizedlist>
							<listitem>
								<para><code>ui:param name="showItemDetailsHeader" value="true"</code></para>
								<para>To show/hidden Case header, by default it's true. You should set as false in case we set alwaysShowDetails for CaseItem.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailsNotes" value="true"></code></para>
								<para>To show/hidden Case Notes component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailDocuments" value="true"</code></para>
								<para>To show/hidden Case Documents component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailRelated" value="true"</code></para>
								<para>To show/hidden Case Related Tasks/Cases component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailAdditional" value="true"</code></para>
								<para>To show/hidden Case Additional component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="overrideAdditionCase" value="false"</code></para>
								<para>To override Case Additional box, by default it's false and using AdditionalCase component. Refer to <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.additional">Override Additional</link> for more details.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showCustomPanel" value="false"</code></para>
								<para>To show/hidden Custom panel, by default it's false.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="customPanelTitleHeader" value="String"</code></para>
								<para>To show your customized title in header section of the custom box.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="overrideCustomBody" value="true"</code></para>
								<para>To override Custom panel content, by default it's false, once this param is turned true, please turn true for <code>showCustomPanel</code> as well. Refer to <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.custombody">Override Custom panel</link>.</para>
							</listitem>
						</itemizedlist>
					</para>
				</para>
			</sect3>
			<sect3 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.additional">
				<title>Override Additional</title>
				<para>
					Refer to the <code>caseItemDetailsAddition</code> section in <code>PortalCaseDetails.xhtml</code> of PortalTemplate.
				</para>
				<para>Focus on 3 parameters
					<orderedlist>
						<listitem>
							<para><code>showItemDetailAdditional</code> needed turn <code>true</code></para>
						</listitem>
						<listitem>
							<para><code>overrideAdditionCase</code> needed turn <code>true</code></para>
						</listitem>
						<listitem>
							<para><code>additionalStyleClass</code> allow developer provides list of style class for Additional box</para>
						</listitem>
					</orderedlist>
				</para>
				<para>Below is example code for override additional box of case details</para>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/CaseItemDetails/AdditionalExampleCode.png" />
					</imageobject>
				</mediaobject>
				<para>After add above code into your custom page, the additional box will be display as below</para>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/CaseItemDetails/AdditionalCustomized.png" />
					</imageobject>
				</mediaobject>
			</sect3>
			<sect3 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.custombody">
				<title xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.custombody.title">Override Custom panel</title>
				<para>Refer to the <code>caseItemDetailsCustomBody</code> section in <code>PortalCaseDetails.xhtml</code> of PortalTemplate.</para>
				<para>Focus on 4 parameters
					<orderedlist>
						<listitem>
							<para><code>showCustomPanel</code> needed turn <code>true</code></para>
						</listitem>
						<listitem>
							<para><code>overrideCustomBody</code> needed turn <code>true</code></para>
						</listitem>
						<listitem>
							<para><code>customPanelTitleHeader</code> allow developer can provide a title header as string to top of Custom box</para>
						</listitem>
						<listitem>
							<para><code>customPanelStyleClass</code> allow developer can provide list of style class for Custom box</para>
						</listitem>
					</orderedlist>
				</para>
				<para>Below is example code for override custom panel box of case details</para>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/CaseItemDetails/CustomPanelExampleCode.png" />
					</imageobject>
				</mediaobject>
				<para>After applied above code to your custom page, the custom panel will display as below</para>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/CaseItemDetails/CustomPanelOverride.png" />
					</imageobject>
				</mediaobject>
				<para>Finally, we have a custom Case details page</para>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/CaseItemDetails/CaseCustomized.png" />
					</imageobject>
				</mediaobject>
			</sect3>
		</para>
	</sect2>
</sect1>
