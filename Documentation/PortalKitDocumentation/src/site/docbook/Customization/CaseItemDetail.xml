<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="axonivyportal.customization.caseitemdetails">
	<title xml:id="axonivyportal.customization.caseitemdetails.title">Case item details</title>
	<para>CaseItemDetails is a built-in component of Portal which contains the case info which users can interact with.
		In order to show needed case's information, Portal supports overriding concept for
		CaseItemDetails.
	</para>
	<para>Each CaseItemDetails contains
		<itemizedlist>
			<listitem>
				<para>CaseItemDetailsHeader</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsRelated</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsHistories</para>
			</listitem>
			<listitem>
				<para>CaseItemDetailsDocuments</para>
			</listitem>
			<listitem>
				<para>CaseItemDetail custom panel: caseItemDetailCustomTop, caseItemDetailCustomMiddle, caseItemDetailCustomBottom</para>
			</listitem>
		</itemizedlist>
	</para>
	<mediaobject>
		<imageobject>
			<imagedata fileref="images/CaseItemDetails/CaseStandard.png" />
		</imageobject>
	</mediaobject>
	<important>
		<para>"Data and Description" panel always displays, we cannot override its content or hide/show this panel.</para>
	</important>
	<sect2 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui">
		<title>How to custom Case item details UI</title>
		<para>
			Refer to <code>PortalExamples</code> project for examples.
		</para>
		<para>
			<orderedlist>
				<listitem>
					<para>
						Introduce an Axon.ivy project which has <code>PortalTemplate</code> as a required library.
					</para>
				</listitem>
				<listitem>
					<para>
						To customize case item detail, you must customize Portal Home first. Refer to <link linkend="axonivyportal.customization.portalhome">Customize Portal home</link> to set new home page.
					</para>
				</listitem>
				<listitem>
					<para>
						Copy the <code>PortalStart</code> process from <code>PortalTemplate</code> to your project. Point PortalHome element to your custom home page in previous step. This process is new home page and administrator should register this link by Portal's Admin Settings.
					</para>
				</listitem>
				<listitem>
					<para>
						Custom the Case item details:
						<itemizedlist>
							<listitem>
								<para>
									Introduce a new HTMLDialog which uses template <code>/layouts/PortalCaseDetailsTemplate.xhtml</code>. You can take a look at <code>PortalCaseDetails.xhtml</code> to see how to customize it.
									<tip>
										<para>
											Highly recommend to copy the <code>PortalCaseDetails</code> HTMLDialog in PortalTemplate. Remove <code>ui:remove</code> and change the copied one's view.
										</para>
									</tip>
								</para>
							</listitem>
							<listitem>
								Use Axon.ivy Override to override the <code>OpenPortalCaseDetails</code> callable. The original implementation of this callable is calling <code>PortalCaseDetails</code>, change it to call the customized Page introduced in the step above. The signature of this callable is
								<code>call(ICase)</code> and customized page must receive this <code>ICase</code> instance, put in the dialog's <code>Data</code> with the exact name <code>caseData</code>.
							</listitem>
						</itemizedlist>
					</para>
				</listitem>
				<listitem>
					<para>After previous steps, you can override Case item details UI elements as shown/hidden element by keywords:</para>
					<para>To show/hide, please using <code>showItemDetailsHeader</code>, <code>showItemDetailRelated</code>, <code>showItemDetailsHistories</code>, <code>showItemDetailDocuments</code> code. For more details, please refer to <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.showhiddenui">Show/Hide components</link>.</para>
					<para>And to add a new elements, please refer to <link linkend="axonivyportal.customization.caseitemdetails.howtooverideui.custombody">Add new Custom panel</link> code</para>
				</listitem>
			</orderedlist>
			<sect3 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.showhiddenui">
				<title>Show/Hide components by keywords</title>
				<para>Refer to the <code>ui</code> tag list in <code>PortalCaseDetails.xhtml</code> of PortalTemplate.
					In case, we want to show/hide any elements on CaseItemDetails, we should override value of <code>ui:param</code>
					<para>List valid parameters:
						<itemizedlist>
							<listitem>
								<para><code>ui:param name="showItemDetailsHeader" value="true"</code></para>
								<para>To show/hide Case header, by default it's true. You should set as false in case we set alwaysShowDetails for CaseItem.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailsHistories" value="true"></code></para>
								<para>To show/hide Case Histories component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailDocuments" value="true"</code></para>
								<para>To show/hide Case Documents component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailRelated" value="true"</code></para>
								<para>To show/hide Case Related Tasks/Cases component, by default it's true.</para>
							</listitem>
						</itemizedlist>
					</para>
				</para>
			</sect3>
			<sect3 xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.custombody">
				<title xml:id="axonivyportal.customization.caseitemdetails.howtooverideui.custombody.title">Add new Custom panel</title>
				<para>Refer to the <code>caseItemDetailCustom*</code> section in <code>PortalCaseDetails.xhtml</code> of PortalTemplate.</para>
				<itemizedlist>
					<para>We have provided 3 placeholder sections for customization. Please follow up below step to do it.</para>
					<listitem>
						<para>We need to define <code>ui:define</code> with a valid name such as <code>caseItemDetailCustomTop</code>, <code>caseItemDetailCustomMiddle</code> and <code>caseItemDetailCustomBottom</code>.
							<para>The <code>caseItemDetailCustomTop</code>: will be shown on the top of the component</para>
							<para>The <code>caseItemDetailCustomMiddle</code>: will be shown on the middle of the component</para>
							<para>The <code>caseItemDetailCustomBottom</code>: will be shown on the bottom of the component</para>
						</para>
					</listitem>
					<listitem>
						<para>Add your custom code into tags above.</para>
					</listitem>
					<listitem>
						<para>Finally, your custom panel will be displayed inside of <link linkend="axonivyportal.customization.caseitemdetails">CaseItemDetails</link> page.</para>
					</listitem>
					<listitem>
						<para>Below is example code for override custom panel box of case details</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/CaseItemDetails/CustomPanelExampleCode.png" />
							</imageobject>
						</mediaobject>
					</listitem>
					<listitem>
						<para>After applied above code to your custom page, custom panels will be displayed as below</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/CaseItemDetails/CaseCustomized.png" />
							</imageobject>
						</mediaobject>
					</listitem>
					<listitem>
						<para>Other example, we have a full flexibility page if we use <code>ui-g-*</code> class to define the width of panel</para>
						<para>We used <code>ui-g-6</code> class to define width for 3 custom panels in the custom page below</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/CaseItemDetails/CaseCustomized-fit.png" />
							</imageobject>
						</mediaobject>
					</listitem>
				</itemizedlist>
			</sect3>
		</para>
	</sect2>
</sect1>
