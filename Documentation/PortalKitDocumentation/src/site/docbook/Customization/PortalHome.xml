<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="axonivyportal.customization.portalhome">
	<title xml:id="axonivyportal.customization.portalhome.title">Portal home</title>
	<sect2 xml:id="axonivyportal.customization.portalhome.beforebeginning">
		<title>Before beginning</title>
		<para>
			This guide assumes that you are already familiar with CSS to integrate your own widgets.
		</para>
	</sect2>
	<sect2 xml:id="axonivyportal.customization.portalhome.introduction">
		<title>Introduction</title>
		<para>
			The default home page of Portal has three built-in widgets in order: <code>Process widget</code>, <code>Task widget</code>, <code>Statistic widget</code>. If it does not fit your needs, you can replace it by your own one.
            We decided that based on screen size, widget may become hidden, not smaller. 
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/PortalHome/HomePageTemplate.png" />
				</imageobject>
			</mediaobject>
		</para>
	</sect2>
	<sect2 xml:id="axonivyportal.customization.portalhome.basicusage">
		<title>Basic usage</title>		
		<para>
			Following these steps to have your own Portal Home:
			<orderedlist>
				<listitem>
					<para>
					Create a new home page which uses the <code>DefaultHomePageTemplate.xhtml</code> template. By doing this, your new home page will inherit the widgets from the default home page and has a place holder for your own widgets.
					</para>
					<para>
						Your custom home page should look like below:
						<para>
							<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
						</para>
						<para>
							<code>&lt;ui:define name="customWidget"&gt;</code>
						</para>
						<para>
							<code>...</code>
						</para>
						<para>
							<code>&lt;/ui:define&gt;</code>
						</para>
						<para>
							<code>&lt;/ui:composition&gt;</code>
						</para>
					</para>
				</listitem>
				<listitem>
					<para>
						<emphasis>In case of single Portal:</emphasis> Create a new process start for the new home page. Now you will use this process start as the entry point of your portal instead of the default one. <emphasis role="strong">To let portal know about your new portal home, you have to go to the portal settings and set the portal home url to the new one. e.g: HOMEPAGE_URL=http://localhost:8081/ivy/pro/designer/CustomizePortalHome/157454FCA39C3844/start.ivp</emphasis>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/PortalHome/SetHomePageUrl.png" />
							</imageobject>
						</mediaobject>
					</para>
					<para><emphasis>In case of multi Portal:</emphasis> refer to <link linkend="axonivyportal.settings.adminsettings">Setup multi portals</link> to setup.</para>
				</listitem>
			</orderedlist>
			<note>
				Currently, responsive custom home page is not supported. 
			</note>
		</para>
	</sect2>
	<sect2 xml:id="axonivyportal.customization.portalhome.advancedusage">
		<title>Advanced usage</title>
		<para>
			The <code>DefaultHomePageTemplate.xhtml</code> template supports some customizations.
		</para>
		<sect3 xml:id="axonivyportal.customization.portalhome.advancedusage.displayyourowntasksandstatisticsdata">
			<title>Display your statistics data</title>
			<para>
				The template has a parameter: <code>statistic</code> to display the statistic data. Their default values are the tasks which the session user can work on.
				<para>
					<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
				</para>
				<para>
					<code>&lt;ui:param name="statistic" value="#{logic.getStatistic()}" /&gt; &lt;!-- A method returns StatisticData --&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:composition&gt;</code>
				</para>
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.customization.portalhome.advancedusage.displayhidethedefaultwidgets">
			<title>Display/hide the default widgets</title>
			<para>
				The template has three parameters: <code>displayProcessWidget</code>, <code>displayTaskWidget</code>, <code>displayStatisticWidget</code> to display or hide the default widgets. Their default values are true, you can set them to boolean values (true/false) to display or hide them as you need.
				<para>
					<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
				</para>
				<para>
					<code>&lt;ui:param name="displayTaskWidget" value="false" /&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:composition&gt;</code>
				</para>
				<tip>
					Task widget now is hidden.
				</tip>
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.customization.portalhome.advancedusage.customizethedefaultwidgetssections">
			<title>Customize the default widget's sections</title>
			<para>
				The template has the placeholders to redefine the default widgets' sections.
				<para>
					<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
				</para>
				<para>
					<code>&lt;ui:define name="statisticWidget"&gt;</code>
				</para>
				<para>
					<code>&lt;div class="js-dashboard-main-content-3rd-col dashboard-main-content-3rd-col layout-col"&gt;</code>
				</para>
                <para>
                    <code>&lt;h:panelGroup layout="block" styleClass="js-statistic-widget" id="statistic-widget-container"&gt;</code>
                </para>
				<para>
					<code>&lt;!-- KEEP THE STATISTIC WIDGET --&gt;</code>
				</para>
				<para>
					<code>&lt;ic:ch.ivy.addon.portalkit.component.StatisticWidget id="statistics-widget" compactMode="true" tasks="#{tasks}" ... &gt;</code>
				</para>
				<para>
					<code>&lt;!-- ADD THE WEATHER WIDGET BELOW STATISTIC WIDGET --&gt;</code>
				</para>
				<para>
					<code>&lt;ic:my.namespace.WeatherWidget /&gt;</code>
				</para>
                <para>
                    <code>&lt;/h:panelGroup&gt;</code>
                </para>
				<para>
					<code>&lt;/div&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:define&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:composition&gt;</code>
				</para>
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.customization.portalhome.advancedusage.addyourownwidgets">
			<title>Add your own widgets</title>
			<para>
				The template has a placeholder to add your own widgets. Your own widgets' default positions are next to statistic widget, you can change them by setting the default widgets' positions.
				<para>
					<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
				</para>
				<para>
					<code>&lt;ui:define name="customWidget"&gt;</code>
				</para>
				<para>
					<code>&lt;ic:my.namespace.ComponentName ... /&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:define&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:composition&gt;</code>
				</para>
                <tip>This custom widget will show below the 3 default widget</tip>
			</para>
		</sect3>
		<sect3 xml:id="axonivyportal.customization.portalhome.advancedusage.changethepagestitle">
			<title>Change the page's title</title>
			<para>
				The default page title is Cockpit. Apply the following code to change it:
				<para>
					<code>&lt;ui:composition template="/layouts/DefaultHomePageTemplate.xhtml" ... &gt;</code>
				</para>
				<para>
					<code>&lt;ui:define name="pageTitle"&gt;YOUR PAGE'S TITLE&lt;/ui:define&gt;</code>
				</para>
				<para>
					<code>&lt;/ui:composition&gt;</code>
				</para>
			</para>
		</sect3>
	</sect2>
</sect1>
