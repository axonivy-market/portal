<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="axonivyportal.customization.taskitemdetails">
	<title xml:id="axonivyportal.customization.taskitemdetails.title">Task item details</title>
	<para>TaskItemDetails is a built-in component of Portal which contains the case info which users can interact with.
		In order to show needed task's information, Portal supports overriding concept for
		TaskItemDetails.
	</para>
	<para>Each TaskItemDetails contains
		<itemizedlist>
			<listitem>
				<para>showItemDetailsHeader</para>
			</listitem>
			<listitem>
				<para>showItemDetailsNotes</para>
			</listitem>
			<listitem>
				<para>showItemDetailDocuments</para>
			</listitem>
			<listitem>
				<para>TaskItemDetail custom panel: taskItemDetailCustomPanelTop , taskItemDetailCustomPanelBottom</para>
			</listitem>
		</itemizedlist>
	</para>
	<mediaobject>
		<imageobject>
			<imagedata fileref="images/TaskItemDetails/TaskStandard.png" />
		</imageobject>
	</mediaobject>
	<important>
		<para>Task Data and Description box always display, we cannot override the content or hidden/show (they stay where they are)</para>
	</important>
	<sect2 xml:id="axonivyportal.customization.taskitemdetails.howtooverideui">
		<title>How to custom Task item details UI</title>
		<para>
			Refer to <code>PortalExamples</code> project for examples.
		</para>
		<para>
			<orderedlist>
				<listitem>
					<para>
						Introduce an Axon.ivy project which has <code>PortalTemplate</code> as a required library.
					</para>
				</listitem>
				<listitem>
					<para>
						To customize task item detail, you must customize Portal Home first. Refer to <link linkend="axonivyportal.customization.portalhome">Customize Portal home</link> to set new home page.
					</para>
				</listitem>
				<listitem>
					<para>
						Copy the <code>PortalStart</code> process from <code>PortalTemplate</code> to your project. Point PortalHome element to your custom home page in previous step. This process is new home page and administrator should register this link by Portal's Admin Settings.
					</para>
				</listitem>
				<listitem>
					<para>
						Custom the Task item details:
						<itemizedlist>
							<listitem>
								<para>
									Introduce a new HTMLDialog which uses template <code>/layouts/PortalTaskDetailsTemplate.xhtml</code>. You can take a look at <code>PortalTaskDetails.xhtml</code> to see how to customize it.
									<tip>
										<para>
											Highly recommend to copy the <code>PortalTaskDetails</code> HTMLDialog in PortalTemplate. Remove <code>ui:remove</code> and change the copied one's view.
										</para>
									</tip>
								</para>
							</listitem>
							<listitem>
								Use Axon.ivy Override to override the <code>OpenPortalTaskDetail</code> callable. The original implementation of this callable is calling <code>PortalTaskDetails</code>, change it to call the customized Page introduced in the step above. The signature of this callable is
								<code>call(ITask)</code> and customized page must receive this <code>ITask</code> instance, put in the dialog's <code>Data</code> with the exact name <code>taskData</code>.
							</listitem>
						</itemizedlist>
					</para>
				</listitem>
				<listitem>
					<para>After previous steps, you can override Task item details UI elements as shown/hidden element by keywords:</para>
					<para>To show/hide, please using <code>showItemDetailsHeader</code>, <code>showItemDetailsNotes</code>, <code>showItemDetailDocuments</code> code. For more details, please refer to <link linkend="axonivyportal.customization.taskitemdetails.howtooverideui.showhiddenui">Show/Hide components</link>.</para>
					<para>And to add a new elements, please refer to <link linkend="axonivyportal.customization.taskitemdetails.howtooverideui.custombody">Add new Custom panel</link> code</para>
				</listitem>
			</orderedlist>
			<sect3 xml:id="axonivyportal.customization.taskitemdetails.howtooverideui.showhiddenui">
				<title>Show/Hide components by keywords</title>
				<para>Refer to the <code>ui</code> tag list in <code>PortalTaskDetails.xhtml</code> of PortalTemplate.
					In case, we want to show/hide any elements on TaskItemDetails, we should override value of <code>ui:param</code>
					<para>List valid parameters:
						<itemizedlist>
							<listitem>
								<para><code>ui:param name="showItemDetailsHeader" value="true"</code></para>
								<para>To show/hide Task header, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailsNotes" value="true"></code></para>
								<para>To show/hide Task Notes component, by default it's true.</para>
							</listitem>
							<listitem>
								<para><code>ui:param name="showItemDetailDocuments" value="true"</code></para>
								<para>To show/hide Task Documents component, by default it's true.</para>
							</listitem>
						</itemizedlist>
					</para>
				</para>
			</sect3>
			<sect3 xml:id="axonivyportal.customization.taskitemdetails.howtooverideui.custombody">
				<title xml:id="axonivyportal.customization.taskitemdetails.howtooverideui.custombody.title">Add new Custom panel</title>
				<para>Refer to the <code>taskItemDetailCustomPanel*</code> section in <code>PortalTaskDetails.xhtml</code> of PortalTemplate.</para>
				<itemizedlist>
					<para>We have provided 2 placeholder sections for customization. Please follow up below steps to do it.</para>
					<listitem>
						<para>We need to define the <code>ui:define</code> with the valid name such as <code>taskItemDetailCustomPanelTop</code> and <code>taskItemDetailCustomPanelBottom</code>.
							<para>The <code>taskItemDetailCustomPanelTop</code>: will be shown on the top of the component</para>
							<para>The <code>taskItemDetailCustomPanelBottom</code>: will be shown on the bottom of the component</para>
						</para>
					</listitem>
					<listitem>
						<para>Add your custom code into that tag</para>
					</listitem>
					<listitem>
						<para>Finally, your custom panel will be displayed inside of <link linkend="axonivyportal.customization.taskitemdetails">TaskItemDetails</link> page</para>
					</listitem>
					<listitem>
						<para>Below is example code for override custom panel box of task details</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/TaskItemDetails/CustomPanelExampleCode.png" />
							</imageobject>
						</mediaobject>
					</listitem>
					<listitem>
						<para>After applied above code to your custom page, the custom panel will display as below</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/TaskItemDetails/CustomPanelOverride.png" />
							</imageobject>
						</mediaobject>
					</listitem>
					<listitem>
						<para>Finally, we have a custom Task details page</para>
						<mediaobject>
							<imageobject>
								<imagedata fileref="images/TaskItemDetails/TaskCustomized.png" />
							</imageobject>
						</mediaobject>
					</listitem>
				</itemizedlist>
			</sect3>
		</para>
	</sect2>
</sect1>
