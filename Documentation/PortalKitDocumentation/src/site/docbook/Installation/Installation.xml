<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
	xml:id="axonivyportal.installation">
	<title>Installation</title>
	<sect1 xml:id="axonivyportal.installation.releaseinstallation">
		<title>Release installation</title>
		<sect2>
			<title>Installation</title>
			<para>
				The installation section describes all the steps, that are necessary to install and setup the Process
				Application.
			</para>
			<para>
				If you install the application for the first time than it's important to start with the
				<link linkend="axonivyportal.installation.basicinstallation" endterm="axonivyportal.installation.basicinstallation.title" />
				. It describes all the initial steps, that must be done for the first installation.
			</para>
		</sect2>
		<sect2>
			<title>Release Installation</title>
			<para>
				If the application is already installed and initial prepared, than refer to the Release Installation Steps,
				that are provided, here you will only find those steps, that are necessary to install this release.
			</para>
		</sect2>
	</sect1>
	<sect1 xml:id="axonivyportal.installation.basicinstallation">
		<title xml:id="axonivyportal.installation.basicinstallation.title">Basic installation</title>
		<sect2>
			<title>Project modules</title>
			<para>
				The application consists of 5 process modules. For detailed information of each module, refer to
				<link linkend="axonivyportal.architecture" endterm="axonivyportal.architecture.title" />
				.
				<itemizedlist>
					<listitem>
						<para>
							PortalStyle
						</para>
					</listitem>
					<listitem>
						<para>
							PortalKit
						</para>
					</listitem>
					<listitem>
						<para>
							PortalTemplate
						</para>
					</listitem>
					<listitem>
						<para>
							AxonIvyExpress
						</para>
					</listitem>
				</itemizedlist>
				<para>
					The project deployment of Ivy project are described in
					<link xlink:href="http://developer.axonivy.com/doc/latest/EngineGuideHtml/administration.html#administration-deployment">project deployment</link>
					.
				</para>
			</para>
		</sect2>
		<sect2>
			<title>Server configuration</title>
			<para>
				<itemizedlist>
					<listitem>
						<para>
							The minimum required engine version is
							<code>6.0.0.49863</code>
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</sect2>
		<sect2>
			<title>Specify applications used in Portal</title>
			<sect3 xml:id="axonivyportal.installation.basicinstallation.specifyservers.generalConcept">
				<title xml:id="axonivyportal.installation.basicinstallation.specifyservers.generalConcept.title">General concept</title>
				<para>Portal has 2 different configurations:</para>
				<itemizedlist>
					<listitem>
						<emphasis role="bold">Single mode</emphasis>
						: The working application must include portalKit, portalTemplate and portalStyle modules.
					</listitem>
					<listitem>
						<emphasis role="bold">Multi applications mode</emphasis>
						: Multiple Portal applications on one engine. Each Portal application must include portalKit, portalTemplate and
						portalStyle modules.
					</listitem>
				</itemizedlist>
				<important>
					<itemizedlist>
						<listitem>In multi applications mode, if you need overall dashboard, create the standard Portal application with the Portal modules.</listitem>
					</itemizedlist>
				</important>
			</sect3>
			<sect3>
				<title>Manually configure applications</title>
				<para>
					Refer
					<link linkend="axonivyportal.settings.adminsettings.setupmultiportals" endterm="axonivyportal.settings.adminsettings.setupmultiportals.title" />
					.
				</para>
			</sect3>
			<important>
				<para>The engine, installed in the demo mode, automatically deploys the Portal application with default users. You need to deploy it in production mode.
				</para>
			</important>
		</sect2>
		<sect2>
			<title>Default user credentials in demo mode</title>
			<para>Portal provides 3 default users: </para>
			<table>
				<title>Default user credentials</title>
				<tgroup cols="3">
					<thead>
						<row>
							<entry>Username</entry>
							<entry>Password</entry>
							<entry>Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>admin</entry>
							<entry>admin</entry>
							<entry>This user has all Portal permissions, can access to Portal Admin Settings.</entry>
						</row>
						<row>
							<entry>demo</entry>
							<entry>demo</entry>
							<entry>This user has permission to manage user absences.</entry>
						</row>
						<row>
							<entry>guest</entry>
							<entry>guest</entry>
							<entry>Default normal user of portal.</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</sect2>
		<sect2>
			<title>Role configuration</title>
			<table>
				<title>Role configuration</title>
				<tgroup cols="2">
					<thead>
						<row>
							<entry>PortalKit roles</entry>
							<entry>Rights</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>AXONIVY_PORTAL_ADMIN</entry>
							<entry>
								<para>
									User belong to this role can handle AdminUI page, configure the internal role properties, create public filters. Users who own this
									role need some permissions. See
									<link linkend="axonivyportal.installation.basicinstallation.permissionsettings" endterm="axonivyportal.installation.basicinstallation.permissionsettings.title" />
									.
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</sect2>
		<sect2 xml:id="axonivyportal.installation.basicinstallation.permissionsettings">
			<title xml:id="axonivyportal.installation.basicinstallation.permissionsettings.title">Permission settings</title>
			<sect3>
				<title>Absences</title>
				<itemizedlist>
					<listitem>
						<para>
							READ
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.USER_READ_OWN_ABSENCES</code>
							and
							<code>IPermission.USER_READ_ABSENCES</code>.
						</para>
					</listitem>
					<listitem>
						<para>
							CREATE/MODIFY
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.USER_CREATE_OWN_ABSENCE</code>
							and
							<code>IPermission.USER_CREATE_ABSENCE</code>.
						</para>
					</listitem>
					<listitem>
						<para>
							DELETE
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.USER_DELETE_OWN_ABSENCE</code>
							and
							<code>IPermission.USER_DELETE_ABSENCE</code>.
						</para>
					</listitem>
					<listitem>
						<para>
							MANAGE EVERY USER ABSENCES
						</para>
						<para>
							User can read, add, delete absences of all users. This function will be disabled if session user does not have all
							of the following permissions:
							<code>IPermission.USER_CREATE_ABSENCE</code>
							,
							<code>IPermission.USER_DELETE_ABSENCE</code>
							,
							<code>IPermission.USER_READ_ABSENCES</code>.
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Substitute</title>
				<itemizedlist>
					<listitem>
						<para>
							CREATE OWN SUBSTITUTE
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.USER_CREATE_OWN_SUBSTITUTE</code>
							and
							<code>IPermission.USER_CREATE_SUBSTITUTE</code>.
						</para>
					</listitem>
					<listitem>
						<para>
							MANAGE EVERY USER SUBSTITUTES
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.USER_CREATE_SUBSTITUTE</code>
							or
							<code>IPermission.USER_READ_SUBSTITUTES</code>.
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Personal task permission</title>
				<itemizedlist>
					<listitem>
						<para>
							DELEGATE
						</para>
						<para>
							User can delegate his personal or group tasks if he has permission <code>TaskWriteActivatorOwnTasks</code> (This permission belongs to Portal permission group and it is not assigned to role Everybody by default).
							User can delegate all the tasks he see in his task list if he has permission
							<code>IPermission.TASK_WRITE_ACTIVATOR</code>
							.
						</para>
						<important>
							Task state cannot be one of the following:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>RESUMED</code>
							,
							<code>FAILED</code>
							.
						</important>
						<para>
							This function will be hidden if session user does not have permission
							<code>PortalPermission.TASK_DISPLAY_DELEGATE_ACTION</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							ADD NOTE
						</para>
						<para>
							No permission requires.
						</para>
						<important>
							Task state cannot be one of the following:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>RESUMED</code>
							,
							<code>FAILED</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							RESET
						</para>
						<para>
							This function will be enabled if session user has permission
							<code>IPermission.TASK_RESET_OWN_WORKING_TASK</code> or
							<code>IPermission.TASK_RESET</code>
							.
						</para>
						<important>
							Task state has to be one of following:
							<code>RESUMED</code>
							,
							<code>PARKED</code>
							.
						</important>
						<para>
							This function will be hidden if session user does not have permission
							<code>PortalPermission.TASK_DISPLAY_RESET_ACTION</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							RESERVE
						</para>
						<para>
							This function will be enabled if session user has permission
							<code>IPermission.TASK_PARK_OWN_WORKING_TASK</code>
							.
						</para>
						<important>
							Task state has to be
							<code>RESUMED</code>
							.
						</important>
						<para>
							This function will be hidden if session user does not have permission
							<code>PortalPermission.TASK_DISPLAY_RESERVE_ACTION</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							CHANGE TASK NAME
						</para>
						<para>
							This function will be enabled if session user has
							<code>IPermission.TASK_WRITE_NAME</code>
							.
						</para>
						<important>
							Task state cannot be one of following values:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>FAILED</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							CHANGE TASK DESCRIPTION
						</para>
						<para>
							This function will be enabled if session user has
							<code>IPermission.TASK_WRITE_DESCRIPTION</code>
							.
						</para>
						<important>
							Task state cannot be one of following values:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>FAILED</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							CHANGE DEADLINE
						</para>
						<para>
							This function will be enabled if session user has
							<code>IPermission.TASK_WRITE_EXPIRY_TIMESTAMP</code>
							.
						</para>
						<important>
							Task state cannot be one of following values:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>FAILED</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							CHANGE PRIORITY
						</para>
						<para>
							This function will be disabled if session user does not have
							<code>IPermission.TASK_WRITE_ORIGINAL_PRIORITY</code>
							.
						</para>
						<important>
							Task state cannot be one of following:
							<code>DONE</code>
							,
							<code>DESTROYED</code>
							,
							<code>FAILED</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							DISPLAY ADDITIONAL OPTIONS
						</para>
						<para>
							This function will be hidden if session user does not have permission
							<code>PortalPermission.TASK_DISPLAY_ADDITIONAL_OPTIONS</code>
							.
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Personal case permission</title>
				<itemizedlist>
					<listitem>
						<para>
							ADD NOTE
						</para>
						<para>
							Add note function will be enabled if case state is
							<code>RUNNING</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							DELETE CASE
						</para>
						<para>
							Delete case function will be enabled if session user has
							<code>IPermission.CASE_DESTROY</code>
							.
						</para>
						<important>
							Case state has to be
							<code>RUNNING</code>
							.
						</important>
					</listitem>
					<listitem>
						<para>
							CHANGE CASE NAME
						</para>
						<para>
							Delete case function will be enabled if session user has
							<code>IPermission.CASE_WRITE_NAME</code>
							.
						</para>
						<important>
							Case state cannot to be:
							<code>DESTROYED</code>.
						</important>
					</listitem>
					<listitem>
						<para>
							CHANGE CASE DESCRIPTION
						</para>
						<para>
							Delete case function will be enabled if session user has
							<code>IPermission.CASE_WRITE_DESCRIPTION</code>
							.
						</para>
						<important>
							Case state cannot to be:
							<code>DESTROYED</code>.
						</important>
					</listitem>
					<listitem>
						<para>
							SEE RELATED TASKS OF CASE
						</para>
						<para>
							Session user can see all related tasks of case if he has
							<code>IPermission.TASK_READ_OWN_CASE_TASKS</code> or
							<code>IPermission.TASK_READ_ALL</code>
							.
						</para>
						<important>
							Case state cannot to be:
							<code>DESTROYED</code>.
						</important>
						<para>
							Link to show all tasks of case will be hidden if session user does not have permission
							<code>PortalPermission.SHOW_ALL_TASKS_OF_CASE</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							DISPLAY SHOW DETAILS LINK
						</para>
						<para>
							This link will be hidden if session user does not have permission
							<code>PortalPermission.SHOW_CASE_DETAILS</code>
							. This permission is not assigned to role Everybody by default.
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
            <sect3>
              <title>Upload/delete document permission</title>
              <para>Upload/delete document function will be enabled if session user has <code>IPermission.DOCUMENT_WRITE</code> or <code>IPermission.DOCUMENT_OF_INVOLVED_CASE_WRITE</code>.</para>
            </sect3>
            <sect3>
				<title>Express Workflow permission</title>
				<itemizedlist>
					<listitem>
						<para>
							CREATE EXPRESS WORKFLOW
						</para>
						<para>
							Create Express Workflow function will be enabled if session user has
							<code>PortalPermission.EXPRESS_CREATE_WORKFLOW</code>
							(This permission belongs to Portal permission group, assigned to role Everybody by default).
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Statistics permission</title>
				<itemizedlist>
					<listitem>
						<para>
							ADD DASHBOARD CHART
						</para>
						<para>
							Add new charts function will be enabled if session user has
							<code>PortalPermission.STATISTIC_ADD_DASHBOARD_CHART</code>
							(This permission belongs to Portal permission group, assigned to role Everybody by default).
						</para>
					</listitem>
					<listitem>
						<para>
							ANALYZE TASK
						</para>
						<para>
							Filter tasks and export data to excel for advanced analysis. This function will be enabled if session user has
							<code>PortalPermission.STATISTIC_ANALYZE_TASK</code>
							(This permission belongs to Portal permission group and it is not assigned to role Everybody by default).
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Portal general permission</title>
				<itemizedlist>
					<listitem>
						<para>
							ACCESS TO FULL PROCESS LIST 
						</para>
						<para>
							User cannot see "Processes" on the left menu and link "Show all processes" (on Dashboard) if he does not have permission
							<code>PortalPermission.ACCESS_FULL_PROCESS_LIST</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							ACCESS TO FULL TASK LIST
						</para>
						<para>
							User cannot see "Tasks" on the left menu and link "Show full task list" (on Dashboard) if he does not have permission
							<code>PortalPermission.ACCESS_FULL_TASK_LIST</code>
							.	
						</para>
					</listitem>
					<listitem>
						<para>
							ACCESS TO FULL CASE LIST
						</para>
						<para>
							User cannot see "Cases" on the left menu if he does not have permission
							<code>PortalPermission.ACCESS_FULL_CASE_LIST</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							ACCESS TO FULL STATISTIC LIST
						</para>
						<para>
							User cannot see "Statistics" on the left menu and link "Show all charts" (on Dashboard) if he does not have permission
							<code>PortalPermission.ACCESS_FULL_STATISTICS_LIST</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							DISPLAY ADD NOTE BUTTON
						</para>
						<para>
							This button will be hidden if session user does not have permission
							<code>PortalPermission.TASK_CASE_ADD_NOTE</code>
							.
						</para>
					</listitem>
					<listitem>
						<para>
							DISPLAY SHOW MORE NOTE BUTTON
						</para>
						<para>
							This button will be hidden if session user does not have permission
							<code>PortalPermission.TASK_CASE_SHOW_MORE_NOTE</code>
							.
						</para>
					</listitem>
				</itemizedlist>
			</sect3>
			<sect3>
				<title>Administrator permission can see all tasks/cases in the application</title>
				<para>
					Normal users can only see their tasks/cases they can work on.
				</para>
				<para>
					Administrator can see all tasks/cases in the application.
				</para>
				<para>
					Permissions needed:
					<code>IPermission.TASK_READ_ALL</code>
					,
					<code>IPermission.CASE_READ_ALL</code>
					.
				</para>
			</sect3>
			<sect3>
				<title>Administrator permission can interact with all workflows in the application</title>
				<para>
					Normal users can updates and deletes workflows which created by him and can interact with workflow's task
					which assigned to him.
				</para>
				<para>
					Administrator can creates, updates and deletes all workflows in the application.
				</para>
			</sect3>
		</sect2>
		<sect2>
			<title>Global variables</title>
			<table>
				<title>Global variables</title>
				<tgroup cols="3">
					<colspec colnum='1' colwidth="2*"/>
					<colspec colnum='2' colwidth="1*"/>
					<colspec colnum='3' colwidth="2*"/>
					<thead>
						<row>
							<entry>Variable</entry>
							<entry>Default value</entry>
							<entry>Description</entry>
						</row>
					</thead>
					<tbody>
						<row>
							<entry>PortalStartTimeCleanObsoletedDataExpression</entry>
							<entry>0 0 6 * * ?</entry>
							<entry>
								Cron expression define the time to clean up data of obsoleted users. E.g.: expression for at 6AM every
								day is
								<code>0 0 6 * * ?</code>
								. Refer to
								<link xlink:href="http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger">crontrigger</link>
								. Restart Ivy engine after changing this variable.
							</entry>
						</row>
						<row>
							<entry>PortalDeleteAllFinishedHiddenCases</entry>
							<entry>false</entry>
							<entry>If set to <code>true</code>, the cron job runs daily (at 6.AM as default) will clean all finished hidden cases in engine.
								Otherwise, just hidden cases which were generated by Portal will be deleted.</entry>
						</row>
						<row>
							<entry>PortalHiddenTaskCaseExcluded</entry>
							<entry>true</entry>
							<entry>By default, Portal will query tasks and cases which don't have hide information. Set it to <code>false</code>, portal will ignore this additional property.</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</sect2>
		<sect2>
			<title>Look and feel</title>
			<para>
				Portal doesn't use
				<link xlink:href="http://www.primefaces.org/eos/modena/">Modena</link>
				theme from version 6.3.
			</para>
			<itemizedlist>
				<listitem>
					<para>
						Yes/Ok buttons on the left, No/Cancel buttons on the right
					</para>
				</listitem>
			</itemizedlist>
		</sect2>
	</sect1>
	<sect1 xml:id="axonivyportal.installation.migrationnotes">
		<title xml:id="axonivyportal.installation.migrationnotes.title">Migration notes</title>
		<para>
			This document informs you in detail about incompatibilities that were introduced between Portal versions and
			tells you what needs to be done to make your existing Portal working with current Axon.ivy engine.
		</para>
		<sect2>
			<title>How to migrate</title>
			<important>
				<para>If you call any Portal API which is not mentioned in document. It could be changed or removed. Re-implement it in your own project.</para>
				<para>In order to migrate Portal, you need to migrate Axon.ivy, refer <link xlink:href="https://developer.axonivy.com/doc/latest/MigrationNotes.html">Axon.ivy migration notes</link>. 
				Changes in Axon.ivy could lead to problems if customer project is not migrated properly.</para>
			</important>
			<sect3>
				<title>In designer</title>
				<orderedlist>
					<listitem>Replace all Portal projects</listitem>
					<listitem>Update PortalTemplate dependency of customer project in pom.xml.</listitem>
					<listitem>If PortalStyle is customized, copy logo, customization.less, font-faces.less, customized stuff from old to new PortalStyle, run maven to compile CSS.</listitem>
					<listitem>Follow migration notes.</listitem>
					<listitem>If customization needs copying code from Portal, merge changes between 2 version of Portal for copied code.</listitem>
				</orderedlist>
				<important>
					<itemizedlist>
						<listitem>Scenario migrating one customer project without customization: Follow guidelines to step 2.</listitem>
						<listitem>Scenario migrating one customer project with supported customization: Follow the guidelines.</listitem>
						<listitem>Scenario migrating one customer project with (un)supported customization: Follow guidelines for supported customization. 
							If unsupported customization needs copying code from Portal, merge changes between 2 versions of Portal for copied code. Take care your own unsupported customization.</listitem>
					</itemizedlist>
				</important>
			</sect3>
			<sect3>
				<title>In engine</title>
				<orderedlist>
					<listitem>Convert database schema if needed.</listitem>
					<listitem>If your ivy version is before 7.3.0 : deactivate standard Portal application if it's not needed.</listitem>
					<listitem>Redeploy Portal projects (exclude PortalConnector) and customer project.</listitem>
					<listitem>Follow migration notes to migrate data, if any.</listitem>
				</orderedlist>
			</sect3>
		</sect2>
		<sect2>
			<title xml:id="axonivyportal.installation.migrationnotes.7.4">Migrate to 7.4.0</title>
			<para>
				From 7.4.0, CaseTemplate is removed from Portal. If you are using CaseTemplate, please do following steps to migrate to TaskTemplate
				<itemizedlist>
					<listitem>1. Add parameter <code>task</code> to use task name as template title </listitem>
					<listitem>Move content of section <code>caseForm</code> of CaseTemplate to section <code>taskForm</code> of TaskTemplate</listitem>
				</itemizedlist>
			</para>
		</sect2>
		<sect2>
			<title>Migrate to 7.3.0</title>
			<para>
				From 7.3.0, Portal supports some permissions to show/hide left menu item, if you override <code>LoadSubMenuItems</code> process and want to use these permissions, refer to 
				<link linkend="axonivyportal.customization.menu.customization" endterm="axonivyportal.customization.menu.customization.title" /> for more detail.
			</para>
			<para>
				There is a small change when initializing statistic chart, so if you override <code>DefaultChart.mod</code>, have a look at its note to see what is changed. 
			</para>
			<para>
				Portal connector is removed, so there are many things related to it must be adjusted. Check this list below
				<itemizedlist>
					<listitem>All <code>Remote*</code> classes are removed, replaced by the Ivy classes: ICase, ITask, IUser, IApplication, etc..</listitem>
					<listitem>Use <code>BuildTaskQuery</code> and <code>BuildCaseQuery</code> callable process instead of <code>BuildTaskJsonQuery</code> and <code>BuildCaseJsonQuery</code>.</listitem>
					<listitem>If you override TaskLazyDataModel, remove <code>extendSortTasksInNotDisplayedTaskMap</code> method. 
					Use <code>criteria</code> field instead of <code>queryCriteria</code> or <code>searchCriteria</code>, use <code>adminQuery</code> field instead of <code>ignoreInvolvedUser</code>.</listitem>
					<listitem>If you override CaseLazyDataModel: remove <code>extendSortCasesInNotDisplayedTaskMap</code> method. 
					Use <code>criteria</code> field instead of <code>queryCriteria</code> or <code>searchCriteria</code>, use <code>adminQuery</code> field instead of <code>ignoreInvolvedUser</code>.</listitem>
					<listitem>If you override ChangePassword.mod: change process call from <code>MultiPortal/PasswordService:changePasswordService(String,String)</code> to <code>Ivy Data Processes/PasswordService:changePassword(String,String)</code>.</listitem>
				</itemizedlist>
			</para>
			<sect3>
				<title>Migrate hidden task and case to 7.3.0</title>
				<para>
				Portal 7.0.10 has option to store hidden information in custom field of task and case instead of additional property for better performance. Other versions of Portal store these info in additional property.
				</para>
				<para>
				If you use hide task/case feature, you need to follow these steps:
				</para>
				<orderedlist>
					<listitem>Deploy this project <link xlink:href="documents/MigrateHiddenTaskCase.iar">MigrateHiddenTaskCase.iar</link> to all your portal applications.</listitem>
					<listitem>In each application, run start process <code>MigrateHiddenTaskCase</code> to migrate.</listitem>
					<listitem>It's optional to clean up redundant data. After migration finishes successfully, run start process <code>RemoveHideAdditionalProperty</code> in each application to clean up HIDE additional property. 
					It will delete HIDE additional property of all tasks and cases in current application, so be careful with it.</listitem>
				</orderedlist>
			</sect3>
		</sect2>
		<sect2>
			<title>Migrate 7.1.0 to 7.2.0</title>
			<para>
				Portal needs <link xlink:show="new" xlink:href="https://poi.apache.org">Apache POI</link> for exporting to Excel features.
			</para>
			<para>
				If you override task widget's data query described at <link linkend="axonivyportal.customization.taskwidget.howtooverridedataquery" endterm="axonivyportal.customization.taskwidget.howtooverridedataquery.title" />, 
				follow these steps to migrate
				<itemizedlist>
					<listitem>
						Add new start method with signature <code>buildTaskJsonQuery(Boolean)</code> in your overridden file of BuildTaskJsonQuery.mod
						(refer to original file BuildTaskJsonQuery.mod).
					</listitem>
					<listitem>
						If you customized <code>TaskLazyDataModel</code>, change <code>withStartSignature("buildTaskJsonQuery()</code> to <code>withStartSignature("buildTaskJsonQuery(Boolean)").withParam("isQueryForHomePage", compactMode)</code> 
						in your customized <code>TaskLazyDataModel</code> class.
					</listitem>
				</itemizedlist>
			</para>
			<para>
				There are some changes (DefaultApplicationHomePage, DefaultLoginPage, GlobalSearch) in PortalStart process of Portal Template. If you have customized this process in your project,
				copy the new PortalStart from Portal Template to your project and re-apply your customization. 
			</para>
            <important>
              <para>    
                In case you already have PortalStart process in your project, delete all elements in that process and copy everything from PortalStart process of Portal Template (to prevent start link id change).
                <code>Do not delete</code> PortalStart proccess in your project and copy new again. 
              </para>
              <para>
                  Check map param result of callable process after copy to make sure it's the same as original process.
                  <mediaobject>
                    <imageobject>
                      <imagedata fileref="images/Installation/copy-start-process.png" />
                    </imageobject>
                </mediaobject>
              </para>
            </important>
			<para>
					EXPIRY_CHART_LAST_DRILLDOWN_LEVEL global variable is removed. User now can use a context menu to drilldown Task By Expiry chart. 
			</para>
		</sect2>
		<sect2>
			<title>Migrate 7.0.3 to 7.0.5 (or 7.1.0)</title>
			<para>
				There are some changes in PortalStart process of Portal Template. If you have customized this process in your project, copy the new PortalStart from Portal Template to your project and re-apply your customization. 
            </para>
            
			<para>
				We introduce new method <code>findStartableLinkByUserFriendlyRequestPath(String requestPath)</code> in <code>ProcessStartCollector</code> class. If your project has customized 
				<link linkend="axonivyportal.customization.defaultuserprocess" endterm="axonivyportal.customization.defaultuserprocess.title" />, use this method to generate link to your process.
				If user doesn't have permission to start the process, this method will return empty string.
			</para>
            <important>
              <para>    
                In case you already have PortalStart process in your project, delete all elements in that process and copy everything from PortalStart process of Portal Template (to prevent start link id change).
                <code>Do not delete</code> PortalStart proccess in your project and copy new again. 
              </para>
              <para>
                  Check map param result of callable process after copy to make sure it's the same as original process.
                  <mediaobject>
                    <imageobject>
                      <imagedata fileref="images/Installation/copy-start-process.png" />
                    </imageobject>
                </mediaobject>
              </para>
            </important>
		</sect2>
		<sect2>
			<title>Migrate 7.0.2 to 7.0.3</title>
			<para>
				If you have additional columns in your customized task widget, refer <link linkend="axonivyportal.customization.taskwidget.howtooverideui.taskheader">Task widget</link> to adapt your 
				customization in <code>taskHeader</code> section.
			</para>
		</sect2>
		<sect2>
			<title>Migrate 7.0.1 to 7.0.2</title>
			<para>In PortalStyle\pom.xml, update project-build-plugin version to <code>7.1.0 </code>and run maven to compile CSS.</para>
			<para>If changing password is customized, change method call <code>PasswordService.mod#changePassword(String,String)</code> to 
				<code>PasswordService.mod#changePasswordService(String, String)</code> in this customization.</para>
			<para>
				Custom fields in Portal task list can now be sorted properly. The method <code>extendSort()</code> of <code>TaskLazyDataModel</code> is changed
				to have a <code>taskQuery</code> parameter. If you override this method, change your code to use the new parameter instead of using the <code>criteria</code> taskQuery.
			</para>
			<para>
				Portal does not have separate full task list in the homepage anymore. It's mean that you don't have to customize the task list in <code>/layouts/DefaultHomePageTemplate.xhtml</code>. You can remove your
				task list customization code in <code>PortalHome.xhtml</code>.
			</para>
			<para>
				If you have added new language to Portal by adding cms entry <code>/AppInfo/SupportedLanguages</code> in your project. Move this entry to Portal Style.  
			</para>
		</sect2>
		<sect2>
			<title>Migrate 7.0.0 to 7.0.1</title>
			<para>
				<emphasis role="bold">Ajax error handling</emphasis>: By default, Portal handles all exceptions from ajax requests. Old configuration, customization of ajax error handling should be removed.
			</para>
		</sect2>
		<sect2>
			<title>Migrate 6.x to 7.0.0</title>
			<para>
				If you copy the
				<code>PortalStart</code>
				process or the
				<code>PortalHome</code>
				HTMLDialog for customizations, adapt the changes:
			</para>
			<itemizedlist>
				<listitem>
					<para>The whole process is refactored to be clearer. So it is recommended that you copy it again.</para>
				</listitem>
				<listitem>
					<para>New process is introduced: restorePortalTaskList.ivp</para>
				</listitem>
				<listitem>
					<para>PortalStart: some new ivy scripts are added to handle the navigation back to the same page before starting a
						task.
					</para>
				</listitem>
				<listitem>
					<para>
						PortalHome: The
						<code>taskView</code>
						parameter is added to the start method.
					</para>
				</listitem>
			</itemizedlist>
			<sect3>
				<title>SQL conversion</title>
				<para>
					From Portal
					<code>7.0</code>
					, we use standard axon.ivy Task Category field to store task category.
				</para>
				<para>
					To migrate task categories, deploy
					<link xlink:href="documents/MigrateTaskCategorySample.iar">MigrateTaskCategorySample.iar</link>
					to your application and run
					<code>Migrate Task Category</code>
					process to:
				</para>
				<orderedlist>
					<listitem>
						<para>
							Migrate data from column
							<code>customVarCharField5</code>
							to
							<code>category</code>
							for all tasks in the application.
						</para>
					</listitem>
					<listitem>
						<para>
							Delete leftover data in
							<code>customVarCharField5</code>
							of all tasks in the application.
						</para>
					</listitem>
					<listitem>
						<para>Create CMS entries for task categories in the application.</para>
					</listitem>
				</orderedlist>
				<para>
					If you have queries which referring to task category, plese replace
					<code>customVarCharField5()</code>
					part with
					<code>category()</code>
					part.
				</para>
			</sect3>
		</sect2>
		<sect2>
			<title>Migrate 6.4 or 6.5 to 6.6</title>
			<itemizedlist>
				<listitem>Task header is supported to be customized. The
					<code>useOverride</code>
					param, which is used to override the task item's body, is changed to
					<code>useOverrideBody</code></listitem>
				<listitem>If you customize <code>TaskLazyDataModel</code>, remove that customized class and customize as 
					<link linkend="axonivyportal.customization.taskwidget.howtooverridedataquery" endterm="axonivyportal.customization.taskwidget.howtooverridedataquery.title" />.</listitem>
			</itemizedlist>
			
		</sect2>
		<sect2>
			<title>Migrate 6.4 to 6.5</title>
			<itemizedlist>
				<listitem>If compilation error "The type org.apache.axis2.databinding.ADBBean cannot be resolved" occurs, 
					refer <link xlink:href="https://developer.axonivy.com/doc/latest/doc/migrationNotes/MigrationNotesDesigner7.0.html#projectClasspath">Project compilation classpath</link> to fix.</listitem>
				<listitem>The relative link in default user processes starts with ivy context path instead of "pro". If there are customized default user proceses, 
					append context path at the beginning. E.g. in Portal <code>6.4</code>, it is /pro/.../PortalStart.ivp. 
					In Portal <code>6.5</code>, change it to /ivy/pro/.../PortalStart.ivp. 
					You may use : <code>ivy.html.startref(...)</code> or <code>RequestUriFactory.createProcessStartUri(...)</code> to generate links.</listitem>
			</itemizedlist>
		</sect2>
		<sect2>
			<title>Migrate 6.x (x &lt; 4) to 6.4 (Jakobshorn)</title>
			<sect3>
				<title>Portal appearance</title>
				<para>
					Portal
					<code>6.4</code>
					are redesigned. Therefore many components look different from the previous version like menu, task list, case list
					... . Portal
					<code>BasicTemplate</code>
					does not use
					<code>p:layout</code>
					and
					<code>p:layoutUnit</code>
					anymore.
					You may need to adapt your pages to this change.
				</para>
				<para>
					For now the menu customization is not supported.
				</para>
				<para>
					From
					<code>6.4</code>
					, Portal applies
					<link xlink:show="new" xlink:href="http://lesscss.org/">LESS</link>
					to support customizing Portal styles. You can customize colors, fonts and Portal's component styles. For more
					information about customizing Portal's style with LESS,
					refer to
					<link linkend="axonivyportal.customization.portallogosandcolors" endterm="axonivyportal.customization.portallogosandcolors.title" />
					.
				</para>
				<para>
					Steps to migrate
					<orderedlist>
						<listitem>
							<para>
								Copy PortalStyle/webContent/resources of Portal
								<code>6.4</code>
								to PortalStyle/webContent/resources of the current Portal.
							</para>
						</listitem>
						<listitem>
							<para>Modify PortalStyle/webContent/resources/less/theme.less, update value of @body-background-color for the
								background color and @menu-color for the menu, button color.
							</para>
						</listitem>
						<listitem>
							<para>Put custom styles to PortalStyle/webContent/resources/less/customization.less.</para>
						</listitem>
						<listitem>
							<para>
								Add properties and plugins which are defined in PortalStyle/pom.xml of Portal
								<code>6.4</code>
								to PortalStyle/pom.xml of the current Portal.
							</para>
						</listitem>
						<listitem>
							<para>
								Run the maven command
								<code>mvn lesscss:compile</code>
								in PortalStyle to build CSS file.
							</para>
						</listitem>
						<listitem>
							<para>PortalStyle/webContent/resources/css/theme.css is obsolete, remove it.</para>
						</listitem>
					</orderedlist>
				</para>
			</sect3>
		</sect2>
		<sect2>
			<title>Migrate 5.0 (Rothorn) to 6.0 (Säntis)</title>
			<sect3>
				<title>Database conversion</title>
				<para>
					If you are using Portal
					<code>5.0</code>
					, you have to manual configure all settings (create servers, applications, variables) again since Portal now
					doesn't use external database. All settings on from Portal
					<code>6.0</code>
					are stored in Ivy system database.
					If you are using Portal
					<code>6.0</code>
					, you don't need to convert database.
				</para>
			</sect3>
			<sect3>
				<title>Portal appearance</title>
				<para>
					Portal now doesn't use
					<link xlink:show="new" xlink:href="http://primefaces.org/eos/modena">Modena</link>
					theme, it's a big difference to previous
					<code>6.0</code>
					. Therefore many things in Portal
					<code>5.0</code>
					and
					<code>6.0</code>
					will not look the same in new Portal. Many things have been redesigned like menu, task list, case list ...
				</para>
			</sect3>
		</sect2>
	</sect1>
	<sect1 xml:id="axonivyportal.installation.releasenotes">
		<title>Release notes</title>
		
		<para>
			This part lists all relevant changes since the last official product releases of Axon.ivy.
			<sect2>
				<title>Changes in 7.4</title>
				<itemizedlist>
					<listitem>
						<para>New Portal Chat is introduced, now Portal supports Group chat and Private chat, refer to <link linkend="axonivyportal.components.portalchat" endterm="axonivyportal.components.portalchat.title" /> for more detail</para>
					</listitem>
					<listitem>
						<para>Portal group id is officially configurable, refer to <link linkend="axonivyportal.customization.changegroupid" endterm="axonivyportal.customization.changegroupid.title" /> for more detail</para>
					</listitem>
					<listitem>
						<para>CaseTemplate is removed, from now on we only use TaskTemplate. Please refer to <link linkend="axonivyportal.installation.migrationnotes" endterm="axonivyportal.installation.migrationnotes.title" /> to see how to migrate CaseTemplate to TaskTemplate</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 7.3</title>
				<itemizedlist>
					<listitem>
						<para>Remove PortalConnector, query data via Ivy API directly to increase performance, refer to Migration Notes</para>
					</listitem>
					<listitem>
						<para>Provide the mobile pages. The default page is task list, refer to 
							<link linkend="axonivyportal.customization.mobiledefaultpage" endterm="axonivyportal.customization.mobiledefaultpage.title" /> for the customization.</para>
					</listitem>
					<listitem>
						<para>Provide more permissions to show/hide menu, button and link in Portal, refer to 
							<link linkend="axonivyportal.installation.basicinstallation.permissionsettings" endterm="axonivyportal.installation.basicinstallation.permissionsettings.title" /> for more detail.</para>
					</listitem>
					<listitem>
						<para>Hide Statistic widget can be configured in Admin setting.</para>
					</listitem>
					<listitem>
						<para>Hide technical task / case can be configured using additional property or custom field (more performance).</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 7.2</title>
				<itemizedlist>
					<listitem>
						<para>Introduce variables to customize task priority and state colors and header bar colors</para>
					</listitem>
                    <listitem>
                      <para>Introduce new page: Global search result, and supports the customization</para>
                    </listitem>
                    <listitem>
                      <para>Override DefaultApplicationHomePage.ivp, DefaultLoginPage.ivp, DefaultEndPage.ivp processes, refer to <link xlink:show="new" xlink:href="https://developer.axonivy.com/doc/latest/EngineGuideHtml/administration.html#ServerAdministration-htmlworkflowui">Replacement Project</link>, check migration notes if you have the customized PortalStart.ivp process.</para>
                    </listitem>
                    <listitem>
                      <para>Check permission when upload/delete document. User needs permission <code>IPermission.DOCUMENT_WRITE</code> or <code>IPermission.DOCUMENT_OF_INVOLVED_CASE_WRITE</code> to upload/delete document.</para>
                    </listitem>
                    <listitem>
                      <para>Support disable upload/delete document when a case is done. This function can be configured by <code>HIDE_UPLOAD_DOCUMENT_FOR_DONE_CASE</code> setting.</para>
                    </listitem>
					<listitem>
						<para>Support configure upload file extension whitelist. Only file extensions appear in this list are allowed to upload to Portal. This function can be configured by <code>UPLOAD_DOCUMENT_WHITELIST_EXTENSION</code> setting.</para>
					</listitem>
					<listitem>
						<para>Support script checking function for upload file. You can enable/disable this function by configuring <code>ENABLE_SCRIPT_CHECKING_FOR_UPLOADED_DOCUMENT</code> setting.</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 7.1</title>
				<itemizedlist>
					<listitem>
						<para>Support client side timeout: informs user when session is about to expire and auto logout when expired.</para>
					</listitem>
					<listitem>
						<para>Hide technical cases (the HIDE additional property is set), so that they and their related task are not displayed
						in any Portal case lists.</para>
					</listitem>
					<listitem>
						<para>More search criteria for user in Case list are added and allowed to customize.</para>
					</listitem>
					<listitem>
						<para>User can add new language. Refer to <link linkend="axonivyportal.settings.languagesettings" endterm="axonivyportal.settings.languagesettings.title" /> for detail.</para>
					</listitem>
					<listitem>
						<para>Axon ivy express has custom end page. It can be turned off or customized.</para>
					</listitem>
					<listitem>
						<para>User can create default start process with permission check. If the user doesn't have permission to start the process, it won't appear in favorite processes. Refer to <link linkend="axonivyportal.customization.defaultuserprocess" endterm="axonivyportal.customization.defaultuserprocess.title" /> for detail.</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 7.0 (Jakobshorn)</title>
				<itemizedlist>
					<listitem>
						<para>More search criteria for user in Task list are added and allowed to customize.</para>
					</listitem>
					<listitem>
						<para>Task delegate customization is supported</para>
					</listitem>
					<listitem>
						<para>The same task list is displayed before and after a task. Set default end page to another project to remove
							this feature.
						</para>
					</listitem>
					<listitem>
						<para>Task category of Portal is now stored in new Task category field of ivy.</para>
						<para>
							Refer to
							<link linkend="axonivyportal.installation.migrationnotes" endterm="axonivyportal.installation.migrationnotes.title" />
							to learn how to migrate data from
							<code>customVarCharField5</code>
							to new
							<code>category</code>
							field.
						</para>
					</listitem>
					<listitem>
						<para>Hide technical tasks (the HIDE additional property is set), so that they are not displayed in any Portal
							task lists.
						</para>
					</listitem>
					<listitem>
						<para>
						Change password is supported to be customized. Refer to 
						<link linkend="axonivyportal.customization.changepasswordprocess" endterm="axonivyportal.customization.changepasswordprocess.title" /> 
						to know how to customize this feature.
						</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 6.6 (Jakobshorn)</title>
				<itemizedlist>
					<listitem>
						<para>Task widget's customization is extended with task header and task data query.</para>
					</listitem>
					<listitem>
						<para>Hide technical roles (the HIDE property is set), so that they are not displayed anywhere (e.g. delegate,
							absence mgmt). The default hidden role is AXONIVY_PORTAL_ADMIN
						</para>
					</listitem>
				</itemizedlist>
			</sect2>
			<sect2>
				<title>Changes in 6.0 (Säntis)</title>
				<itemizedlist>
					<listitem>
						<para>
							Portal has 2 level menu with animation.
						</para>
					</listitem>
					<listitem>
						<para>
							All components such as button, text field ...have been re-styled, not applied Modena's styles.
						</para>
					</listitem>
					<listitem>
						<para>
							Support responsiveness with 3 screen widths: 1920, 1366 and 1024.
							Refer to
							<link linkend="axonivyportal.components.layouttemplates.reponsiveness" endterm="axonivyportal.components.layouttemplates.reponsiveness.title" />
							for more details.
						</para>
					</listitem>
					<listitem>
						<para>
							Some customizations are not supported in this release: main menu, case header.
						</para>
					</listitem>
				</itemizedlist>
			</sect2>
		</para>
	</sect1>
</chapter>