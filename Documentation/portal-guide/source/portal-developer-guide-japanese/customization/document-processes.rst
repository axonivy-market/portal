.. _customization-document-processes-ja:

ドキュメントのプロセス
=====================================

.. _customization-document-processes-introduction:

概要
------------

ドキュメントをアップロードし、ドキュメント管理システム（DMS）など、Ivy の外部で管理したい場合は、このセクションに従って、ポータルのドキュメント機能をカスタマイズしてください。



.. _customization-document-processes-customization:

カスタマイズ
--------------------------
以下の情報を使用して、プロジェクトで 4 つの呼び出し可能サブプロセスを作成し、ドキュメントの機能をカスタマイズします。


ドキュメントリストの取得
+++++++++++++++++++++++++++++++++++++

ポータルのドキュメントの取得方法をカスタマイズします。以下を使用して呼び出し可能サブプロセスを作成します。

**シグネチャ**：portalGetDocumentList

+------------------------+----------------------------------------------------------------------+
| 名前                   | タイプ                                                                 |
+========================+======================================================================+
| **パラメーター**                                                                                 |
+------------------------+----------------------------------------------------------------------+
| businessCase           | ch.ivyteam.ivy.workflow.ICase                                        |
+------------------------+----------------------------------------------------------------------+
|**結果**                                                                                     |
+------------------------+----------------------------------------------------------------------+
| documents              | java.util.List<com.axonivy.portal.components.ivydata.bo.IvyDocument> |
+------------------------+----------------------------------------------------------------------+
| message                | java.lang.String                                                     |
+------------------------+----------------------------------------------------------------------+

.. note::

   DMS からドキュメントリストを取得したら、 ``List<ch.ivy.addon.portal.component.ivydata.bo.IvyDocument>`` に変換してください。
   ``id``、 ``name``、 ``contentType`` は、マッピング時の必須フィールドです。

ドキュメントのアップロード
+++++++++++++++++++++++++++++++++++++++++++++++++++

ユーザーがドキュメントをアップロードする際のポータルの動作をカスタマイズします。以下を使用して呼び出し可能サブプロセスを作成します。


**シグネチャ**：portalUploadDocument

+-----------------------------------------+------------------------------------------------+---------------+
| 名前                                    | タイプ                                           | 注記          |
+=========================================+================================================+===============+
|**パラメーター**                                                                            |               |
+-----------------------------------------+------------------------------------------------+---------------+
| businessCase                            | ch.ivyteam.ivy.workflow.ICase                  |               |
+-----------------------------------------+------------------------------------------------+---------------+
| uploadedFile                            | org.primefaces.model.file.UploadedFile         |               |
+-----------------------------------------+------------------------------------------------+---------------+
| enableScriptCheckingForUploadedDocument | java.lang.Boolean                              |               |
+-----------------------------------------+------------------------------------------------+---------------+
| enableVirusScannerForUploadedDocument   | java.lang.Boolean                              |               |
+-----------------------------------------+------------------------------------------------+---------------+
| allowedUploadFileTypes                  | java.lang.String                               |               |
+-----------------------------------------+------------------------------------------------+---------------+
| **結果**                                                                                 |               |
+-----------------------------------------+------------------------------------------------+---------------+
| uploadedDocument                        | ch.ivyteam.ivy.workflow.document.IDocument     |               |
+-----------------------------------------+------------------------------------------------+---------------+
| message                                 | java.lang.String                               |               |
+-----------------------------------------+------------------------------------------------+---------------+
| status                                  | java.lang.String                               | OK or FAIL    |
+-----------------------------------------+------------------------------------------------+---------------+

ドキュメントのダウンロード
++++++++++++++++++++++++++++++++++++++++++

ユーザーがポータルからドキュメントをダウンロードする際の動作をカスタマイズします。以下を使用して呼び出し可能サブプロセスを作成します。


**シグネチャ**：portalDownloadDocument

+------------------------+------------------------------------------------------+
| 名前                   | タイプ                                                 |
+========================+======================================================+
| **パラメーター**                                                                 |
+------------------------+------------------------------------------------------+
| businessCase           | ch.ivyteam.ivy.workflow.ICase                        |
+------------------------+------------------------------------------------------+
| document               | com.axonivy.portal.components.ivydata.bo.IvyDocument |
+------------------------+------------------------------------------------------+
|**結果**                                                                     |
+------------------------+------------------------------------------------------+
| streamedContent        | org.primefaces.model.StreamedContent                 |
+------------------------+------------------------------------------------------+

ドキュメントの削除
++++++++++++++++++++++++++

ユーザーがポータルからドキュメントを削除する際の動作をカスタマイズします。以下を使用して呼び出し可能サブプロセスを作成します。


**シグネチャ**：portalDeleteDocument

+------------------------+------------------------------------------------------+
| 名前                   | タイプ                                                 |
+========================+======================================================+
| **パラメーター**                                                                 |
+------------------------+------------------------------------------------------+
| businessCase           | ch.ivyteam.ivy.workflow.ICase                        |
+------------------------+------------------------------------------------------+
| document               | com.axonivy.portal.components.ivydata.bo.IvyDocument |
+------------------------+------------------------------------------------------+
|**結果**                                                                     |
+------------------------+------------------------------------------------------+
| message                | java.lang.String                                     |
+------------------------+------------------------------------------------------+
